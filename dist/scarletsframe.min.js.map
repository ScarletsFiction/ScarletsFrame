{"version":3,"sources":["sf-a_init.js","sf-a_polyfill.js","sf-dom.js","sf-loader.js","sf-component.js","sf-model.js","sf-controller.js","sf-e-ajax.js","sf-z_end.js","sf-router.js","sf-virtual_scroll.js"],"names":["global","factory","exports","module","sf","window","this","undefined","document","internal","arguments","constructor","Function","loader","onFinish","apply","regex","getQuotes","validFunctionCall","strictVar","escapeHTML","uniqueDataParser","dataParser","allowedFunctionEval","avoidQuotes","str","func","temp","es","replace","full","push","length","i","isEmptyObject","obj","key","compareObject","obj1","obj2","hiddenProperty","property","value","Object","defineProperty","enumerable","configurable","deepProperty","path","assign","target","varArgs","TypeError","to","index","nextSource","nextKey","prototype","hasOwnProperty","call","writable","Element","remove","CharacterData","DocumentType","forEach","item","parentNode","removeChild","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","querySelectorAll","NodeList","callback","thisArg","location","origin","protocol","hostname","port","values","res","dom","selector","context","parseElement","String","$","self","findOne","querySelector","parent","element","closest","parentElement","prevAll","isNext","result","findNodes","nextSibling","previousSibling","nextAll","on","event","once","tempCallback","ev","addEventListener","capture","sf$eventListener","off","events","split","ref","removeEventListener","splice","animateCSS","animationName","duration","animationEnd","animation","OAnimation","MozAnimation","WebkitAnimation","t","style","webkitAnimationDuration","animationDuration","list","classList","add","setTimeout","emptyDOM","div","createElement","ul","tbody","tr","table","select","html","returnNode","tempDOM","indexOf","textContent","insertAdjacentHTML","escapeText","text","innerHTML","elements","documentElement","domReady","body","haveSymbol","getSelector","childIndexes","untilElement","names","id","test","unshift","tagName","e","join","array","substr","childNodes","loadedContent","totalContent","DOMWasLoaded","DOMReady","turnedOff","whenDOMReady","whenDOMLoaded","whenProgress","onProgress","f","css","rel","href","head","appendChild","js","type","async","src","console","warn","isQueued","domLoadEvent","model","queuePreprocess","domStateEvent","readyState","error","resourceWaitTimer","setInterval","waitResources","clearInterval","listener","controller","init","router","component","scope","registered","available","bases","for","name","extend","pending","base","outerHTML","triggerEvent","new","newElement","cloneNode","newID","setAttribute","sf$component","sf$componentFrom","newObj","root","Array","firstElementChild","destroy","DOMNodeRemoved","root_","run","bindingEnabled","processingElement","trimIndentation","indent","trim","RegExp","bracketMatch","chackValidFunctionCall","localEval","script","_model_","_modelScope","_content_","tempScript","preventExecution","check_","exec","log","_result_","_evaled_","eval","escapeEscapedQuote","unescapeEscapedQuote","elseIfHandle","else_","scopes","elseIf","elseValue","currentElement","previousElementSibling","getAttribute","modelName","$virtual","DOMCursor","modelKeys","modelRef","keys","templateParser_regex","REF_DIRECT","REF_IF","REF_EXEC","templateExec","parse","atIndex","parsed","data","if","templateParser","template","original","addresses","changesReference","pendingInsert","current","address","nodeType","refA","direct","match","cRef","dynamicFlag","parse_index","startFlag","attributes","a","refB","isValueInput","attribute","removeAttribute","sf$elementReferences","tDOM","insertBefore","syntheticCache","sf$cache","cache","modelRef_array","syntheticTemplate","changes","modelReference","newData","checkRelatedChanges","parseIndex","found","haveChanges","ref_","sf$haveChilds","sf$childRoot","reverse","currentDOM","notExist","isEqualNode","replaceChild","mask","runEval","preParsedReference","scopeMask","itemMask","preParsed","lastParsedIndex","prepared","actual","temp_","matched","slice","exist","charCodeAt","take","passVar","currentIndex","strDeclare","firstTime","JSON","stringify","check","VarPass_","VarPass","s1","obtained","val","findElse","pop","shift","condition","bindArray","propertyName","targetNode","editProperty","refreshTimer","parentChilds","children","isKeyed","contains","eventVar","processElement","options","other","count","vEndRange","preparedLength","spacer","lastElementChild","height","reset","clearTimeout","reinitScroll","overflow","vDOM","theParent","update","index_a","other_sibling","other_parent","oldChild","referenceNode","create","vCursor","floor","insertAdjacentElement","currentRemoved","startRemove","refreshVirtualSpacer","propertyProxy","subject","lastLength","from","reinitCursor","o","resetViewport","matchLeft","refresh","real","limit","callback_","var","virtual_scroll","handle","needle","elRef","getElement","process","content","parentNode_","elem","hardRefresh","softRefresh","virtualChilds","childElement","childElementCount","loopParser","method","items","extractPreprocess","sf$bindedKey","initBindingInformation","get","set","n","callInputListener","v2m","newValue","old","inputBoundRunning","inputTextBound","fromSFFramework","viewInputted","typeData","Number","sfModel","sfBounded","inputFilesBound","files","inputCheckBoxBound","checked","Boolean","inputSelectBound","multiple","selectedOptions","assignElementData","arrayValue","selected","checkbox","inputBoundRun","Event","dispatchEvent","triggerInputEvent","elementBoundChanges","oneWay","toLowerCase","modelToViewBinding","bindInput","modelScope","alreadyInitialized","queued","parsePreprocess","ceiling","after","nextElementSibling","before","hasAttribute","removeModelBinding","sf$componentFor","modelFrom","components","everyRemovedNodes","nodes","MutationObserver","observe","everyRecords","record","removedNodes","records","childList","subtree","bindedKey","getOwnPropertyDescriptor","elementBind","input","objValue","getAssigner","m2v","out","dcBracket","bindElement","onChanges","properties","copy","addressed","addressAttributes","currentNode","attrs","indexes","addressStart","commentFlag","flag","createComment","textNode","createTextNode","search","extract","sort","b","checkList","full_","match_","findModelProperty","asArray","enclosedHTMLParse","excludes","extracting","nodeName","enclosing","enclosed","nodeValue","modelElement","attr","active","bindedList","parentEl","bindedListIndex","listenSFClick","script_","method_","preventDefault","globals","jsonpRequests","Request","requestOptions","globalsNoCallbacks","callbackName","defaults","url","toString","user","password","headers","xhrFields","statusCode","processData","dataType","contentType","timeout","fireCallback","globalCallbackValue","optionCallbackValue","_i","paramsPrefix","toUpperCase","stringData","serializeQuery","abortTimeout_1","callbackName_1","Date","now","callbackSplit","requestUrl","addVars","filter","el","script_1","onerror","xhr","XMLHttpRequest","requestParameters","open","xhrTimeout","postData","ArrayBuffer","Blob","Document","FormData","boundary","setRequestHeader","headerName","crossDomain","$2","host","onload","status","responseData","parseError","responseText","err","responseType","response","onabort","abort","send","RequestShortcut","args","_a","success","params","prefix","encodeURIComponent","concat","post","json","getJSON","postJSON","setup","ajax","loading","enabled","pauseRenderOnTransition","currentPage","initialized","currentRouterURL","popstateListener","routingError","routingBack","goto","pathname","beforeEvent","enable","load","onEvent","loaded","special","lazyViewPoint","history","pushState","RouterLoading","_scarlets","DOMReference","foundAction","last","afterEvent","title","oldURL","newURL","routerLoaded","aborted","back","styleInitialized","scrollingByScript","refreshScrollBounding","cursor","bounding","Math","prepareCount","offsetTop","initial","dCursor","scrollHeight","scrollTo","scroller","virtual","reduce","scrollTop","insertCount","removeUserScrollFocus","getAbsoluteHeight","styles","getComputedStyle","margin","parseInt","offsetHeight","force","checkCursorPosition","additionalScroll","moveTo","getElementById","sheet","insertRule","cssRules","initStyles","reinitOnly","elementLength","obtainElements","_onElementResize","offElementResize","visibleLength","clientHeight","ceilingHeight","floorHeight","fillViewport","updating","resetCeiling","previousCeiling","nextFloor","hitFloor","hitCeiling","_onElementResize_timer","scrollWidth","width","onElementResize","dynamicHeight","offsetTo","fromCeiling","scrollFocused","moveElementCursor","navigator","userAgent","staticHeight"],"mappings":"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","file":"scarletsframe.min.js","sourcesContent":["(function(global, factory){\r\n  if(typeof exports === 'object' && typeof module !== 'undefined') module.exports = factory(global);\r\n  else global.sf = factory(global);\r\n}(typeof window !== \"undefined\" ? window : this, (function(window){'use strict';\r\nif(typeof document === undefined)\r\n\tdocument = window.document;\r\n// ===== Module Init =====\r\nvar internal = {};\r\n\r\nvar sf = function(){\r\n\tif(arguments[0].constructor === Function){\r\n\t\treturn sf.loader.onFinish.apply(null, arguments);\r\n\t}\r\n};\r\n\r\nsf.internal = {};\r\nsf.regex = {\r\n\tgetQuotes:/(['\"])[\\s\\S]*?[^\\\\]\\1/g,\r\n\tvalidFunctionCall:/[a-zA-Z0-9 \\]\\$\\)]/,\r\n\tstrictVar:'(?=\\\\b[^.]|^|\\\\n| +|\\\\t|\\\\W )',\r\n\tescapeHTML:/(?!&#.*?;)[\\u00A0-\\u9999<>\\&]/gm,\r\n\r\n\tuniqueDataParser:/{{((@|#[\\w])[\\s\\S]*?)}}/g,\r\n\tdataParser:/{{([^@%][\\s\\S]*?)}}/g,\r\n};\r\n\r\nvar allowedFunctionEval = [':', 'for', 'if', 'while', '_content_.take', 'console.log'];\r\n\r\nfunction avoidQuotes(str, func){\r\n\tvar temp = [];\r\n\tvar es = '<%$@>';\r\n\tstr = str.replace(sf.regex.getQuotes, function(full){\r\n\t\ttemp.push(full);\r\n\t\treturn es+(temp.length-1)+es;\r\n\t});\r\n\tstr = func(str);\r\n\tfor (var i = 0; i < temp.length; i++) {\r\n\t\tstr = str.replace(es+i+es, temp[i]);\r\n\t}\r\n\treturn str;\r\n}\r\n\r\nfunction isEmptyObject(obj){\r\n\tfor(var key in obj){\r\n\t\treturn false;\r\n\t}\r\n\treturn true\r\n}\r\n\r\nfunction compareObject(obj1, obj2){\r\n\tif(!obj1 || !obj2)\r\n\t\treturn false;\r\n\r\n\tfor(var i in obj1){\r\n\t\tif(typeof obj1[i] !== 'object' && obj1[i] !== obj2[i])\r\n\t\t\treturn false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction hiddenProperty(obj, property, value){\r\n\tObject.defineProperty(obj, property, {\r\n\t\tenumerable: false,\r\n\t\tconfigurable: true,\r\n\t\tvalue: value\r\n\t});\r\n}\r\n\r\nfunction deepProperty(obj, path){\r\n  for(var i = 0; i < path.length; i++){\r\n    obj = obj[path[i]];\r\n    if(obj === undefined) return obj;\r\n  }\r\n  return obj;\r\n}","// ==== ES5 Polyfill ====\r\nif(typeof Object.assign != 'function'){\r\n  Object.defineProperty(Object, \"assign\", {\r\n    value: function assign(target, varArgs) {\r\n      'use strict';\r\n      if (target == null)\r\n        throw new TypeError('Cannot convert undefined or null to object');\r\n      var to = Object(target);\r\n      for (var index = 1; index < arguments.length; index++) {\r\n        var nextSource = arguments[index];\r\n        if (nextSource != null) {\r\n          for (var nextKey in nextSource) {\r\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey))\r\n              to[nextKey] = nextSource[nextKey];\r\n          }\r\n        }\r\n      }\r\n      return to;\r\n    },\r\n    writable: true,\r\n    configurable: true\r\n  });\r\n}\r\n\r\nif(Element.prototype.remove === undefined || CharacterData.prototype.remove === undefined || DocumentType.prototype.remove === undefined){\r\n  (function (arr) {\r\n    arr.forEach(function (item) {\r\n      if (item.hasOwnProperty('remove')) {\r\n        return;\r\n      }\r\n      Object.defineProperty(item, 'remove', {\r\n        configurable: true,\r\n        enumerable: true,\r\n        writable: true,\r\n        value: function remove() {\r\n          if (this.parentNode !== null)\r\n            this.parentNode.removeChild(this);\r\n        }\r\n      });\r\n    });\r\n  })([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\r\n}\r\n\r\nif(!Element.prototype.matches){\r\n  Element.prototype.matches = (Element.prototype).matchesSelector ||\r\n    (Element.prototype).mozMatchesSelector || (Element.prototype).msMatchesSelector ||\r\n    (Element.prototype).oMatchesSelector || (Element.prototype).webkitMatchesSelector ||\r\n    function (s) {\r\n      var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n      i = matches.length;\r\n      while (--i >= 0 && matches.item(i) !== this){}\r\n      return i > -1;\r\n    };\r\n}\r\n\r\nif(!NodeList.prototype.forEach){\r\n    NodeList.prototype.forEach = function (callback, thisArg) {\r\n        thisArg = thisArg || window;\r\n        for (var i = 0; i < this.length; i++) {\r\n            callback.call(thisArg, this[i], i, this);\r\n        }\r\n    };\r\n}\r\n\r\nif(!window.location.origin)\r\n  window.location.origin = window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');\r\n\r\nif(!Object.values)\r\n  Object.values = function(obj){\r\n    var res = [];\r\n    for (var i in obj) {\r\n        if (obj.hasOwnProperty(i)) {\r\n            res.push(obj[i]);\r\n        }\r\n    }\r\n    return res;\r\n  }","sf.dom = function(selector, context){\r\n\tif(selector[0] === '<') return sf.dom.parseElement(selector);\r\n\tif(selector.constructor !== String) return selector;\r\n\r\n\tif(context) return context.querySelectorAll(selector);\r\n\treturn document.querySelectorAll(selector);\r\n}\r\n\r\nvar $ = sf.dom; // Shortcut\r\n\r\n;(function(){\r\n\tvar self = sf.dom;\r\n\r\n\tself.findOne = function(selector, context){\r\n\t\tif(context !== undefined) return context.querySelector(selector);\r\n\t\treturn document.querySelector(selector);\r\n\t}\r\n\r\n\tself.parent = function(element, selector){\r\n\t\tif(element.closest) return element.closest(selector);\r\n\r\n\t\tdo {\r\n\t\t\tif(element.matches(selector) === true)\r\n\t\t\t\treturn element;\r\n\r\n\t\t\telement = element.parentElement;\r\n\t\t} while (element !== null);\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tself.prevAll = function(element, selector, isNext){\r\n\t\tvar result = [];\r\n\t\tvar findNodes = selector === null || selector.constructor !== String ? true : false;\r\n\r\n\t\t// Skip current element\r\n\t\telement = isNext ? element.nextSibling : element.previousSibling;\r\n\t\twhile (element !== null) {\r\n\t\t\tif(findNodes === false && element.matches(selector) === true)\r\n\t\t\t\tresult.push(element);\r\n\t\t\telse{\r\n\t\t\t\tif(element === selector)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tresult.push(element);\r\n\t\t\t}\r\n\r\n\t\t\tif(isNext)\r\n\t\t\t\telement = element.nextSibling;\r\n\t\t\telse\r\n\t\t\t\telement = element.previousSibling;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// Shorcut\r\n\tself.nextAll = function(element, selector){\r\n\t\treturn self.prevAll(element, selector, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Listen to an event\r\n\t * @param  Node \t\t\telement \tparent element\r\n\t * @param  string \t\t\tevent   \tevent name\r\n\t * @param  function|string  selector    callback function or selector\r\n\t * @param  function\t\t\tcallback    callback function\r\n\t * @param  boolean\t\t\tonce    \tcall once\r\n\t * @return null\r\n\t */\r\n\tself.on = function(element, event, selector, callback, once){\r\n\t\tif(typeof element === 'string'){\r\n\t\t\telement = document;\r\n\t\t\tcallback = selector;\r\n\t\t\tselector = event;\r\n\t\t\tevent = element;\r\n\t\t}\r\n\r\n\t\tif(typeof selector === 'function'){\r\n\t\t\tcallback = selector;\r\n\t\t\tselector = null;\r\n\t\t}\r\n\r\n\t\tif(selector){\r\n\t\t\tvar tempCallback = callback;\r\n\t\t\tcallback = function(ev){\r\n\t\t\t\tif(self.parent(ev.target, selector) !== null)\r\n\t\t\t\t\ttempCallback(ev);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallback.selector = selector;\r\n\t\tcallback.once = once;\r\n\t\telement.addEventListener(event, callback, {capture:true, once:once === true});\r\n\r\n\t\t// Save event listener\r\n\t\tif(element.sf$eventListener === undefined)\r\n\t\t\telement.sf$eventListener = {};\r\n\r\n\t\tif(element.sf$eventListener[event] === undefined)\r\n\t\t\telement.sf$eventListener[event] = [];\r\n\r\n\t\telement.sf$eventListener[event].push(callback);\r\n\t}\r\n\r\n\t// Shorcut\r\n\tself.once = function(element, event, selector, callback){\r\n\t\tself.on(element, event, selector, callback, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Remove event listener\r\n\t * @param  Node \telement \tparent element\r\n\t * @param  string \tevent   \tevent name\r\n\t * @param  string  \tselector    selector\r\n\t * @return null\r\n\t */\r\n\tself.off = function(element, event, selector){\r\n\t\t// Remove all event\r\n\t\tif(event === undefined){\r\n\t\t\tif(element.sf$eventListener === undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar events = element.sf$eventListener[event];\r\n\t\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\t\tself.off(element, events[i]);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar events = event.split(' ');\r\n\t\tif(events.length !== 1){\r\n\t\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\t\tself.off(element, events[i]);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Remove listener\r\n\t\tif(element.sf$eventListener === undefined)\r\n\t\t\treturn;\r\n\r\n\t\tvar ref = element.sf$eventListener;\r\n\t\tif(ref !== undefined && ref[event] !== undefined){\r\n\t\t\tfor (var i = ref[event].length - 1; i >= 0; i--) {\r\n\t\t\t\tif(selector && ref[event][i].selector !== selector)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\telement.removeEventListener(event, ref[event].splice(i, 1), true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tself.animateCSS = function(element, animationName, callback, duration) {\r\n\t\tvar animationEnd = {\r\n\t\t\tanimation: 'animationend',\r\n\t\t\tOAnimation: 'oAnimationEnd',\r\n\t\t\tMozAnimation: 'mozAnimationEnd',\r\n\t\t\tWebkitAnimation: 'webkitAnimationEnd',\r\n\t\t};\r\n\r\n\t\tfor (var t in animationEnd){\r\n\t\t\tif(element.style[t] !== undefined){\r\n\t\t\t\tanimationEnd = animationEnd[t];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(duration){\r\n\t\t\telement.style.webkitAnimationDuration = duration+'s';\r\n\t\t\telement.style.animationDuration = duration+'s';\r\n\t\t}\r\n\r\n\t\tvar list = ('animated ' + animationName).split(' ');\r\n\t\telement.classList.add.apply(element.classList, list);\r\n\t\t$.once(element, animationEnd, function(){\r\n\t\t\telement.classList.remove.apply(element.classList, list);\r\n\t\t\t\r\n\t\t\tif(duration) setTimeout(function(){\r\n\t\t\t\telement.style.webkitAnimationDuration = duration+'s';\r\n\t\t\t\telement.style.animationDuration = duration+'s';\r\n\t\t\t}, 1);\r\n\r\n\t\t\tif(typeof callback === 'function') callback();\r\n\t\t});\r\n\t}\r\n\r\n\tvar emptyDOM = {\r\n\t\tdiv:document.createElement('div'),\r\n\t\tul:document.createElement('ul'),\r\n\t\ttbody:document.createElement('tbody'),\r\n\t\ttr:document.createElement('tr'),\r\n\t\ttable:document.createElement('table'),\r\n\t\tselect:document.createElement('select'),\r\n\t};\r\n\tself.parseElement = function(html, returnNode){\r\n\t\tvar result = [];\r\n\t\tvar tempDOM = emptyDOM.div;\r\n\r\n        if(html.indexOf('<li') === 0) tempDOM = emptyDOM.ul;\r\n        if(html.indexOf('<tr') === 0) tempDOM = emptyDOM.tbody;\r\n        if(html.indexOf('<td') === 0 || html.indexOf('<th') === 0) tempDOM = emptyDOM.tr;\r\n        if(html.indexOf('<tbody') === 0) tempDOM = emptyDOM.table;\r\n        if(html.indexOf('<option') === 0) tempDOM = emptyDOM.select;\r\n\r\n\t\ttempDOM.textContent = '';\r\n\t\ttempDOM.insertAdjacentHTML('afterBegin', html);\r\n\r\n\t\tvar ref = tempDOM[returnNode ? 'childNodes' : 'children'];\r\n\t\tfor (var i = 0; i < ref.length; i++) {\r\n\t\t\tresult.push(ref.item(i));\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tself.escapeText = function(text){\r\n\t\tvar tempDOM = emptyDOM.div;\r\n\t\ttempDOM.textContent = text;\r\n\t\treturn tempDOM.innerHTML;\r\n\t}\r\n\r\n\tself.remove = function(elements){\r\n\t\tif(elements.remove !== undefined)\r\n\t\t\treturn elements.remove();\r\n\r\n\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\telements[i].remove();\r\n\t\t}\r\n\t}\r\n\r\n\tvar documentElement = null;\r\n\tsetTimeout(function(){\r\n\t\tsf.loader.domReady(function(){\r\n\t\t\tdocumentElement = document.body.parentElement;\r\n\t\t});\r\n\t}, 1);\r\n\r\n\tvar haveSymbol = /[~`!@#$%^&*()+={}|[\\]\\\\:\";'<>?,./ ]/;\r\n\tself.getSelector = function(element, childIndexes, untilElement){\r\n\t\tvar names = [];\r\n\t\tif(untilElement === undefined) untilElement = documentElement;\r\n\r\n\t\tvar previousSibling = childIndexes ? 'previousSibling' : 'previousElementSibling';\r\n\r\n\t\twhile(element.parentNode !== null){\r\n\t\t\tif(element.id && !haveSymbol.test(element.id)){\r\n\t\t\t\tnames.unshift('#'+element.id);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(element === untilElement){\r\n\t\t\t\t\tif(childIndexes === undefined)\r\n\t\t\t\t\t\tnames.unshift(element.tagName);\r\n\t\t\t\t\telse names.unshift(0);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar e = element;\r\n\t\t\t\t\tvar i = childIndexes ? 0 : 1;\r\n\r\n\t\t\t\t\twhile(e[previousSibling]){\r\n\t\t\t\t\t\te = e[previousSibling];\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(childIndexes)\r\n\t\t\t\t\t\tnames.unshift(i);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tnames.unshift(\":nth-child(\"+i+\")\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\telement = element.parentNode;\r\n\t\t\t\tif(element === null)\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(childIndexes)\r\n\t\t\treturn names;\r\n\t\treturn names.join(\" > \");\r\n\t}\r\n\r\n\tself.childIndexes = function(array, context){\r\n\t\tvar element = context || documentElement;\r\n\t\tvar i = 1;\r\n\r\n\t\tif(array[0].constructor === String && element.id !== array[0].substr(1))\r\n\t\t\telement = element.querySelector(array[0]);\r\n\r\n\t\telse if(array.length === 1)\r\n\t\t\treturn element;\r\n\r\n\t\tfor (i = i; i < array.length; i++) {\r\n\t\t\telement = element.childNodes.item(array[i]);\r\n\r\n\t\t\tif(element === null)\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n})();","sf.loader = new function(){\r\n\tvar self = this;\r\n\tself.loadedContent = 0;\r\n\tself.totalContent = 0;\r\n\tself.DOMWasLoaded = false;\r\n\tself.DOMReady = false;\r\n\tself.turnedOff = true;\r\n\r\n\tvar whenDOMReady = [];\r\n\tvar whenDOMLoaded = [];\r\n\tvar whenProgress = [];\r\n\r\n\tself.off = function(){\r\n\t\tself.turnedOff = true;\r\n\t}\r\n\r\n\t// Make event listener\r\n\tself.onFinish = function(func){\r\n\t\tif(self.DOMWasLoaded) return func();\r\n\t\tif(whenDOMLoaded.indexOf(func) !== -1) return;\r\n\t\twhenDOMLoaded.push(func);\r\n\t}\r\n\tself.domReady = function(func){\r\n\t\tif(self.DOMReady) return func();\r\n\t\tif(whenDOMReady.indexOf(func) !== -1) return;\r\n\t\twhenDOMReady.push(func);\r\n\t}\r\n\tself.onProgress = function(func){\r\n\t\tif(self.DOMWasLoaded) return func(self.loadedContent, self.totalContent);\r\n\t\tif(whenProgress.indexOf(func) !== -1) return;\r\n\t\twhenProgress.push(func);\r\n\t}\r\n\r\n\tself.f = function(element){\r\n\t\tself.loadedContent++;\r\n\t\tfor (var i = 0; i < whenProgress.length; i++) {\r\n\t\t\twhenProgress[i](self.loadedContent, self.totalContent);\r\n\t\t}\r\n\t}\r\n\r\n\tself.css = function(list){\r\n\t\tif(self.DOMWasLoaded){\r\n\t\t\t// check if some list was loaded\r\n\t\t\tfor (var i = list.length - 1; i >= 0; i--) {\r\n\t\t\t\tif($('link[href*=\"'+list[i]+'\"]').length !== 0)\r\n\t\t\t\t\tlist.splice(i, 1);\r\n\t\t\t}\r\n\t\t\tif(list.length === 0) return;\r\n\t\t}\r\n\t\tself.turnedOff = false;\r\n\r\n\t\tself.totalContent = self.totalContent + list.length;\r\n\t\tfor(var i = 0; i < list.length; i++){\r\n\t\t\tvar s = document.createElement('link');\r\n\t        s.rel = 'stylesheet';\r\n\t        s.href = list[i];\r\n\t        s.addEventListener('load', sf.loader.f, {once:true});\r\n\t        s.addEventListener('error', sf.loader.f, {once:true});\r\n\t        document.head.appendChild(s);\r\n\t\t}\r\n\t}\r\n\r\n\tself.js = function(list){\r\n\t\tif(self.DOMWasLoaded){\r\n\t\t\t// check if some list was loaded\r\n\t\t\tfor (var i = list.length - 1; i >= 0; i--) {\r\n\t\t\t\tif($('script[src*=\"'+list[i]+'\"]').length !== 0)\r\n\t\t\t\t\tlist.splice(i, 1);\r\n\t\t\t}\r\n\t\t\tif(list.length === 0) return;\r\n\t\t}\r\n\t\tself.turnedOff = false;\r\n\r\n\t\tself.totalContent = self.totalContent + list.length;\r\n\t\tfor(var i = 0; i < list.length; i++){\r\n\t\t\tvar s = document.createElement('script');\r\n\t        s.type = \"text/javascript\";\r\n\t        s.async = true;\r\n\t        s.src = list[i];\r\n\t        s.addEventListener('load', sf.loader.f, {once:true});\r\n\t        s.addEventListener('error', sf.loader.f, {once:true});\r\n\t        document.head.appendChild(s);\r\n\t\t}\r\n\t}\r\n\r\n\tsetTimeout(function(){\r\n\t\tif(self.totalContent === 0 && !self.turnedOff){\r\n\t\t\tself.loadedContent = self.totalContent = 1;\r\n\t\t\tconsole.warn(\"If you don't use content loader feature, please turn it off with `sf.loader.off()`\");\r\n\t\t}\r\n\t}, 10000);\r\n\r\n\r\n\tvar isQueued = false;\r\n\tvar lastState = '';\r\n\tdocument.addEventListener(\"load\", function domLoadEvent(event){\r\n\t\t// Add processing class to queued element\r\n\t\tif(isQueued === false && document.body){\r\n\t\t\tdocument.removeEventListener('load', domLoadEvent, true);\r\n\r\n\t\t\tisQueued = sf.model.queuePreprocess(document.body);\r\n\r\n\t\t\tfor (var i = 0; i < isQueued.length; i++) {\r\n\t\t\t\tisQueued[i].classList.add('sf-dom-queued');\r\n\t\t\t}\r\n\r\n\t\t\tif(isQueued.length === 0) isQueued = false;\r\n\r\n\t\t\tif(lastState === 'loading'){\r\n\t\t\t\tvar repeatedList = $('[sf-repeat-this]', document.body);\r\n\t\t\t\tfor (var i = 0; i < repeatedList.length; i++) {\r\n\t\t\t\t\trepeatedList[i].classList.add('sf-dom-queued');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Find images\r\n\t\t\t\tvar temp = $('img:not(onload)[src]');\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tsf.loader.totalContent++;\r\n\t\t\t\t\ttemp[i].addEventListener('load', sf.loader.f, {once:true});\r\n\t\t\t\t\ttemp[i].addEventListener('error', sf.loader.f, {once:true});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, true);\r\n\r\n\tdocument.addEventListener('readystatechange', function domStateEvent(){\r\n\t\tif(document.readyState === 'interactive' || document.readyState === 'complete'){\r\n\t\t\tif(self.DOMReady === false){\r\n\t\t\t\tself.DOMReady = true;\r\n\t\t\t\tfor (var i = 0; i < whenDOMReady.length; i++) {\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\twhenDOMReady[i]();\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(isQueued === false)\r\n\t\t\t\tisQueued = sf.model.queuePreprocess(document.body);\r\n\r\n\t\t\tresourceWaitTimer = setInterval(waitResources, 100);\r\n\t\t\tdocument.removeEventListener('readystatechange', domStateEvent, true);\r\n\t\t}\r\n\t}, true);\r\n\r\n\tvar resourceWaitTimer = -1;\r\n\tfunction waitResources(){\r\n\t\tif(self.turnedOff === false && self.loadedContent < self.totalContent)\r\n\t\t\treturn;\r\n\r\n\t\tclearInterval(resourceWaitTimer);\r\n\r\n\t\tvar listener = sf.dom('script, link, img');\r\n\t\tfor (var i = 0; i < listener.length; i++) {\r\n\t\t\tlistener[i].removeEventListener('error', sf.loader.f);\r\n\t\t\tlistener[i].removeEventListener('load', sf.loader.f);\r\n\t\t}\r\n\r\n\t\tself.DOMWasLoaded = true;\r\n\t\tfor (var i = 0; i < whenDOMLoaded.length; i++) {\r\n\t\t\ttry{\r\n\t\t\t\twhenDOMLoaded[i]();\r\n\t\t\t} catch(e){\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}\r\n\t\twhenProgress.splice(0);\r\n\t\twhenDOMReady.splice(0);\r\n\t\twhenDOMLoaded.splice(0);\r\n\t\twhenDOMReady = whenDOMLoaded = null;\r\n\r\n\t\t// Last init\r\n\t\tsf.controller.init();\r\n\t\tsf.model.init(document.body, isQueued);\r\n\t\tsf.router.init();\r\n\r\n\t\tisQueued = null;\r\n\t}\r\n}\r\nsf.prototype.constructor = sf.loader.onFinish;","sf.component = new function(){\r\n\tvar self = this;\r\n\tvar scope = internal.component = {};\r\n\tself.registered = {};\r\n\tself.available = {};\r\n\r\n\tvar bases = {};\r\n\tvar events = {};\r\n\r\n\tself.for = function(name, func, extend){\r\n\t\tif(!sf.loader.DOMWasLoaded)\r\n\t\t\treturn sf(function(){\r\n\t\t\t\tself.for(name, func);\r\n\t\t\t});\r\n\r\n\t\tif(self.registered[name] === undefined)\r\n\t\t\tself.registered[name] = [func, sf.controller.pending[name], 0, false, extend];\r\n\t\tself.registered[name][0] = func;\r\n\t\tdelete sf.controller.pending[name];\r\n\t}\r\n\r\n\tself.event = function(name, func){\r\n\t\tevents[name] = func;\r\n\t}\r\n\r\n\tself.base = function(name, func){\r\n\t\tbases[name] = func;\r\n\t}\r\n\r\n\tself.html = function(name, outerHTML){\r\n\t\tif(!sf.loader.DOMWasLoaded)\r\n\t\t\treturn sf(function(){\r\n\t\t\t\tself.html(name, outerHTML);\r\n\t\t\t});\r\n\r\n\t\tif(self.registered[name] === undefined)\r\n\t\t\tself.registered[name] = [false, false, 0, false];\r\n\t\tself.registered[name][3] = $.parseElement(outerHTML)[0];\r\n\t}\r\n\r\n\tscope.triggerEvent = function(name, event, obj){\r\n\t\tif(events[name] === undefined || events[name][event] === undefined)\r\n\t\t\treturn;\r\n\r\n\t\tevents[name][event](obj, event);\r\n\t}\r\n\r\n\tvar tempDOM = document.createElement('div');\r\n\tself.new = function(name, element){\r\n\t\tvar newElement = element === undefined;\r\n\t\tif(element === undefined){\r\n\t\t\tif(self.registered[name][3] === false){\r\n\t\t\t\tconsole.error(\"HTML content for '\"+name+\"' was not defined\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telement = self.registered[name][3].cloneNode(true);\r\n\t\t}\r\n\r\n\t\tvar newID = name+'@'+(self.registered[name][2]++);\r\n\t\telement.setAttribute('sf-controller', newID);\r\n\t\telement.sf$component = true;\r\n\t\telement.sf$componentFrom = name;\r\n\r\n\t\tif(self.available[name] === undefined)\r\n\t\t\tself.available[name] = [];\r\n\r\n\t\tself.available[name].push(newID);\r\n\r\n\t\tvar newObj = sf.model.root[newID] = {};\r\n\t\tself.registered[name][0](newObj, sf.model);\r\n\r\n\t\tvar extend = self.registered[name][4];\r\n\t\tif(extend !== undefined){\r\n\t\t\tif(extend.constructor === Array){\r\n\t\t\t\tfor (var i = 0; i < extend.length; i++) {\r\n\t\t\t\t\tif(bases[extend[i]] === undefined)\r\n\t\t\t\t\t\treturn console.error(\"'\"+extend[i]+\"' base is not found\");\r\n\t\t\t\t\tbases[extend[i]](newObj, sf.model);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(bases[extend] === undefined)\r\n\t\t\t\t\treturn console.error(\"'\"+extend+\"' base is not found\");\r\n\t\t\t\tbases[extend](newObj, sf.model);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(self.registered[name][1])\r\n\t\t\tself.registered[name][1](newObj, sf.model);\r\n\r\n\t\tscope.triggerEvent(name, 'created', newObj);\r\n\r\n\t\tif(newElement){\r\n\t\t\t// Wrap to temporary vDOM\r\n\t\t\ttempDOM.appendChild(element);\r\n\t\t\tsf.model.init(element);\r\n\t\t\telement = tempDOM.firstElementChild;\r\n\t\t\telement.remove();\r\n\r\n\t\t\telement.model = sf.model.root[newID];\r\n\t\t\telement.destroy = function(){\r\n\t\t\t\tif(this.parentElement === null)\r\n\t\t\t\t\tinternal.model.DOMNodeRemoved(this);\r\n\t\t\t\telse this.remove();\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t\telement.model = sf.model.root[newID];\r\n\t\treturn newID;\r\n\t}\r\n};","// Data save and HTML content binding\r\nsf.model = function(scope){\r\n\tif(sf.component.registered[scope] !== undefined)\r\n\t\treturn root_(scope);\r\n\r\n\tif(!sf.model.root[scope])\r\n\t\tsf.model.root[scope] = {};\r\n\r\n\tif(sf.controller.pending[scope])\r\n\t\tsf.controller.run(scope);\r\n\r\n\treturn sf.model.root[scope];\r\n};\r\n\r\n(function(){\r\n\tvar self = sf.model;\r\n\tvar scope = internal.model = {};\r\n\tvar bindingEnabled = false;\r\n\tself.root = {};\r\n\r\n\tvar processingElement = null;\r\n\r\n\t// For debugging, normalize indentation\r\n\tfunction trimIndentation(text){\r\n\t\tvar indent = text.split(\"\\n\", 3);\r\n\t\tif(indent[0][0] !== ' ' || indent[0][0] !== \"\\t\")\r\n\t\t\tindent = indent[1];\r\n\t\telse indent = indent[0];\r\n\r\n\t\tif(indent === undefined) return text;\r\n\t\tindent = indent.length - indent.trim().length;\r\n\t\tif(indent === 0) return text;\r\n\t\treturn text.replace(RegExp('^([\\\\t ]{'+indent+'})', 'gm'), '');\r\n\t}\r\n\r\n\t// Secured evaluation\r\n\tvar bracketMatch = RegExp('([\\\\w.]*?[\\\\S\\\\s])\\\\('+sf.regex.avoidQuotes, 'g');\r\n\tvar chackValidFunctionCall = sf.regex.validFunctionCall;\r\n\tvar localEval = function(script, _model_, _modelScope, _content_){\r\n\t\t\"use strict\";\r\n\r\n\t\t// ==== Security check ====\r\n\t\tvar tempScript = script;\r\n\r\n\t\t// Remove all inner quotes\r\n\t\ttempScript = tempScript.replace(sf.regex.getQuotes, '\"Quotes\"');\r\n\r\n\t\t// Prevent vulnerability by remove bracket to avoid a function call\r\n\t\tvar preventExecution = false;\r\n\t\tvar check_ = null;\r\n\t\twhile((check_ = bracketMatch.exec(tempScript)) !== null){\r\n\t\t\tcheck_[1] = check_[1].trim();\r\n\r\n\t\t\tif(allowedFunctionEval.indexOf(check_[1]) === -1 &&\r\n\t\t\t\tcheck_[1].split('.')[0] !== '_modelScope' &&\r\n\t\t\t\tchackValidFunctionCall.test(check_[1][check_[1].length-1])\r\n\t\t\t){\r\n\t\t\t\tpreventExecution = check_[1];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(preventExecution){\r\n\t\t\tconsole.error(\"Trying to executing unrecognized function (\"+preventExecution+\")\");\r\n\t\t\tconsole.log(trimIndentation(processingElement.outerHTML).trim());\r\n\t\t\t//console.log(tempScript);\r\n\t\t\treturn '#DOMError';\r\n\t\t}\r\n\t\t// ==== Security check ended ====\r\n\t\r\n\t\tvar _result_ = '';\r\n\t\ttry{\r\n\t\t\tif(/@return /.test(script) === true){\r\n\t\t\t\tvar _evaled_ = eval('(function(){'+script.split('@return ').join('return ')+'})()');\r\n\t\t\t\treturn _result_ + _evaled_;\r\n\t\t\t}\r\n\t\t\telse var _evaled_ = eval(script);\r\n\t\t} catch(e){\r\n\t\t\tconsole.error(e);\r\n\t\t\tconsole.log(trimIndentation(processingElement.outerHTML).trim());\r\n\t\t\t//console.log(tempScript);\r\n\t\t\treturn '#DOMError';\r\n\t\t}\r\n\r\n\t\tif(_result_ !== '') return _result_;\r\n\t\treturn _evaled_;\r\n\t}\r\n\r\n\t// Find an index for the element on the list\r\n\tself.index = function(element){\r\n\t\tvar i = -1;\r\n\t\tvar tagName = element.tagName;\r\n\t\tvar currentElement = element;\r\n\r\n\t\twhile(element !== null) {\r\n\t\t\tif(element.tagName === tagName)\r\n\t\t\t\ti++;\r\n\r\n\t\t\telement = element.previousElementSibling;\r\n\t\t}\r\n\r\n\t\tvar list = currentElement.getAttribute('sf-bind-list');\r\n\t\tif(!list) return i;\r\n\r\n\t\tvar ref = self.root[sf.controller.modelName(currentElement)][list];\r\n\t\tif(!ref.$virtual) return i;\r\n\r\n\t\treturn i + ref.$virtual.DOMCursor - 1;\r\n\t}\r\n\r\n\t// Declare model for the name with a function\r\n\tself.for = function(name, func){\r\n\t\tif(!sf.loader.DOMWasLoaded)\r\n\t\t\treturn sf(function(){\r\n\t\t\t\tself.for(name, func);\r\n\t\t\t});\r\n\t\t\r\n\t\tfunc(self(name), self);\r\n\t}\r\n\r\n\t// Get property of the model\r\n\tself.modelKeys = function(modelRef){\r\n\t\tvar keys = Object.keys(modelRef);\r\n\t\tfor (var i = keys.length - 1; i >= 0; i--) {\r\n\t\t\tif(keys[i].indexOf('$') !== -1)\r\n\t\t\t\tkeys.splice(i, 1);\r\n\t\t}\r\n\t\treturn keys;\r\n\t}\r\n\r\n\t// Escape the escaped quote\r\n\tfunction escapeEscapedQuote(text){\r\n\t\treturn text.split('\\\\\"').join('\\\\$%*').split(\"\\\\'\").join('\\\\%$*');\r\n\t}\r\n\r\n\tfunction unescapeEscapedQuote(text){\r\n\t\treturn text.split('\\\\$%*').join('\\\\\"').split('\\\\%$*').join(\"\\\\'\");\r\n\t}\r\n\r\n\tfunction elseIfHandle(else_, scopes){\r\n\t\tvar elseIf = else_.elseIf;\r\n\r\n\t\t// Else if\r\n\t\tfor (var i = 0; i < elseIf.length; i++) {\r\n\t\t\t// Check the condition\r\n\t\t\tscopes[0] = elseIf[i][0];\r\n\t\t\tif(!localEval.apply(self.root, scopes))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t// Get the value\r\n\t\t\tscopes[0] = elseIf[i][1];\r\n\t\t\treturn localEval.apply(self.root, scopes);\r\n\t\t}\r\n\r\n\t\t// Else\r\n\t\tif(else_.elseValue === null)\r\n\t\t\treturn '';\r\n\r\n\t\tscopes[0] = else_.elseValue;\r\n\t\treturn localEval.apply(self.root, scopes);\r\n\t}\r\n\r\n\t// ==== Template parser ====\r\n\tvar templateParser_regex = /{{%=([0-9]+)/gm;\r\n\tvar REF_DIRECT = 0, REF_IF = 1, REF_EXEC = 2;\r\n\tvar templateExec = function(parse, item, atIndex){\r\n\t\tvar parsed = {};\r\n\r\n\t\t// Get or evaluate static or dynamic data\r\n\t\tfor (var i = 0; i < parse.length; i++) {\r\n\t\t\tif(atIndex !== undefined && atIndex.indexOf(i) === -1)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar ref = parse[i];\r\n\t\t\tref.data[1] = item;\r\n\r\n\t\t\t// Direct evaluation type\r\n\t\t\tif(ref.type === REF_DIRECT || ref.type === REF_EXEC)\r\n\t\t\t\tparsed[i] = {type:ref.type, data:localEval.apply(self.root, ref.data)};\r\n\r\n\t\t\t// Conditional type\r\n\t\t\telse if(ref.type === REF_IF){\r\n\t\t\t\tvar scopes = ref.data;\r\n\t\t\t\tparsed[i] = {type:ref.type, data:''};\r\n\t\t\t\tscopes[0] = ref.if[0];\r\n\r\n\t\t\t\t// If condition was not meet\r\n\t\t\t\tif(!localEval.apply(self.root, scopes)){\r\n\t\t\t\t\tparsed[i].data = elseIfHandle(ref, scopes);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscopes[0] = ref.if[1];\r\n\t\t\t\tparsed[i].data = localEval.apply(self.root, scopes);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn parsed;\r\n\t}\r\n\r\n\tvar templateParser = function(template, item, original){\r\n\t\tvar html = original === true ? template.html : template.html.cloneNode(true);\r\n\t\tvar addresses = template.addresses;\r\n\t\tvar parsed = templateExec(template.parse, item);\r\n\r\n\t\t// Save model item reference to node\r\n\t\thtml.model = item;\r\n\r\n\t\tvar changesReference = [];\r\n\t\tvar pendingInsert = [];\r\n\r\n\t\t// Find element where the data belongs to\r\n\t\tfor (var i = 0; i < addresses.length; i++) {\r\n\t\t\tvar ref = addresses[i];\r\n\t\t\tvar current = $.childIndexes(ref.address, html);\r\n\r\n\t\t\t// Modify element attributes\r\n\t\t\tif(ref.nodeType === 1){\r\n\t\t\t\tvar refA = ref.attributes;\r\n\t\t\t\tfor(var a = 0; a < refA.length; a++){\r\n\t\t\t\t\tvar refB = refA[a];\r\n\r\n\t\t\t\t\tvar isValueInput = (refB.name === 'value' && (current.tagName === 'TEXTAREA' ||\r\n\t\t\t\t\t\t(current.tagName === 'INPUT' && /checkbox|radio|hidden/.test(current.type) === false)\r\n\t\t\t\t\t));\r\n\r\n\t\t\t\t\tchangesReference.push({\r\n\t\t\t\t\t\tattribute:isValueInput === true ? current : current.attributes[refB.name],\r\n\t\t\t\t\t\tref:refB\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(refB.direct !== undefined){\r\n\t\t\t\t\t\tif(refB.name === 'value' && isValueInput === true){\r\n\t\t\t\t\t\t\tcurrent.value = parsed[refB.direct].data;\r\n\t\t\t\t\t\t\tcurrent.removeAttribute('value');\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrent.setAttribute(refB.name, parsed[refB.direct].data);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Below is used for multiple data\r\n\t\t\t\t\tif(refB.name === 'value' && isValueInput === true){\r\n\t\t\t\t\t\tvar temp = current.value;\r\n\t\t\t\t\t\tcurrent.removeAttribute('value');\r\n\t\t\t\t\t\tcurrent.value = temp;\r\n\t\t\t\t\t\trefB = current;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse refB = current.attributes[refB.name];\r\n\r\n\t\t\t\t\trefB.value = refB.value.replace(templateParser_regex, function(full, match){\r\n\t\t\t\t\t\treturn parsed[match].data;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Replace text node\r\n\t\t\tif(ref.nodeType === 3){\r\n\t\t\t\tvar refA = current;\r\n\r\n\t\t\t\tchangesReference.push({\r\n\t\t\t\t\ttextContent:refA,\r\n\t\t\t\t\tref:ref\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(ref.direct !== undefined){\r\n\t\t\t\t\trefA.textContent = parsed[ref.direct].data;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Below is used for multiple/dynamic data\r\n\t\t\t\trefA.textContent = refA.textContent.replace(templateParser_regex, function(full, match){\r\n\t\t\t\t\treturn parsed[match].data;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Replace dynamic node\r\n\t\t\tif(ref.nodeType === -1){\r\n\t\t\t\tvar cRef = {\r\n\t\t\t\t\tdynamicFlag:current,\r\n\t\t\t\t\tdirect:ref.parse_index,\r\n\t\t\t\t\tparentNode:current.parentNode,\r\n\t\t\t\t\tstartFlag:ref.startFlag && $.childIndexes(ref.startFlag, html)\r\n\t\t\t\t};\r\n\t\t\t\tchangesReference.push(cRef);\r\n\r\n\t\t\t\t// Pending element insert to take other element reference\r\n\t\t\t\tpendingInsert.push(cRef);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Save reference to element\r\n\t\thtml.sf$elementReferences = changesReference;\r\n\t\t// html.sf$modelParsed = parsed;\r\n\r\n\t\t// Run the pending element\r\n\t\tfor (var i = 0; i < pendingInsert.length; i++) {\r\n\t\t\tvar ref = pendingInsert[i];\r\n\t\t\tvar tDOM = $.parseElement(parsed[ref.direct].data, true);\r\n\t\t\tfor (var a = 0; a < tDOM.length; a++) {\r\n\t\t\t\tref.parentNode.insertBefore(tDOM[a], ref.dynamicFlag);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction syntheticCache(element, template, item){\r\n\t\tif(element.sf$cache === undefined)\r\n\t\t\telement.sf$cache = {};\r\n\r\n\t\tvar cache = element.sf$cache;\r\n\t\tvar modelRef_array = template.modelRef_array;\r\n\r\n\t\tfor (var i = 0; i < modelRef_array.length; i++) {\r\n\t\t\tvar ref = modelRef_array[i];\r\n\t\t\tcache[ref[0]] = deepProperty(item, ref[1]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction syntheticTemplate(element, template, property, item){\r\n\t\tvar cache = element.sf$cache;\r\n\t\tvar modelRef_array = template.modelRef_array;\r\n\r\n\t\tif(property !== undefined){\r\n\t\t\tvar changes = template.modelReference[property];\r\n\t\t\tif(changes === undefined || changes.length === 0){\r\n\t\t\t\tconsole.error(\"Failed to run syntheticTemplate because property '\"+property+\"' is not observed\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif(cache)\r\n\t\t\t\tfor (var i = 0; i < modelRef_array.length; i++) {\r\n\t\t\t\t\tvar ref = modelRef_array[i];\r\n\t\t\t\t\tif(ref[0] !== property) continue;\r\n\r\n\t\t\t\t\tvar newData = deepProperty(item, ref[1]);\r\n\r\n\t\t\t\t\t// Check if data was different\r\n\t\t\t\t\tif(cache[ref[0]] !== newData)\r\n\t\t\t\t\t\tcache[ref[0]] = newData;\r\n\t\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvar changes = [];\r\n\t\t\tfor (var i = 0; i < modelRef_array.length; i++) {\r\n\t\t\t\tvar ref = modelRef_array[i];\r\n\t\t\t\tif(cache === undefined){\r\n\t\t\t\t\tArray.prototype.push.apply(changes, template.modelReference[ref[0]]);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar newData = deepProperty(item, ref[1]);\r\n\r\n\t\t\t\t// Check if data was different\r\n\t\t\t\tif(cache[ref[0]] !== newData){\r\n\t\t\t\t\tArray.prototype.push.apply(changes, template.modelReference[ref[0]]);\r\n\t\t\t\t\tcache[ref[0]] = newData;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(changes.length === 0) return false;\r\n\t\t}\r\n\r\n\t\tvar parsed = templateExec(template.parse, item, changes);\r\n\t\tfunction checkRelatedChanges(parseIndex){\r\n\t\t\tvar found = false;\r\n\t\t\tfor (var i = 0; i < parseIndex.length; i++) {\r\n\t\t\t\tif(changes.indexOf(parseIndex[i]) !== -1){\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(found === false)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t// Prepare all required data\r\n\t\t\tchanges = [];\r\n\t\t\tfor (var i = 0; i < parseIndex.length; i++) {\r\n\t\t\t\tif(parsed[parseIndex[i]] === undefined){\r\n\t\t\t\t\tchanges.push(parseIndex[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tObject.assign(parsed, templateExec(template.parse, item, changes));\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar changesReference = element.sf$elementReferences;\r\n\t\tvar haveChanges = false;\r\n\t\tfor (var i = 0; i < changesReference.length; i++) {\r\n\t\t\tvar cRef = changesReference[i];\r\n\r\n\t\t\tif(cRef.dynamicFlag !== undefined){ // Dynamic data\r\n\t\t\t\tif(parsed[cRef.direct] !== undefined){\r\n\t\t\t\t\tvar tDOM = $.parseElement(parsed[cRef.direct].data, true).reverse();\r\n\t\t\t\t\tvar currentDOM = $.prevAll(cRef.dynamicFlag, cRef.startFlag);\r\n\t\t\t\t\tvar notExist = false;\r\n\r\n\t\t\t\t\t// Replace if exist, skip if similar\r\n\t\t\t\t\tfor (var a = 0; a < tDOM.length; a++) {\r\n\t\t\t\t\t\tif(currentDOM[a] === undefined){\r\n\t\t\t\t\t\t\tnotExist = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(currentDOM[a].isEqualNode(tDOM[a]) === false)\r\n\t\t\t\t\t\t\tcRef.parentNode.replaceChild(tDOM[a], currentDOM[a]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add if not exist\r\n\t\t\t\t\tif(notExist){\r\n\t\t\t\t\t\tfor (var a = 0; a < tDOM.length; a++)\r\n\t\t\t\t\t\t\tcRef.parentNode.insertBefore(tDOM[a], cRef.dynamicFlag);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Remove if over index\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tfor (var a = tDOM.length; a < currentDOM.length; a++) {\r\n\t\t\t\t\t\t\tcurrentDOM[a].remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thaveChanges = true;\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(cRef.textContent !== undefined){ // Text only\r\n\t\t\t\tif(cRef.ref.parse_index !== undefined){ // Multiple\r\n\t\t\t\t\tif(checkRelatedChanges(cRef.ref.parse_index) === true){\r\n\t\t\t\t\t\tvar temp = cRef.ref.value.replace(templateParser_regex, function(full, match){\r\n\t\t\t\t\t\t\treturn parsed[match].data;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(cRef.textContent.textContent === temp) continue;\r\n\t\t\t\t\t\tcRef.textContent.textContent = temp;\r\n\r\n\t\t\t\t\t\thaveChanges = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Direct value\r\n\t\t\t\telse if(parsed[cRef.ref.direct]){\r\n\t\t\t\t\tvar value = parsed[cRef.ref.direct].data;\r\n\t\t\t\t\tif(cRef.textContent.textContent === value) continue;\r\n\r\n\t\t\t\t\tvar ref_ = cRef.textContent;\r\n\t\t\t\t\t// Remove old element if exist\r\n\t\t\t\t\tif(ref_.sf$haveChilds === true){\r\n\t\t\t\t\t\twhile(ref_.previousSibling && ref_.previousSibling.sf$childRoot === ref_){\r\n\t\t\t\t\t\t\tref_.previousSibling.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tref_.textContent = value;\r\n\t\t\t\t\thaveChanges = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(cRef.attribute !== undefined){ // Attributes\r\n\t\t\t\tif(cRef.ref.parse_index !== undefined){ // Multiple\r\n\t\t\t\t\tif(checkRelatedChanges(cRef.ref.parse_index) === true){\r\n\t\t\t\t\t\tvar temp = cRef.ref.value.replace(templateParser_regex, function(full, match){\r\n\t\t\t\t\t\t\treturn parsed[match].data;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(cRef.attribute.value === temp) continue;\r\n\t\t\t\t\t\tcRef.attribute.value = temp;\r\n\r\n\t\t\t\t\t\thaveChanges = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Direct value\r\n\t\t\t\telse if(parsed[cRef.ref.direct]){\r\n\t\t\t\t\tvar value = parsed[cRef.ref.direct].data;\r\n\t\t\t\t\tif(cRef.attribute.value === value) continue;\r\n\t\t\t\t\tcRef.attribute.value = value;\r\n\r\n\t\t\t\t\thaveChanges = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn haveChanges;\r\n\t}\r\n\r\n\t// For contributor of this library\r\n\t// Please be careful when you're passing the eval argument\r\n\tvar dataParser = function(html, _model_, mask, scope, runEval, preParsedReference){\r\n\t\tvar _modelScope = self.root[scope];\r\n\t\tif(!runEval) runEval = '';\r\n\r\n\t\t// Don't match text inside quote, or object keys\r\n\t\tvar scopeMask = RegExp(sf.regex.strictVar+'('+self.modelKeys(_modelScope).join('|')+')\\\\b', 'g');\r\n\r\n\t\tif(mask)\r\n\t\t\tvar itemMask = RegExp(sf.regex.strictVar+mask+'\\\\.\\\\b', 'g');\r\n\r\n\t\tbindingEnabled = true;\r\n\r\n\t\tif(runEval === '#noEval'){\r\n\t\t\tvar preParsed = [];\r\n\t\t\tvar lastParsedIndex = preParsedReference.length;\r\n\t\t}\r\n\r\n\t\tvar prepared = html.replace(sf.regex.dataParser, function(actual, temp){\r\n\t\t\ttemp = avoidQuotes(temp, function(temp_){\r\n\t\t\t\t// Unescape HTML\r\n\t\t\t\ttemp = temp.split('&amp;').join('&').split('&lt;').join('<').split('&gt;').join('>');\r\n\r\n\t\t\t\t// Mask item variable\r\n\t\t\t\tif(mask)\r\n\t\t\t\t\ttemp_ = temp_.replace(itemMask, function(matched){\r\n\t\t\t\t\t\treturn '_model_.'+matched[0].slice(1);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t// Mask model for variable\r\n\t\t\t\treturn temp_.replace(scopeMask, function(full, matched){\r\n\t\t\t\t\treturn '_modelScope.'+matched;\r\n\t\t\t\t});\r\n\t\t\t}).split('_model_._modelScope.').join('_model_.');\r\n\r\n\t\t\t// Evaluate\r\n\t\t\tif(runEval === '#noEval'){\r\n\t\t\t\ttemp = temp.trim();\r\n\r\n\t\t\t\t// Simplicity similar\r\n\t\t\t\tvar exist = preParsed.indexOf(temp);\r\n\r\n\t\t\t\tif(exist === -1){\r\n\t\t\t\t\tpreParsed.push(temp);\r\n\t\t\t\t\tpreParsedReference.push({type:REF_DIRECT, data:[temp, _model_, _modelScope]});\r\n\t\t\t\t\treturn '{{%=' + (preParsed.length + lastParsedIndex - 1);\r\n\t\t\t\t}\r\n\t\t\t\treturn '{{%=' + (exist + lastParsedIndex);\r\n\t\t\t}\r\n\r\n\t\t\ttemp = '' + localEval.apply(self.root, [runEval + temp, _model_, _modelScope]);\r\n\r\n\t\t\treturn temp.replace(sf.regex.escapeHTML, function(i) {\r\n\t\t        return '&#'+i.charCodeAt(0)+';';\r\n\t\t    });\r\n\t\t});\r\n\r\n\t\tif(runEval === '#noEval'){\r\n\t\t\t// Clear memory before return\r\n\t\t\tpreParsed = _modelScope = _model_ = mask = scope = runEval = scopeMask = itemMask = html = null;\r\n\t\t\tsetTimeout(function(){prepared = null}, 1);\r\n\t\t}\r\n\t\treturn prepared;\r\n\t}\r\n\r\n\t// Dynamic data parser\r\n\tvar uniqueDataParser = function(html, _model_, mask, scope, runEval){\r\n\t\t// Get prepared html content\r\n\t\tvar _content_ = {\r\n\t\t\tlength:0,\r\n\t\t\ttake:function(passVar, currentIndex){\r\n\t\t\t\tif(passVar === null)\r\n\t\t\t\t\treturn dataParser(this[currentIndex], _model_, mask, scope);\r\n\r\n\t\t\t\t// Use strict mode and prepare for new variables\r\n\t\t\t\tvar strDeclare = '\"use strict\";var ';\r\n\t\t\t\tvar firstTime = true;\r\n\r\n\t\t\t\t// Declare new variable\r\n\t\t\t\tfor(var key in passVar){\r\n\t\t\t\t\tif(typeof passVar[key] === 'string')\r\n\t\t\t\t\t\tpassVar[key] = '\"'+passVar[key].split('\"').join('\\\\\"')+'\"';\r\n\t\t\t\t\telse if(typeof passVar[key] === 'object')\r\n\t\t\t\t\t\tpassVar[key] = JSON.stringify(passVar[key]);\r\n\r\n\t\t\t\t\tif(!firstTime)\r\n\t\t\t\t\t\tstrDeclare += ',';\r\n\r\n\t\t\t\t\tstrDeclare += key + ' = ' + passVar[key];\r\n\t\t\t\t\tfirstTime = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Remove var because no variable are being passed\r\n\t\t\t\tif(firstTime === true)\r\n\t\t\t\t\tstrDeclare = strDeclare.replace('var ', '');\r\n\r\n\t\t\t\t// Escape function call for addional security eval protection\r\n\t\t\t\tstrDeclare = strDeclare.split('(').join('&#40;').split(')').join('&#41;');\r\n\r\n\t\t\t\t// Pass to static data parser for another HTML data\r\n\t\t\t\treturn dataParser(this[currentIndex], _model_, mask, scope, strDeclare + ';');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Build script preparation\r\n\t\thtml = html.replace(/{\\[([\\s\\S]*?)\\]}/g, function(full, matched){\r\n\t\t\tif(/{{.*?}}/.test(matched) === false)\r\n\t\t\t\treturn \"_result_ += '\"+matched.split(\"'\").join(\"\\\\'\")+\"'\";\r\n\r\n\t\t\t_content_[_content_.length] = matched;\r\n\t\t\t_content_.length++;\r\n\t\t\treturn '_result_ += _content_.take(&VarPass&, '+(_content_.length - 1)+');';\r\n\t\t});\r\n\r\n\t\tvar _modelScope = self.root[scope];\r\n\r\n\t\t// Don't match text inside quote, or object keys\r\n\t\tvar scopeMask = RegExp(sf.regex.strictVar+'('+self.modelKeys(_modelScope).join('|')+')\\\\b', 'g');\r\n\r\n\t\tif(mask)\r\n\t\t\tvar itemMask = RegExp(sf.regex.strictVar+mask+'\\\\.\\\\b', 'g');\r\n\r\n\t\tif(runEval === '#noEval')\r\n\t\t\tvar preParsedReference = [];\r\n\r\n\t\tvar prepared = html.replace(sf.regex.uniqueDataParser, function(actual, temp){\r\n\t\t\ttemp = avoidQuotes(temp, function(temp_){\r\n\t\t\t\t// Unescape HTML\r\n\t\t\t\ttemp_ = temp_.split('&amp;').join('&').split('&lt;').join('<').split('&gt;').join('>');\r\n\r\n\t\t\t\t// Mask item variable\r\n\t\t\t\tif(mask)\r\n\t\t\t\t\ttemp_ = temp_.replace(itemMask, function(matched){\r\n\t\t\t\t\t\treturn '_model_.'+matched[0].slice(1);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t// Mask model for variable\r\n\t\t\t\treturn temp_.replace(scopeMask, function(full, matched){\r\n\t\t\t\t\treturn '_modelScope.'+matched;\r\n\t\t\t\t});\r\n\t\t\t}).split('_model_._modelScope.').join('_model_.');\r\n\r\n\t\t\tvar result = '';\r\n\t\t\tvar check = false;\r\n\r\n\t\t\t// Get defined variables\r\n\t\t\tvar VarPass_ = /(var|let)([\\w,\\s]+)(?=\\s(?==|in|of))/g;\r\n\t\t\tvar VarPass = [];\r\n\t\t\tvar s1 = null;\r\n\t\t\twhile((s1 = VarPass_.exec(temp)) !== null){\r\n\t\t\t\tVarPass.push(s1[2]);\r\n\t\t\t}\r\n\r\n\t\t\tif(_model_ === null && runEval === '#noEval')\r\n\t\t\t\tVarPass.push('_model_');\r\n\r\n\t\t\tif(VarPass.length !== 0){\r\n\t\t\t\tvar obtained = [];\r\n\t\t\t\tfor (var i = 0; i < VarPass.length; i++) {\r\n\t\t\t\t\tVarPass[i].replace(/([\\n\\t\\r]|  )+/g, '').split(',').forEach(function(val){\r\n\t\t\t\t\t\tobtained.push(val);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tVarPass = obtained;\r\n\t\t\t\tfor (var i = 0; i < VarPass.length; i++) {\r\n\t\t\t\t\tVarPass[i] += ':(typeof '+VarPass[i]+'!==\"undefined\"?'+VarPass[i]+':undefined)';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(VarPass.length === 0)\r\n\t\t\t\t\tVarPass = 'null';\r\n\t\t\t\telse VarPass = '{'+VarPass.join(',')+'}';\r\n\t\t\t\ttemp = temp.split('&VarPass&').join(VarPass);\r\n\t\t\t}\r\n\t\t\telse temp = temp.split('&VarPass&').join('null');\r\n\r\n\t\t\tcheck = temp.split('@if ');\r\n\t\t\tif(check.length !== 1){\r\n\t\t\t\tcheck = check[1].split(':');\r\n\r\n\t\t\t\t// {if, elseIf:([if, value], ...), elseValue}\r\n\t\t\t\tvar findElse = function(text){\r\n\t\t\t\t\ttext = text.join(':');\r\n\t\t\t\t\tvar else_ = null;\r\n\r\n\t\t\t\t\t// Split elseIf\r\n\t\t\t\t\ttext = text.split('@elseif ');\r\n\r\n\t\t\t\t\t// Get else value\r\n\t\t\t\t\tvar else_ = text[text.length - 1].split('@else');\r\n\t\t\t\t\tif(else_.length === 2){\r\n\t\t\t\t\t\ttext[text.length - 1] = else_[0];\r\n\t\t\t\t\t\telse_ = else_.pop();\r\n\t\t\t\t\t\telse_ = else_.substr(else_.indexOf(':') + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse else_ = null;\r\n\r\n\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\tif:text.shift(),\r\n\t\t\t\t\t\telseIf:[],\r\n\t\t\t\t\t\telseValue:else_\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// Separate condition script and value\r\n\t\t\t\t\tfor (var i = 0; i < text.length; i++) {\r\n\t\t\t\t\t\tvar val = text[i].split(':');\r\n\t\t\t\t\t\tobj.elseIf.push([val.shift(), val.join(':')]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(runEval === '#noEval'){\r\n\t\t\t\t\tvar condition = check.shift();\r\n\t\t\t\t\tvar elseIf = findElse(check);\r\n\t\t\t\t\telseIf.type = REF_IF;\r\n\t\t\t\t\telseIf.data = [null, _model_, _modelScope, _content_];\r\n\r\n\t\t\t\t\t// Trim Data\r\n\t\t\t\t\telseIf.if = [condition.trim(), elseIf.if.trim()];\r\n\t\t\t\t\tif(elseIf.elseValue !== null)\r\n\t\t\t\t\t\telseIf.elseValue = elseIf.elseValue.trim();\r\n\r\n\t\t\t\t\tfor (var i = 0; i < elseIf.elseIf.length; i++) {\r\n\t\t\t\t\t\telseIf.elseIf[i][0] = elseIf.elseIf[i][0].trim();\r\n\t\t\t\t\t\telseIf.elseIf[i][1] = elseIf.elseIf[i][1].trim();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Push data\r\n\t\t\t\t\tpreParsedReference.push(elseIf);\r\n\t\t\t\t\treturn '{{%%=' + (preParsedReference.length - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar scopes = [check[0], _model_, _modelScope, _content_];\r\n\r\n\t\t\t\t// If condition was not meet\r\n\t\t\t\tif(!localEval.apply(self.root, scopes)){\r\n\t\t\t\t\tcheck.shift();\r\n\t\t\t\t\treturn elseIfHandle(findElse(check), scopes);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheck.shift();\r\n\t\t\t\tscopes[0] = check.join(':');\r\n\r\n\t\t\t\treturn localEval.apply(self.root, scopes);\r\n\t\t\t}\r\n\r\n\t\t\t// Warning! Avoid unencoded user inputted content\r\n\t\t\t// And always check/remove closing ']}' in user content\r\n\t\t\t// Any function call will be removed for addional security\r\n\t\t\tcheck = temp.split('@exec');\r\n\t\t\tif(check.length !== 1){\r\n\t\t\t\tvar scopes = [check[1], _model_, _modelScope, _content_];\r\n\r\n\t\t\t\tif(runEval === '#noEval'){\r\n\t\t\t\t\tpreParsedReference.push({type:REF_EXEC, data:scopes});\r\n\t\t\t\t\treturn '{{%%=' + (preParsedReference.length - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttemp = localEval.apply(self.root, scopes);\r\n\t\t\t\treturn temp;\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t});\r\n\r\n\t\tif(runEval === '#noEval'){\r\n\t\t\t// Clear memory before return\r\n\t\t\t_modelScope = runEval = scopeMask = itemMask = html = null;\r\n\t\t\tsetTimeout(function(){prepared = null}, 1);\r\n\t\t\treturn [prepared, preParsedReference, _content_];\r\n\t\t}\r\n\r\n\t\treturn prepared;\r\n\t}\r\n\r\n\tvar bindArray = function(template, list, mask, modelName, propertyName, targetNode, parentNode, tempDOM){\r\n\t\tvar editProperty = ['pop', 'push', 'splice', 'shift', 'unshift', 'swap', 'move', 'replace', 'softRefresh', 'hardRefresh'];\r\n\t\tvar refreshTimer = -1;\r\n\t\tvar parentChilds = parentNode.children;\r\n\t\tvar isKeyed = parentNode.classList.contains('sf-keyed-list');\r\n\r\n\t\t// Update callback\r\n\t\tvar modelRef = self.root[modelName];\r\n\t\tvar eventVar = 'on$'+propertyName;\r\n\t\tvar callback = modelRef[eventVar];\r\n\r\n\t\tvar processElement = function(index, options, other, count){\r\n\t\t\t// Find boundary for inserting to virtual DOM\r\n\t\t\tif(list.$virtual){\r\n\t\t\t\tvar vStartRange = list.$virtual.DOMCursor;\r\n\t\t\t\tvar vEndRange = vStartRange + list.$virtual.preparedLength;\r\n\t\t\t}\r\n\r\n\t\t\tif(options === 'clear'){\r\n\t\t\t\tif(list.$virtual)\r\n\t\t\t\t\tvar spacer = [parentNode.firstElementChild, parentNode.lastElementChild];\r\n\r\n\t\t\t\tparentNode.textContent = '';\r\n\r\n\t\t\t\tif(list.$virtual){\r\n\t\t\t\t\tparentNode.appendChild(spacer[0]);\r\n\t\t\t\t\tparentNode.appendChild(spacer[1]);\r\n\t\t\t\t\tlist.$virtual.dom.textContent = '';\r\n\t\t\t\t\tspacer[1].style.height = \r\n\t\t\t\t\tspacer[0].style.height = 0;\r\n\t\t\t\t\tlist.$virtual.reset(true);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Avoid multiple refresh by set a timer\r\n\t\t\tif(list.$virtual){\r\n\t\t\t\tvar exist = list.$virtual.elements();\r\n\r\n\t\t\t\tclearTimeout(refreshTimer);\r\n\t\t\t\trefreshTimer = setTimeout(function(){\r\n\t\t\t\t\tlist.$virtual.reinitScroll();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t\telse exist = parentChilds;\r\n\r\n\t\t\t// Hard refresh - Append element\r\n\t\t\tif(options === 'hardRefresh'){\r\n\t\t\t\t// Clear siblings after the index\r\n\t\t\t\tfor (var i = index; i < exist.length; i++) {\r\n\t\t\t\t\texist[i].remove();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(list.$virtual)\r\n\t\t\t\t\tvar vCursor = list.$virtual.vCursor;\r\n\r\n\t\t\t\tfor (var i = index; i < list.length; i++) {\r\n\t\t\t\t\tvar temp = templateParser(template, list[i]);\r\n\t\t\t\t\tif(list.$virtual){\r\n\t\t\t\t\t\tif(vCursor.floor === null && i < vEndRange)\r\n\t\t\t\t\t\t\tparentNode.insertBefore(temp, parentNode.lastElementChild);\r\n\t\t\t\t\t\telse list.$virtual.dom.appendChild(temp);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse parentNode.appendChild(temp);\r\n\r\n\t\t\t\t\tif(isKeyed === false)\r\n\t\t\t\t\t\tsyntheticCache(temp, template, list[i]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(list.$virtual && list.$virtual.refreshVirtualSpacer)\r\n\t\t\t\t\tlist.$virtual.refreshVirtualSpacer(list.$virtual.DOMCursor);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(callback === undefined)\r\n\t\t\t\tcallback = modelRef[eventVar];\r\n\r\n\t\t\tif(options === 'swap' || options === 'move'){\r\n\t\t\t\tif(options === 'move'){\r\n\t\t\t\t\tvar overflow = list.length - index - count;\r\n\t\t\t\t\tif(overflow < 0)\r\n\t\t\t\t\t\tcount += overflow;\r\n\r\n\t\t\t\t\t// Move to virtual DOM\r\n\t\t\t\t\tvar vDOM = document.createElement('div');\r\n\t\t\t\t\tfor (var i = 0; i < count; i++) {\r\n\t\t\t\t\t\tvDOM.appendChild(exist[index + i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar nextSibling = exist[other] || null;\r\n\t\t\t\t\tvar theParent = nextSibling && nextSibling.parentNode;\r\n\r\n\t\t\t\t\tif(theParent === false){\r\n\t\t\t\t\t\tif(list.$virtual && list.length >= vEndRange)\r\n\t\t\t\t\t\t\ttheParent = list.$virtual.dom;\r\n\t\t\t\t\t\telse theParent = parentNode;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Move to defined index\r\n\t\t\t\t\tfor (var i = 0; i < count; i++) {\r\n\t\t\t\t\t\ttheParent.insertBefore(vDOM.firstElementChild, nextSibling);\r\n\r\n\t\t\t\t\t\tif(callback !== undefined && callback.update)\r\n\t\t\t\t\t\t\tcallback.update(exist[index + i], 'move');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(index > other){\r\n\t\t\t\t\tvar index_a = exist[other];\r\n\t\t\t\t\tother = exist[index];\r\n\t\t\t\t\tindex = index_a;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tindex = exist[index];\r\n\t\t\t\t\tother = exist[other];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar other_sibling = other.nextSibling;\r\n\t\t\t\tvar other_parent = other.parentNode;\r\n\t            index.parentNode.insertBefore(other, index.nextSibling);\r\n\t            other_parent.insertBefore(index, other_sibling);\r\n\r\n\t\t\t\tif(callback !== undefined && callback.update){\r\n\t\t\t\t\tcallback.update(exist[other], 'swap');\r\n\t\t\t\t\tcallback.update(exist[index], 'swap');\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Clear unused element if current array < last array\r\n\t\t\tif(options === 'removeRange'){\r\n\t\t\t\tfor (var i = index; i < other; i++) {\r\n\t\t\t\t\texist[i].remove();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove\r\n\t\t\tif(options === 'remove'){\r\n\t\t\t\tif(exist[index]){\r\n\t\t\t\t\tvar currentRemoved = false;\r\n\t\t\t\t\tvar startRemove = function(){\r\n\t\t\t\t\t\tif(currentRemoved) return;\r\n\t\t\t\t\t\tcurrentRemoved = true;\r\n\r\n\t\t\t\t\t\texist[index].remove();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(callback !== undefined && callback.remove){\r\n\t\t\t\t\t\t// Auto remove if return false\r\n\t\t\t\t\t\tif(!callback.remove(exist[index], startRemove))\r\n\t\t\t\t\t\t\tstartRemove();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Auto remove if no callback\r\n\t\t\t\t\telse startRemove();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Update\r\n\t\t\telse if(options === 'update'){\r\n\t\t\t\tif(index === undefined){\r\n\t\t\t\t\tindex = 0;\r\n\t\t\t\t\tother = list.length;\r\n\t\t\t\t}\r\n\t\t\t\telse if(other === undefined) other = index + 1;\r\n\t\t\t\telse if(other < 0) other = list.length + other;\r\n\t\t\t\telse other += index;\r\n\r\n\t\t\t\t// Trim length\r\n\t\t\t\tvar overflow = list.length - other;\r\n\t\t\t\tif(overflow < 0) other = other + overflow;\r\n\r\n\t\t\t\tfor (var i = index; i < other; i++) {\r\n\t\t\t\t\tvar oldChild = exist[i];\r\n\t\t\t\t\tif(oldChild === undefined || list[i] === undefined)\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tvar temp = templateParser(template, list[i]);\r\n\t\t\t\t\tif(isKeyed === false)\r\n\t\t\t\t\t\tsyntheticCache(temp, template, list[i]);\r\n\r\n\t\t\t\t\tif(list.$virtual){\r\n\t\t\t\t\t\toldChild.parentNode.replaceChild(temp, oldChild);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tparentNode.replaceChild(temp, oldChild);\r\n\t\t\t\t\tif(callback !== undefined && callback.update)\r\n\t\t\t\t\t\tcallback.update(temp, 'replace');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = list[index];\r\n\t\t\tif(item === undefined) return;\r\n\r\n\t\t\tvar temp = templateParser(template, item);\r\n\t\t\tif(isKeyed === false)\r\n\t\t\t\tsyntheticCache(temp, template, item);\r\n\r\n\t\t\t// Create\r\n\t\t\tif(options === 'insertAfter'){\r\n\t\t\t\tif(exist.length === 0)\r\n\t\t\t\t\tparentNode.insertBefore(temp, parentNode.lastElementChild);\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar referenceNode = exist[index - 1];\r\n\t\t\t\t\treferenceNode.parentNode.insertBefore(temp, referenceNode.nextSibling);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(callback !== undefined && callback.create)\r\n\t\t\t\t\tcallback.create(temp);\r\n\t\t\t}\r\n\t\t\telse if(options === 'prepend'){\r\n\t\t\t\tvar referenceNode = exist[0];\r\n\t\t\t\tif(referenceNode !== undefined){\r\n\t\t\t\t\treferenceNode.parentNode.insertBefore(temp, referenceNode);\r\n\r\n\t\t\t\t\tif(callback !== undefined && callback.create)\r\n\t\t\t\t\t\tcallback.create(temp);\r\n\t\t\t\t}\r\n\t\t\t\telse options = 'append';\r\n\t\t\t}\r\n\t\t\tif(options === 'append'){\r\n\t\t\t\tif(list.$virtual){\r\n\t\t\t\t\tif(index === 0) // Add before virtual scroller\r\n\t\t\t\t\t\tparentNode.insertBefore(temp, parentNode.lastElementChild);\r\n\t\t\t\t\telse if(index >= vEndRange){ // To virtual DOM\r\n\t\t\t\t\t\tif(list.$virtual.vCursor.floor === null)\r\n\t\t\t\t\t\t\tlist.$virtual.vCursor.floor = temp;\r\n\r\n\t\t\t\t\t\tlist.$virtual.dom.appendChild(temp);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse // To real DOM\r\n\t\t\t\t\t\texist[index-1].insertAdjacentElement('afterEnd', temp);\r\n\r\n\t\t\t\t\tif(callback !== undefined && callback.create)\r\n\t\t\t\t\t\tcallback.create(temp);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparentNode.appendChild(temp);\r\n\t\t\t\tif(callback !== undefined && callback.create)\r\n\t\t\t\t\tcallback.create(temp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar _double_zero = [0,0]; // For arguments\r\n\t\tvar propertyProxy = function(subject, name){\r\n\t\t\tObject.defineProperty(subject, name, {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function(){\r\n\t\t\t\t\tvar temp = undefined;\r\n\t\t\t\t\tvar lastLength = this.length;\r\n\r\n\t\t\t\t\tif(name === 'move'){\r\n\t\t\t\t\t\tvar from = arguments[0];\r\n\t\t\t\t\t\tvar to = arguments[1];\r\n\t\t\t\t\t\tif(from === to) return;\r\n\t\t\t\t\t\tvar count = arguments[2] || 1;\r\n\t\t\t\t\t\tprocessElement(from, 'move', to, count);\r\n\r\n\t\t\t\t\t\tvar temp = Array.prototype.splice.apply(this, [from, count]);\r\n\t\t\t\t\t\ttemp.unshift(to, 0);\r\n\t\t\t\t\t\tArray.prototype.splice.apply(this, temp);\r\n\r\n\t\t\t\t\t\t// Reset virtual ceiling and floor\r\n\t\t\t\t\t\tif(list.$virtual)\r\n\t\t\t\t\t\t\tlist.$virtual.reinitCursor();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(name === 'swap'){\r\n\t\t\t\t\t\tvar i = arguments[0];\r\n\t\t\t\t\t\tvar o = arguments[1];\r\n\t\t\t\t\t\tif(i === o) return;\r\n\t\t\t\t\t\tprocessElement(i, 'swap', o);\r\n\t\t\t\t\t\tvar temp = this[i];\r\n\t\t\t\t\t\tthis[i] = this[o];\r\n\t\t\t\t\t\tthis[o] = temp;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if(name === 'replace'){\r\n\t\t\t\t\t\tif(list.$virtual)\r\n\t\t\t\t\t\t\tlist.$virtual.resetViewport();\r\n\r\n\t\t\t\t\t\t// Check if item has same reference\r\n\t\t\t\t\t\tif(arguments[0].length >= lastLength && lastLength !== 0){\r\n\t\t\t\t\t\t\tvar matchLeft = lastLength;\r\n\t\t\t\t\t\t\tvar ref = arguments[0];\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < lastLength; i++) {\r\n\t\t\t\t\t\t\t\tif(ref[i] === this[i]){\r\n\t\t\t\t\t\t\t\t\tmatchLeft--;\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Add new element at the end\r\n\t\t\t\t\t\t\tif(matchLeft === 0){\r\n\t\t\t\t\t\t\t\tif(ref.length === lastLength) return;\r\n\r\n\t\t\t\t\t\t\t\tvar temp = arguments[0].slice(lastLength);\r\n\t\t\t\t\t\t\t\ttemp.unshift(lastLength, 0);\r\n\t\t\t\t\t\t\t\tthis.splice.apply(this, temp);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Add new element at the middle\r\n\t\t\t\t\t\t\telse if(matchLeft !== lastLength){\r\n\t\t\t\t\t\t\t\tif(arguments[1] === true){\r\n\t\t\t\t\t\t\t\t\tvar temp = arguments[0].slice(i);\r\n\t\t\t\t\t\t\t\t\ttemp.unshift(i, lastLength - i);\r\n\t\t\t\t\t\t\t\t\tArray.prototype.splice.apply(this, temp);\r\n\r\n\t\t\t\t\t\t\t\t\tlist.refresh(i, lastLength);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Build from zero\r\n\t\t\t\t\t\tif(lastLength === 0){\r\n\t\t\t\t\t\t\tArray.prototype.push.apply(this, arguments[0]);\r\n\t\t\t\t\t\t\tprocessElement(0, 'hardRefresh');\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Clear all items and merge the new one\r\n\t\t\t\t\t\tvar temp = [0, lastLength];\r\n\t\t\t\t\t\tArray.prototype.push.apply(temp, arguments[0]);\r\n\t\t\t\t\t\tArray.prototype.splice.apply(this, temp);\r\n\r\n\t\t\t\t\t\t// Rebuild all element\r\n\t\t\t\t\t\tif(arguments[1] !== true || isKeyed){\r\n\t\t\t\t\t\t\tprocessElement(0, 'clear');\r\n\t\t\t\t\t\t\tprocessElement(0, 'hardRefresh');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Reuse some element\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t// Clear unused element if current array < last array\r\n\t\t\t\t\t\t\tif(this.length < lastLength)\r\n\t\t\t\t\t\t\t\tprocessElement(this.length, 'removeRange', lastLength);\r\n\r\n\t\t\t\t\t\t\t// And start refreshing\r\n\t\t\t\t\t\t\tlist.refresh(0, this.length);\r\n\r\n\t\t\t\t\t\t\tif(list.$virtual && list.$virtual.refreshVirtualSpacer)\r\n\t\t\t\t\t\t\t\tlist.$virtual.refreshVirtualSpacer(list.$virtual.DOMCursor);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Reset virtual list\r\n\t\t\t\t\t\tif(list.$virtual)\r\n\t\t\t\t\t\t\tlist.$virtual.reset();\r\n\r\n\t\t\t\t\t\treturn this;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if(name === 'splice' && arguments[0] === 0 && arguments[1] === undefined){\r\n\t\t\t\t\t\tprocessElement(0, 'clear');\r\n\t\t\t\t\t\treturn Array.prototype.splice.apply(this, arguments);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(Array.prototype[name])\r\n\t\t\t\t\t\ttemp = Array.prototype[name].apply(this, arguments);\r\n\r\n\t\t\t\t\tif(name === 'pop')\r\n\t\t\t\t\t\tprocessElement(this.length, 'remove');\r\n\r\n\t\t\t\t\telse if(name === 'push'){\r\n\t\t\t\t\t\tif(arguments.length === 1)\r\n\t\t\t\t\t\t\tprocessElement(lastLength, 'append');\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\t\t\t\t\t\t\tprocessElement(lastLength + i, 'append');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if(name === 'shift'){\r\n\t\t\t\t\t\tprocessElement(0, 'remove');\r\n\r\n\t\t\t\t\t\tif(list.$virtual && list.$virtual.DOMCursor > 0){\r\n\t\t\t\t\t\t\tlist.$virtual.DOMCursor--;\r\n\t\t\t\t\t\t\tlist.$virtual.reinitCursor();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if(name === 'splice'){\r\n\t\t\t\t\t\tif(arguments[0] === 0 && arguments[1] === undefined)\r\n\t\t\t\t\t\t\treturn temp;\r\n\r\n\t\t\t\t\t\t// Removing data\r\n\t\t\t\t\t\tvar real = arguments[0];\r\n\t\t\t\t\t\tif(real < 0) real = lastLength + real;\r\n\r\n\t\t\t\t\t\tvar limit = arguments[1];\r\n\t\t\t\t\t\tif(!limit && limit !== 0) limit = this.length;\r\n\r\n\t\t\t\t\t\tfor (var i = limit - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\tprocessElement(real + i, 'remove');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(list.$virtual && list.$virtual.DOMCursor >= real)\r\n\t\t\t\t\t\t\tlist.$virtual.DOMCursor = real - limit;\r\n\r\n\t\t\t\t\t\tif(arguments.length >= 3){ // Inserting data\r\n\t\t\t\t\t\t\tlimit = arguments.length - 2;\r\n\r\n\t\t\t\t\t\t\t// Trim the index if more than length\r\n\t\t\t\t\t\t\tif(real >= this.length)\r\n\t\t\t\t\t\t\t\treal = this.length - 1;\r\n\r\n\t\t\t\t\t\t\tfor (var i = 0; i < limit; i++) {\r\n\t\t\t\t\t\t\t\tprocessElement(real + i, 'insertAfter');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(list.$virtual && list.$virtual.DOMCursor >= real)\r\n\t\t\t\t\t\t\t\tlist.$virtual.DOMCursor += limit;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if(name === 'unshift'){\r\n\t\t\t\t\t\tif(arguments.length === 1)\r\n\t\t\t\t\t\t\tprocessElement(0, 'prepend');\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tfor (var i = arguments.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tprocessElement(i, 'prepend');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(list.$virtual && list.$virtual.DOMCursor !== 0){\r\n\t\t\t\t\t\t\tlist.$virtual.DOMCursor += arguments.length;\r\n\t\t\t\t\t\t\tlist.$virtual.reinitCursor();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if(name === 'softRefresh'){\r\n\t\t\t\t\t\tprocessElement(arguments[0], 'update', arguments[1]);\r\n\r\n\t\t\t\t\t\tif(list.$virtual && list.$virtual.DOMCursor)\r\n\t\t\t\t\t\t\tlist.$virtual.reinitCursor();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if(name === 'hardRefresh'){\r\n\t\t\t\t\t\tprocessElement(arguments[0] || 0, 'hardRefresh');\r\n\r\n\t\t\t\t\t\tif(list.$virtual)\r\n\t\t\t\t\t\t\tlist.$virtual.DOMCursor = arguments[0] || 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn temp;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(parentNode && parentNode.classList.contains('sf-virtual-list')){\r\n\t\t\tdelete list.$virtual;\r\n\t\t\tlist.$virtual = {};\r\n\r\n\t\t\t// Transfer virtual DOM\r\n\t\t\tlist.$virtual.dom = tempDOM;\r\n\t\t\tif(callback !== undefined)\r\n\t\t\t\tlist.$virtual.callback = callback;\r\n\t\t\telse list.$virtual.callback_ = {ref:modelRef, var:eventVar};\r\n\r\n\t\t\tparentNode.replaceChild(template.html, parentChilds[1]);\r\n\t\t\tsf.internal.virtual_scroll.handle(list, targetNode, parentNode);\r\n\t\t\ttemplate.html.remove();\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < editProperty.length; i++) {\r\n\t\t\tpropertyProxy(list, editProperty[i]);\r\n\t\t}\r\n\r\n\t\t// Todo: Enable auto item binding\r\n\t\tif(false && list.auto !== false){\r\n\t\t\t// for (var i = 0; i < list.length; i++) {\r\n\t\t\t// \tlist[i]\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\thiddenProperty(list, '$replace', function(index, key, needle, func){\r\n\t\t\tvar elRef = list.getElement(index).sf$elementReferences;\r\n\t\t\tvar process = template.modelReference[key];\r\n\t\t\tif(process === undefined){\r\n\t\t\t\tconsole.error(\"Can't found binding for '\"+key+\"'\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < elRef.length; i++) {\r\n\t\t\t\tif(elRef[i].textContent === undefined || elRef[i].ref.direct === undefined)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif(process.indexOf(elRef[i].ref.direct) !== -1){\r\n\t\t\t\t\tvar ref = elRef[i].textContent;\r\n\t\t\t\t\tvar content = $.escapeText(list[index][key]).replace(needle, func);\r\n\r\n\t\t\t\t\t// Skip if nothing was changed\r\n\t\t\t\t\tif(list[index][key] === content) continue;\r\n\t\t\t\t\tref.textContent = ''; // Let this empty for later referencing\r\n\t\t\t\t\tref.sf$haveChilds = true;\r\n\t\t\t\t\tcontent = $.parseElement(content, true);\r\n\r\n\t\t\t\t\t// Remove old element if exist\r\n\t\t\t\t\twhile(ref.previousSibling && ref.previousSibling.sf$childRoot === ref){\r\n\t\t\t\t\t\tref.previousSibling.remove();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar parentNode_ = ref.parentNode;\r\n\t\t\t\t\tfor (var i = 0; i < content.length; i++) {\r\n\t\t\t\t\t\tcontent[i].sf$childRoot = ref;\r\n\t\t\t\t\t\tparentNode_.insertBefore(content[i], ref);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thiddenProperty(list, 'refresh', function(index, length, property){\r\n\t\t\tif(index === undefined || index.constructor === String){\r\n\t\t\t\tproperty = index;\r\n\t\t\t\tindex = 0;\r\n\t\t\t\tlength = list.length;\r\n\t\t\t}\r\n\t\t\telse if(length === undefined) length = index + 1;\r\n\t\t\telse if(length.constructor === String){\r\n\t\t\t\tproperty = length;\r\n\t\t\t\tlength = index + 1;\r\n\t\t\t}\r\n\t\t\telse if(length < 0) length = list.length + length;\r\n\t\t\telse length += index;\r\n\r\n\t\t\t// Trim length\r\n\t\t\tvar overflow = list.length - length;\r\n\t\t\tif(overflow < 0) length = length + overflow;\r\n\r\n\t\t\tfor (var i = index; i < length; i++) {\r\n\t\t\t\tvar elem = list.getElement(i);\r\n\r\n\t\t\t\t// Create element if not exist\r\n\t\t\t\tif(elem === undefined){\r\n\t\t\t\t\tlist.hardRefresh(i);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tif(isKeyed === true)\r\n\t\t\t\t\t\tlist.softRefresh(i);\r\n\t\t\t\t\telse if(syntheticTemplate(elem, template, property, list[i]) === false)\r\n\t\t\t\t\t\tcontinue; // Continue if no update\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(callback !== undefined && callback.update)\r\n\t\t\t\t\tcallback.update(elem, 'replace');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar virtualChilds = null;\r\n\t\tif(list.$virtual)\r\n\t\t\tvirtualChilds = list.$virtual.dom.children;\r\n\t\thiddenProperty(list, 'getElement', function(index){\r\n\t\t\tif(virtualChilds !== null){\r\n\t\t\t\tvar ret = undefined;\r\n\t\t\t\tif(index < list.$virtual.DOMCursor)\r\n\t\t\t\t\treturn virtualChilds[index];\r\n\t\t\t\telse {\r\n\t\t\t\t\tindex -= list.$virtual.DOMCursor;\r\n\t\t\t\t\tvar childElement = parentNode.childElementCount - 2;\r\n\r\n\t\t\t\t\tif(index < childElement)\r\n\t\t\t\t\t\treturn parentChilds[index + 1];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn virtualChilds[index - childElement + list.$virtual.DOMCursor];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn parentChilds[index];\r\n\t\t});\r\n\t}\r\n\r\n\tvar loopParser = function(name, template, script, targetNode, parentNode){\r\n\t\tvar method = script.split(' in ');\r\n\t\tvar mask = method[0];\r\n\t\tvar isKeyed = parentNode.classList.contains('sf-keyed-list');\r\n\r\n\t\tvar items = root_(name)[method[1]];\r\n\t\tif(items === undefined)\r\n\t\t\titems = root_(name)[method[1]] = [];\r\n\r\n\t\ttemplate.setAttribute('sf-bind-list', method[1]);\r\n\r\n\t\t// Get reference for debugging\r\n\t\tprocessingElement = template;\r\n\t\ttemplate = self.extractPreprocess(template, mask, name);\r\n\r\n\t\tif(method.length === 2){\r\n\t\t\tvar tempDOM = document.createElement('div');\r\n\t\t\tvar modelRef = self.root[name];\r\n\r\n\t\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\t\tvar elem = templateParser(template, items[i]);\r\n\t\t\t\ttempDOM.appendChild(elem);\r\n\r\n\t\t\t\tif(isKeyed === false)\r\n\t\t\t\t\tsyntheticCache(elem, template, items[i]);\r\n\t\t\t}\r\n\r\n\t\t\t// Enable element binding\r\n\t\t\tif(modelRef.sf$bindedKey === undefined)\r\n\t\t\t\tinitBindingInformation(modelRef);\r\n\r\n\t\t\tif(modelRef.sf$bindedKey[method[1]] === undefined)\r\n\t\t\t\tmodelRef.sf$bindedKey[method[1]] = null;\r\n\r\n\t\t\tObject.defineProperty(modelRef, method[1], {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tget:function(){\r\n\t\t\t\t\treturn items;\r\n\t\t\t\t},\r\n\t\t\t\tset:function(val){\r\n\t\t\t\t\tif(val.length === 0)\r\n\t\t\t\t\t\treturn items.splice(0);\r\n\t\t\t\t\treturn items.replace(val, true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tbindArray(template, items, mask, name, method[1], targetNode, parentNode, tempDOM);\r\n\r\n\t\t\t// Output to real DOM if not being used for virtual list\r\n\t\t\tif(items.$virtual === undefined){\r\n\t\t\t\tvar children = tempDOM.children;\r\n\t\t\t\tfor (var i = 0, n = children.length; i < n; i++) {\r\n\t\t\t\t\tparentNode.appendChild(children[0]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttempDOM.remove();\r\n\t\t\t\ttempDOM = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar callInputListener = function(model, property, value){\r\n\t\tvar callback = model['on$'+property];\r\n\t\tvar v2m = model['v2m$'+property];\r\n\t\tvar newValue = undefined;\r\n\t\tif(callback !== undefined || v2m !== undefined){\r\n\t\t\tvar old = model[property];\r\n\t\t\tif(old !== null && old !== undefined && old.constructor === Array)\r\n\t\t\t\told = old.slice(0);\r\n\r\n\t\t\ttry{\r\n\t\t\t\tif(v2m !== undefined)\r\n\t\t\t\t\tnewValue = v2m(old, value);\r\n\r\n\t\t\t\tif(callback !== undefined)\r\n\t\t\t\t\tnewValue = callback(old, value);\r\n\t\t\t}catch(e){console.error(e)}\r\n\t\t}\r\n\t\treturn newValue;\r\n\t}\r\n\r\n\tvar inputBoundRunning = false;\r\n\tvar inputTextBound = function(e){\r\n\t\tif(e.fromSFFramework === true) return;\r\n\r\n\t\tinputBoundRunning = true;\r\n\t\tvar ref = e.target;\r\n\t\tref.viewInputted = true;\r\n\t\tvar value = ref.typeData === Number ? Number(ref.value) : ref.value;\r\n\t\tvar newValue = callInputListener(ref.sfModel, ref.sfBounded, value);\r\n\t\tif(newValue !== undefined)\r\n\t\t\tref.sfModel[ref.sfBounded] = newValue;\r\n\t\telse ref.sfModel[ref.sfBounded] = value;\r\n\t}\r\n\tvar inputFilesBound = function(e){\r\n\t\tif(e.fromSFFramework === true) return;\r\n\t\t\r\n\t\tvar ref = e.target;\r\n\t\tcallInputListener(ref.sfModel, ref.sfBounded, ref.files);\r\n\t\tref.sfModel[ref.sfBounded] = ref.files;\r\n\t}\r\n\r\n\tvar inputCheckBoxBound = function(e){\r\n\t\tif(e.fromSFFramework === true) return;\r\n\t\t\r\n\t\tinputBoundRunning = true;\r\n\t\tvar ref = e.target;\r\n\t\tref.viewInputted = true;\r\n\t\tvar value = ref.typeData === Number ? Number(ref.value) : ref.value;\r\n\t\tvar newValue = callInputListener(ref.sfModel, ref.sfBounded, value);\r\n\t\tif(newValue !== undefined)\r\n\t\t\tvalue = newValue;\r\n\r\n\t\tvar model = ref.sfModel;\r\n\t\tvar constructor = model[ref.sfBounded];\r\n\r\n\t\tif(constructor === Array){\r\n\t\t\tvar i = model[ref.sfBounded].indexOf(value);\r\n\r\n\t\t\tif(i === -1 && ref.checked === true)\r\n\t\t\t\tmodel[ref.sfBounded].push(value);\r\n\t\t\telse if(i !== -1 && ref.checked === false)\r\n\t\t\t\tmodel[ref.sfBounded].splice(i, 1);\r\n\t\t}\r\n\t\telse if(constructor === Boolean || ref.typeData === Boolean)\r\n\t\t\tmodel[ref.sfBounded] = ref.checked;\r\n\t\telse model[ref.sfBounded] = value;\r\n\t}\r\n\r\n\tvar inputSelectBound = function(e){\r\n\t\tif(e.fromSFFramework === true) return;\r\n\t\t\r\n\t\tinputBoundRunning = true;\r\n\t\tvar ref = e.target;\r\n\t\tref.viewInputted = true;\r\n\t\tvar typeData = ref.typeData;\r\n\t\tif(ref.multiple === true){\r\n\t\t\tvar temp = ref.selectedOptions;\r\n\t\t\tvar value = [];\r\n\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\tvalue.push(typeData === Number ? Number(temp[i].value) : temp[i].value);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse value = typeData === Number ? Number(ref.selectedOptions[0].value) : ref.selectedOptions[0].value;\r\n\r\n\t\tvar newValue = callInputListener(ref.sfModel, ref.sfBounded, value);\r\n\t\tif(newValue !== undefined)\r\n\t\t\tref.sfModel[ref.sfBounded] = newValue;\r\n\t\telse ref.sfModel[ref.sfBounded] = value;\r\n\t}\r\n\r\n\tvar assignElementData = {\r\n\t\tselect:function(model, property, element){\r\n\t\t\tvar list = element.options;\r\n\t\t\tvar typeData = element.typeData;\r\n\t\t\tvar arrayValue = model[property].constructor === Array ? model[property] : false;\r\n\t\t\tfor (var i = 0, n = list.length; i < n; i++) {\r\n\t\t\t\tif(arrayValue === false){\r\n\t\t\t\t\tif(typeData === String)\r\n\t\t\t\t\t\tlist[i].selected = list[i].value === model[property];\r\n\t\t\t\t\telse list[i].selected = list[i].value == model[property];\r\n\t\t\t\t}\r\n\t\t\t\telse list[i].selected = arrayValue.indexOf(typeData === Number ? Number(list[i].value) : list[i].value) !== -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckbox:function(model, property, element){\r\n\t\t\tif(model[property].constructor === Array)\r\n\t\t\t\telement.checked = model[property].indexOf(element.typeData === Number ? Number(element.value) : element.value) !== -1;\r\n\t\t\telse if(model[property].constructor === Boolean)\r\n\t\t\t\telement.checked = Boolean(model[property]);\r\n\t\t\telse{\r\n\t\t\t\tif(element.typeData === String)\r\n\t\t\t\t\telement.checked = element.value === model[property];\r\n\t\t\t\telse element.checked = element.value == model[property];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar inputBoundRun = function(model, property, elements){\r\n\t\tif(inputBoundRunning === true)\r\n\t\t\treturn; // Avoid multiple assigment\r\n\r\n\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\tvar ev = new Event('change');\r\n\t\t\tev.fromSFFramework = true;\r\n\r\n\t\t\tif(elements.type === 1) // text\r\n\t\t\t\telements[i].value = model[property];\r\n\t\t\telse if(elements.type === 2) // select options\r\n\t\t\t\tassignElementData.select(model, property, elements[i]);\r\n\t\t\telse if(elements.type === 3) // radio\r\n\t\t\t\telements[i].checked = model[property] == elements[i].value;\r\n\t\t\telse if(elements.type === 4) // checkbox\r\n\t\t\t\tassignElementData.checkbox(model, property, elements[i]);\r\n\r\n\t\t\telements[i].dispatchEvent(ev);\r\n\t\t}\r\n\t}\r\n\r\n\tvar triggerInputEvent = function(e){\r\n\t\tif(e.fromSFFramework === true) return;\r\n\t\tif(e.target.viewInputted === true){\r\n\t\t\te.target.viewInputted = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\te.target.dispatchEvent(new Event('input'));\r\n\t}\r\n\r\n\tvar elementBoundChanges = function(model, property, element, oneWay){\r\n\t\t// Enable multiple element binding\r\n\t\tif(model.sf$bindedKey === undefined)\r\n\t\t\tinitBindingInformation(model);\r\n\r\n\t\tvar type = 0;\r\n\t\tvar typeData = null;\r\n\t\tif(model[property] !== null && model[property] !== undefined)\r\n\t\t\ttypeData = model[property].constructor;\r\n\r\n\t\tvar assignedType = (element.getAttribute('typedata') || '').toLowerCase();\r\n\t\tif(assignedType === 'number')\r\n\t\t\ttypeData = Number;\r\n\r\n\t\telement.typeData = typeData;\r\n\t\t$.on(element, 'change', triggerInputEvent);\r\n\r\n\t\t// Bound value change\r\n\t\tif(element.tagName === 'TEXTAREA'){\r\n\t\t\t$.on(element, 'input', inputTextBound);\r\n\t\t\telement.value = model[property];\r\n\t\t\ttype = 1;\r\n\t\t}\r\n\r\n\t\telse if(element.selectedOptions !== undefined){\r\n\t\t\t$.on(element, 'input', inputSelectBound);\r\n\t\t\ttype = 2;\r\n\r\n\t\t\tassignElementData.select(model, property, element);\r\n\t\t}\r\n\r\n\t\telse{\r\n\t\t\tvar type = element.type.toLowerCase();\r\n\t\t\tif(type === 'radio'){\r\n\t\t\t\t$.on(element, 'input', inputTextBound);\r\n\t\t\t\ttype = 3;\r\n\r\n\t\t\t\telement.checked = model[property] == element.value;\r\n\t\t\t}\r\n\t\t\telse if(type === 'checkbox'){\r\n\t\t\t\t$.on(element, 'input', inputCheckBoxBound);\r\n\t\t\t\ttype = 4;\r\n\r\n\t\t\t\tassignElementData.checkbox(model, property, element);\r\n\t\t\t}\r\n\r\n\t\t\telse if(type === 'file'){\r\n\t\t\t\t$.on(element, 'input', inputFilesBound);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\telse{\r\n\t\t\t\t$.on(element, 'input', inputTextBound);\r\n\t\t\t\telement.value = model[property];\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(oneWay === true) return;\r\n\t\tmodelToViewBinding(model, property, inputBoundRun, element, type);\r\n\t}\r\n\r\n\tvar bindInput = function(targetNode){\r\n\t\tvar temp = $('input[sf-bound], textarea[sf-bound], select[sf-bound], input[sf-bind], textarea[sf-bind], select[sf-bind]', targetNode);\r\n\r\n\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\tvar element = temp[i];\r\n\t\t\tvar model = sf.controller.modelName(element);\r\n\t\t\tif(!model) return;\r\n\t\t\tvar modelScope = self.root[model];\r\n\r\n\t\t\tvar oneWay = false;\r\n\t\t\tvar propertyName = element.getAttribute('sf-bound');\r\n\t\t\tif(propertyName === null){\r\n\t\t\t\tpropertyName = element.getAttribute('sf-bind');\r\n\t\t\t\toneWay = true;\r\n\t\t\t}\r\n\t\t\tif(propertyName === \"\")\r\n\t\t\t\tpropertyName = element.getAttribute('name');\r\n\r\n\t\t\tif(propertyName === null){\r\n\t\t\t\tconsole.error(\"Property key to be bound wasn't be found\", element);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Get reference\r\n\t\t\tif(modelScope[propertyName] === undefined){\r\n\t\t\t\tconsole.error('Can\\'t get property \"'+propertyName+'\" on model \"' + model + '\"');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\telement.sfBounded = propertyName;\r\n\t\t\telement.sfModel = modelScope;\r\n\t\t\tif(oneWay === false){\r\n\t\t\t\telement.setAttribute('sf-bounded', '');\r\n\t\t\t\telement.removeAttribute('sf-bound');\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\telement.setAttribute('sf-binded', '');\r\n\t\t\t\telement.removeAttribute('sf-bind');\r\n\t\t\t}\r\n\r\n\t\t\telementBoundChanges(modelScope, propertyName, element, oneWay);\r\n\t\t}\r\n\t}\r\n\r\n\tvar alreadyInitialized = false;\r\n\tself.init = function(targetNode, queued){\r\n\t\tif(alreadyInitialized && !targetNode) return;\r\n\t\talreadyInitialized = true;\r\n\t\tsetTimeout(function(){\r\n\t\t\talreadyInitialized = false;\r\n\t\t}, 50);\r\n\r\n\t\tif(!targetNode) targetNode = document.body;\r\n\r\n\t\tself.parsePreprocess(queued || self.queuePreprocess(targetNode), queued);\r\n\t\tbindInput(targetNode);\r\n\r\n\t\t// Find element for array binding\r\n\t\tvar temp = $('[sf-repeat-this]', targetNode);\r\n\t\tfor (var a = 0; a < temp.length; a++) {\r\n\t\t\tvar element = temp[a];\r\n\t\t\tvar parent = element.parentElement;\r\n\r\n\t\t\tif(queued !== undefined)\r\n\t\t\t\telement.classList.remove('sf-dom-queued');\r\n\r\n\t\t\tif(parent.classList.contains('sf-virtual-list')){\r\n\t\t\t\tvar ceiling = document.createElement(element.tagName);\r\n\t\t\t\tceiling.classList.add('virtual-spacer');\r\n\t\t\t\tvar floor = ceiling.cloneNode(true);\r\n\r\n\t\t\t\tceiling.classList.add('ceiling');\r\n\t\t\t\tparent.insertBefore(ceiling, parent.firstElementChild); // prepend\r\n\r\n\t\t\t\tfloor.classList.add('floor');\r\n\t\t\t\tparent.appendChild(floor); // append\r\n\t\t\t}\r\n\r\n\t\t\tvar after = element.nextElementSibling;\r\n\t\t\tif(after === null || element === after)\r\n\t\t\t\tafter = false;\r\n\r\n\t\t\tvar before = element.previousElementSibling;\r\n\t\t\tif(before === null || element === before)\r\n\t\t\t\tbefore = false;\r\n\r\n\t\t\tvar script = element.getAttribute('sf-repeat-this');\r\n\t\t\telement.removeAttribute('sf-repeat-this');\r\n\r\n\t\t\t// Check if the element was already bound to prevent vulnerability\r\n\t\t\tif(/sf-bind-key|sf-bind-list/.test(element.outerHTML))\r\n\t\t\t\tthrow \"Can't parse element that already bound\";\r\n\r\n\t\t\tvar controller = sf.controller.modelName(element);\r\n\t\t\tloopParser(controller, element, script, targetNode, parent);\r\n\t\t\telement.remove();\r\n\t\t}\r\n\t}\r\n\r\n\t// Reset model properties\r\n\t// Don't call if the removed element is TEXT or #comment\r\n\tvar DOMNodeRemoved = scope.DOMNodeRemoved = function(element){\r\n\t\tif(element.hasAttribute('sf-controller') !== false){\r\n\t\t\tvar modelName = element.getAttribute('sf-controller');\r\n\r\n\t\t\tremoveModelBinding(modelName);\r\n\t\t\tif(element.sf$component !== undefined){\r\n\t\t\t\tvar modelFrom = element.sf$componentFrom;\r\n\t\t\t\tvar components = sf.component.available[modelFrom];\r\n\t\t\t\tcomponents.splice(components.indexOf(modelName), 1);\r\n\t\t\t\tinternal.component.triggerEvent(modelFrom, 'removed', self.root[modelName]);\r\n\t\t\t\tdelete self.root[modelName];\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar temp = $('[sf-controller]', element);\r\n\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\tvar modelName = temp[i].getAttribute('sf-controller');\r\n\r\n\t\t\tremoveModelBinding(modelName);\r\n\t\t\tif(element.sf$component !== undefined){\r\n\t\t\t\tmodelName = element.sf$componentFor;\r\n\t\t\t\tvar modelFrom = element.sf$componentFrom;\r\n\t\t\t\tvar components = sf.component.available[modelName];\r\n\t\t\t\tcomponents.splice(components.indexOf(modelName), 1);\r\n\t\t\t\tinternal.component.triggerEvent(modelFrom, 'removed', self.root[modelName]);\r\n\t\t\t\tdelete self.root[modelName];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsf(function(){\r\n\t\tvar everyRemovedNodes = function(nodes){\r\n\t\t\tif(nodes.nodeType !== 1 || nodes.firstElementChild === null)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(nodes.sf$elementReferences !== undefined) return;\r\n\t\t\tDOMNodeRemoved(nodes);\r\n\t\t}\r\n\r\n\t\tif(typeof MutationObserver === 'function' && MutationObserver.prototype.observe){\r\n\t\t\tvar everyRecords = function(record){\r\n\t\t\t\trecord.removedNodes.forEach(everyRemovedNodes);\r\n\t\t\t}\r\n\r\n\t\t\tvar observer = new MutationObserver(function(records){\r\n\t\t\t\tif(!bindingEnabled) return;\r\n\t\t\t\trecords.forEach(everyRecords);\r\n\t\t\t});\r\n\r\n\t\t\tobserver.observe(document.body, { childList: true, subtree: true });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdocument.body.addEventListener('DOMNodeRemoved', function(e){\r\n\t\t\t\tif(!bindingEnabled) return;\r\n\t\t\t\teveryRemovedNodes(e.target);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tvar removeModelBinding = self.reset = function(modelName){\r\n\t\tvar ref = self.root[modelName];\r\n\t\tif(ref === undefined)\r\n\t\t\treturn;\r\n\r\n\t\tvar bindedKey = ref.sf$bindedKey;\r\n\t\tvar temp = null;\r\n\t\tfor(var key in bindedKey){\r\n\t\t\tdelete bindedKey[key];\r\n\r\n\t\t\tif(ref[key] === undefined || ref[key] === null)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(ref[key].constructor === String ||\r\n\t\t\t\tref[key].constructor === Number ||\r\n\t\t\t\tref[key].constructor === Boolean\r\n\t\t\t){/* Ok */}\r\n\r\n\t\t\telse if(ref[key].constructor === Array){\r\n\t\t\t\tif(ref[key].$virtual){\r\n\t\t\t\t\tref[key].$virtual.destroy();\r\n\t\t\t\t\tdelete ref[key].$virtual;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Reset property without copying the array\r\n\t\t\t\ttemp = ref[key].splice('obtain');\r\n\t\t\t\tdelete ref[key];\r\n\t\t\t\tref[key] = temp;\r\n\t\t\t}\r\n\t\t\telse continue;\r\n\r\n\t\t\tif(Object.getOwnPropertyDescriptor(ref, key) === undefined)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t// Reconfigure / Remove property descriptor\r\n\t\t\tvar temp = ref[key];\r\n\t\t\tdelete ref[key];\r\n\t\t\tref[key] = temp;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction modelToViewBinding(model, propertyName, callback, elementBind, type){\r\n\t\t// Enable multiple element binding\r\n\t\tif(model.sf$bindedKey === undefined)\r\n\t\t\tinitBindingInformation(model);\r\n\r\n\t\tif(model.sf$bindedKey[propertyName] !== undefined){\r\n\t\t\tvar ref = model.sf$bindedKey[propertyName];\r\n\t\t\tif(ref.indexOf(callback) === -1)\r\n\t\t\t\tref.push(callback);\r\n\r\n\t\t\tif(elementBind !== undefined){\r\n\t\t\t\tif(ref.input === undefined){\r\n\t\t\t\t\tref.input = [elementBind];\r\n\t\t\t\t\tref.input.type = type;\r\n\t\t\t\t}\r\n\t\t\t\telse ref.input.push(elementBind);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tmodel.sf$bindedKey[propertyName] = [callback];\r\n\r\n\t\tif(elementBind !== undefined){\r\n\t\t\tvar ref = model.sf$bindedKey[propertyName];\r\n\t\t\tref.input = [elementBind];\r\n\t\t\tref.input.type = type;\r\n\t\t}\r\n\r\n\t\t// Proxy property\r\n\t\tif(Object.getOwnPropertyDescriptor(model, propertyName).set !== undefined)\r\n\t\t\treturn;\r\n\r\n\t\tvar objValue = model[propertyName]; // Object value\r\n\t\tObject.defineProperty(model, propertyName, {\r\n\t\t\tenumerable: true,\r\n\t\t\tconfigurable: true,\r\n\t\t\tget:function(getAssigner){\r\n\t\t\t\treturn objValue;\r\n\t\t\t},\r\n\t\t\tset:function(val){\r\n\t\t\t\tif(objValue !== val){\r\n\t\t\t\t\tvar callback = inputBoundRunning === false ? model['on$'+propertyName] : undefined;\r\n\t\t\t\t\tvar m2v = model['m2v$'+propertyName];\r\n\t\t\t\t\tvar out = model['out$'+propertyName];\r\n\t\t\t\t\tif(callback !== undefined || m2v !== undefined || out !== undefined){\r\n\t\t\t\t\t\tvar newValue = undefined;\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tif(m2v !== undefined)\r\n\t\t\t\t\t\t\t\tnewValue = m2v(objValue, val);\r\n\r\n\t\t\t\t\t\t\tif(out !== undefined && inputBoundRunning === false)\r\n\t\t\t\t\t\t\t\tnewValue = out(objValue, val);\r\n\r\n\t\t\t\t\t\t\tif(callback !== undefined)\r\n\t\t\t\t\t\t\t\tnewValue = callback(objValue, val);\r\n\t\t\t\t\t\t}catch(e){console.error(e)}\r\n\r\n\t\t\t\t\t\tif(newValue !== undefined)\r\n\t\t\t\t\t\t\tobjValue = newValue;\r\n\t\t\t\t\t\telse objValue = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse objValue = val;\r\n\r\n\t\t\t\t\tvar ref = model.sf$bindedKey[propertyName];\r\n\t\t\t\t\tfor (var i = 0; i < ref.length; i++) {\r\n\t\t\t\t\t\tif(inputBoundRun === ref[i]){\r\n\t\t\t\t\t\t\tif(inputBoundRunning !== true) // Avoid multiple assigment\r\n\t\t\t\t\t\t\t\tref[i](model, propertyName, ref.input);\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tref[i]();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinputBoundRunning = false;\r\n\t\t\t\treturn objValue;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tvar dcBracket = /{{[^#][\\s\\S]*?}}/;\r\n\tself.bindElement = function(element){\r\n\t\tvar modelName = sf.controller.modelName(element);\r\n\t\tvar model = self.root[modelName];\r\n\t\tif(!model) return console.error(\"Model for \"+modelName+\" was not found while binding:\", element);\r\n\r\n\t\tvar data = self.extractPreprocess(element, null, modelName);\r\n\t\ttemplateParser(data, model, true);\r\n\t\tdelete data.addresses;\r\n\t\telement.parentNode.replaceChild(data.html, element);\r\n\t\telement = data.html;\r\n\r\n\t\tvar onChanges = function(){\r\n\t\t\tif(syntheticTemplate(element, data, undefined, model) === false)\r\n\t\t\t\t0; //No update\r\n\t\t};\r\n\r\n\t\tvar properties = data.modelRef_array;\r\n\t\tfor (var i = 0; i < properties.length; i++) {\r\n\t\t\tvar propertyName = properties[i][0];\r\n\r\n\t\t\tif(model[propertyName] === undefined)\r\n\t\t\t\tmodel[propertyName] = '';\r\n\r\n\t\t\tmodelToViewBinding(model, propertyName, onChanges);\r\n\t\t}\r\n\t}\r\n\r\n\tself.extractPreprocess = function(targetNode, mask, name){\r\n\t\tvar copy = targetNode.outerHTML;\r\n\r\n\t\t// Mask the referenced item\r\n\t\tif(mask !== null)\r\n\t\t\tcopy = copy.split('#'+mask).join('_model_');\r\n\r\n\t\t// Extract data to be parsed\r\n\t\tcopy = uniqueDataParser(copy, null, mask, name, '#noEval');\r\n\t\tvar preParsed = copy[1];\r\n\t\tvar _content_ = copy[2];\r\n\t\tcopy = dataParser(copy[0], null, mask, name, '#noEval', preParsed);\r\n\r\n\t\tfunction findModelProperty(){\r\n\t\t\tif(mask === null){\r\n\t\t\t\t// Get model keys and sort by text length, make sure the longer one is from first index to avoid wrong match\r\n\t\t\t\tvar extract = RegExp('('+self.modelKeys(self.root[name]).sort(function(a, b){\r\n\t\t\t\t\treturn b.length - a.length\r\n\t\t\t\t}).join('|')+')', 'g');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tvar extract = RegExp('\\\\b(?:_model_|'+mask+')\\\\.([a-zA-Z0-9.[\\'\\\\]]+)(?:$|[^\\'\\\\]])', 'g');\r\n\t\t\tvar found = {};\r\n\r\n\t\t\tfor (var i = 0; i < preParsed.length; i++) {\r\n\t\t\t\tvar current = preParsed[i];\r\n\r\n\t\t\t\t// Text or attribute\r\n\t\t\t\tif(current.type === 0){\r\n\t\t\t\t\tcurrent.data[0].split('\"').join(\"'\").replace(extract, function(full, match){\r\n\t\t\t\t\t\tmatch = match.replace(/\\['(.*?)'\\]/g, function(full_, match_){\r\n\t\t\t\t\t\t\treturn '.'+match_;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(found[match] === undefined) found[match] = [i];\r\n\t\t\t\t\t\telse if(found[match].indexOf(i) === -1)\r\n\t\t\t\t\t\t\tfound[match].push(i);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Dynamic data\r\n\t\t\t\tif(current.type === 1){\r\n\t\t\t\t\tvar checkList = current.if.join(';');\r\n\r\n\t\t\t\t\tif(current.elseValue !== null)\r\n\t\t\t\t\t\tcheckList += ';' + current.elseValue;\r\n\r\n\t\t\t\t\tfor (var a = 0; a < current.elseIf.length; a++) {\r\n\t\t\t\t\t\tcheckList += current.elseIf[a].join(';');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(current.type === 2)\r\n\t\t\t\t\tvar checkList = current.data[0];\r\n\r\n\t\t\t\tcheckList = checkList.replace(/_result_ \\+= _content_\\.take\\(.*?, ([0-9]+)\\);/g, function(full, match){\r\n\t\t\t\t\treturn _content_[match];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcheckList.split('\"').join(\"'\").replace(extract, function(full, match){\r\n\t\t\t\t\tmatch = match.replace(/\\['(.*?)'\\]/g, function(full_, match_){\r\n\t\t\t\t\t\treturn '.'+match_;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(found[match] === undefined) found[match] = [i];\r\n\t\t\t\t\telse if(found[match].indexOf(i) === -1)\r\n\t\t\t\t\t\tfound[match].push(i);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn found;\r\n\t\t}\r\n\r\n\t\t// Build element and start addressing\r\n\t\tcopy = $.parseElement(copy)[0];\r\n\t\tvar nodes = self.queuePreprocess(copy, true).reverse();\r\n\t\tvar addressed = [];\r\n\r\n\t\tfunction addressAttributes(currentNode){\r\n\t\t\tvar attrs = currentNode.attributes;\r\n\t\t\tvar keys = [];\r\n\t\t\tvar indexes = 0;\r\n\t\t\tfor (var a = 0; a < attrs.length; a++) {\r\n\t\t\t\tvar found = attrs[a].value.split('{{%=');\r\n\t\t\t\tif(found.length !== 1){\r\n\t\t\t\t\tif(attrs[a].name[0] === ':'){\r\n\t\t\t\t\t\tvar key = {\r\n\t\t\t\t\t\t\tname:attrs[a].name.split(':').join(''),\r\n\t\t\t\t\t\t\tvalue:attrs[a].value\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tcurrentNode.removeAttribute(attrs[a].name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse var key = {\r\n\t\t\t\t\t\tname:attrs[a].name,\r\n\t\t\t\t\t\tvalue:attrs[a].value\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tindexes = [];\r\n\t\t\t\t\tfound = key.value.replace(/{{%=([0-9]+)/g, function(full, match){\r\n\t\t\t\t\t\tindexes.push(Number(match));\r\n\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(found === '' && indexes.length === 1)\r\n\t\t\t\t\t\tkey.direct = indexes[0];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tkey.parse_index = indexes;\r\n\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn keys;\r\n\t\t}\r\n\r\n\t\tvar currentElement = addressAttributes(copy);\r\n\t\tif(currentElement.length !== 0)\r\n\t\t\taddressed.push({\r\n\t\t\t\tnodeType:1,\r\n\t\t\t\taddress:[0],\r\n\t\t\t\tattributes:currentElement\r\n\t\t\t});\r\n\r\n\t\tfor (var i = 0; i < nodes.length; i++) {\r\n\t\t\tvar temp = {\r\n\t\t\t\tnodeType:nodes[i].nodeType\r\n\t\t\t};\r\n\r\n\t\t\tif(temp.nodeType === 1){ // Element\r\n\t\t\t\ttemp.attributes = addressAttributes(nodes[i]);\r\n\t\t\t\ttemp.address = $.getSelector(nodes[i], true);\r\n\t\t\t}\r\n\r\n\t\t\telse if(temp.nodeType === 3){ // Text node\r\n\t\t\t\tvar innerHTML = nodes[i].textContent;\r\n\t\t\t\tvar indexes = [];\r\n\r\n\t\t\t\tinnerHTML.replace(/{{%%=([0-9]+)/gm, function(full, match){\r\n\t\t\t\t\tindexes.push(Number(match));\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Check for dynamic mode\r\n\t\t\t\tif(indexes.length !== 0){\r\n\t\t\t\t\tinnerHTML = innerHTML.split(/{{%%=[0-9]+/gm);\r\n\t\t\t\t\tfor (var a = 0; a < innerHTML.length; a++) {\r\n\t\t\t\t\t\tinnerHTML[a] = trimIndentation(innerHTML[a]).trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnodes[i].textContent = innerHTML.shift();\r\n\r\n\t\t\t\t\tvar parent = nodes[i].parentNode;\r\n\t\t\t\t\tvar nextSibling = nodes[i].nextSibling;\r\n\r\n\t\t\t\t\t// Dynamic boundary start\r\n\t\t\t\t\tvar addressStart = null;\r\n\t\t\t\t\tif(indexes.length !== 0 && nodes[i].textContent.length !== 0)\r\n\t\t\t\t\t\taddressStart = $.getSelector(nodes[i], true);\r\n\t\t\t\t\telse if(nodes[i].previousSibling !== null)\r\n\t\t\t\t\t\taddressStart = $.getSelector(nodes[i].previousSibling, true);\r\n\r\n\t\t\t\t\t// Find boundary ends\r\n\t\t\t\t\tvar commentFlag = [];\r\n\t\t\t\t\tfor(var a = 0; a < indexes.length; a++){\r\n\t\t\t\t\t\tvar flag = document.createComment('');\r\n\t\t\t\t\t\tparent.insertBefore(flag, nextSibling);\r\n\t\t\t\t\t\tcommentFlag.push({\r\n\t\t\t\t\t\t\tnodeType:-1,\r\n\t\t\t\t\t\t\tparse_index:indexes[a],\r\n\t\t\t\t\t\t\tstartFlag:addressStart,\r\n\t\t\t\t\t\t\taddress:$.getSelector(flag, true)\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(innerHTML[a]){\r\n\t\t\t\t\t\t\tvar textNode = document.createTextNode(innerHTML[a]);\r\n\t\t\t\t\t\t\tparent.insertBefore(textNode, nextSibling);\r\n\r\n\t\t\t\t\t\t\t// Get new start flag\r\n\t\t\t\t\t\t\tif(a + 1 < indexes.length)\r\n\t\t\t\t\t\t\t\taddressStart = $.getSelector(textNode, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Merge boundary address\r\n\t\t\t\t\tArray.prototype.push.apply(addressed, commentFlag);\r\n\t\t\t\t\tif(nodes[i].textContent === ''){\r\n\t\t\t\t\t\tnodes[i].remove();\r\n\t\t\t\t\t\tfor (var a = 0; a < commentFlag.length; a++) {\r\n\t\t\t\t\t\t\tvar ref = commentFlag[a].address;\r\n\t\t\t\t\t\t\tref[ref.length - 1]--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(nodes[i].textContent.search(/{{%=[0-9]+/) === -1)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if it's only model value\r\n\t\t\t\tindexes = [];\r\n\t\t\t\tinnerHTML = nodes[i].textContent.replace(/{{%=([0-9]+)/gm, function(full, match){\r\n\t\t\t\t\tindexes.push(Number(match));\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(innerHTML === '' && indexes.length === 1)\r\n\t\t\t\t\ttemp.direct = indexes[0];\r\n\t\t\t\telse{\r\n\t\t\t\t\ttemp.value = nodes[i].textContent;\r\n\t\t\t\t\ttemp.parse_index = indexes;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttemp.address = $.getSelector(nodes[i], true);\r\n\t\t\t}\r\n\r\n\t\t\taddressed.push(temp);\r\n\t\t}\r\n\r\n\t\tvar modelReference = findModelProperty();\r\n\t\tvar keys = Object.keys(modelReference);\r\n\t\tvar asArray = [];\r\n\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\tasArray.push([keys[i], keys[i].split('.')]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\thtml:copy,\r\n\t\t\tparse:preParsed,\r\n\t\t\taddresses:addressed,\r\n\t\t\tmodelReference:modelReference,\r\n\t\t\tmodelRef_array:asArray\r\n\t\t};\r\n\t}\r\n\r\n\tvar enclosedHTMLParse = false;\r\n\tvar excludes = ['HTML','HEAD','STYLE','LINK','META','SCRIPT','OBJECT','IFRAME'];\r\n\tself.queuePreprocess = function(targetNode, extracting){\r\n\t\tvar childNodes = (targetNode || document.body).childNodes;\r\n\r\n\t\tvar temp = [];\r\n\t\tfor (var i = childNodes.length - 1; i >= 0; i--) {\r\n\t\t\tvar currentNode = childNodes[i];\r\n\r\n\t\t\tif(extracting === undefined && excludes.indexOf(currentNode.nodeName) !== -1)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(currentNode.nodeType === 1){ // Tag\r\n\t\t\t\tif(enclosedHTMLParse === true) continue;\r\n\t\t\t\tvar attrs = currentNode.attributes;\r\n\r\n\t\t\t\t// Skip element and it's childs that already bound to prevent vulnerability\r\n\t\t\t\tif(attrs['sf-bind-key'] || attrs['sf-repeat-this'] || attrs['sf-bind-list']) continue;\r\n\r\n\t\t\t\tfor (var a = 0; a < attrs.length; a++) {\r\n\t\t\t\t\tif(attrs[a].value.indexOf('{{') !== -1){\r\n\t\t\t\t\t\ttemp.push(currentNode);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tArray.prototype.push.apply(temp, self.queuePreprocess(currentNode, extracting));\r\n\t\t\t}\r\n\r\n\t\t\telse if(currentNode.nodeType === 3){ // Text\r\n\t\t\t\tif(currentNode.textContent.length === 0){\r\n\t\t\t\t\tcurrentNode.remove();\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// The scan is from bottom to first index\r\n\t\t\t\tvar enclosing = currentNode.textContent.indexOf('{[');\r\n\t\t\t\tif(enclosing !== -1)\r\n\t\t\t\t\tenclosedHTMLParse = false;\r\n\t\t\t\telse if(enclosedHTMLParse === true)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// Start enclosed if closing pattern was found\r\n\t\t\t\tvar enclosed = currentNode.textContent.indexOf(']}');\r\n\t\t\t\tif(enclosed !== -1 && (enclosing === -1 || enclosing > enclosed)){ // avoid {[ ... ]}\r\n\t\t\t\t\tenclosedHTMLParse = true; // when ]} ... \r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(currentNode.nodeValue.indexOf('{{') !== -1){\r\n\t\t\t\t\tif(extracting === undefined){\r\n\t\t\t\t\t\ttemp.push(currentNode.parentNode);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttemp.push(currentNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn temp;\r\n\t}\r\n\r\n\tself.parsePreprocess = function(nodes, queued){\r\n\t\tfor (var a = 0; a < nodes.length; a++) {\r\n\t\t\t// Get reference for debugging\r\n\t\t\tvar current = processingElement = nodes[a];\r\n\r\n\t\t\tvar modelElement = sf.controller.modelElement(current);\r\n\t\t\tif(modelElement === null)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar model = modelElement.getAttribute('sf-controller');\r\n\r\n\t\t\tif(queued !== undefined)\r\n\t\t\t\tcurrent.classList.remove('sf-dom-queued');\r\n\r\n\t\t\t// Check if it's component\r\n\t\t\tif(self.root[model] === undefined && sf.component.registered[model])\r\n\t\t\t\tmodel = sf.component.new(model, modelElement);\r\n\r\n\t\t\tvar modelRef = self.root[model] || root_(model);\r\n\r\n\t\t\t// Double check if the child element already bound to prevent vulnerability\r\n\t\t\tif(/sf-bind-key|sf-bind-list/.test(current.innerHTML)){\r\n\t\t\t\tconsole.error(\"Can't parse element that already bound\");\r\n\t\t\t\tconsole.log(processingElement.cloneNode(true));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(current.hasAttribute('sf-bind-ignore') === false)\r\n\t\t\t\tself.bindElement(current);\r\n\t\t\telse{\r\n\t\t\t\tvar temp = uniqueDataParser(current.innerHTML, modelRef, false, model);\r\n\t\t\t\tcurrent.innerHTML = dataParser(temp, modelRef, false, model);\r\n\t\t\t\tvar attrs = current.attributes;\r\n\t\t\t\tfor (var i = 0; i < attrs.length; i++) {\r\n\t\t\t\t\tif(attrs[i].value.indexOf('{{') !== -1){\r\n\t\t\t\t\t\tvar attr = attrs[i];\r\n\t\t\t\t\t\tattr.value = dataParser(attr.value, modelRef, false, model);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initBindingInformation(modelRef){\r\n\t\tif(modelRef.sf$bindedKey !== undefined)\r\n\t\t\treturn;\r\n\r\n\t\t// Element binding data\r\n\t\tObject.defineProperty(modelRef, 'sf$bindedKey', {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable:false,\r\n\t\t\twritable:true,\r\n\t\t\tvalue:{}\r\n\t\t});\r\n\t}\r\n})();","// DOM Controller on loaded app\r\nsf.controller = new function(){\r\n\tvar self = this;\r\n\tself.pending = {};\r\n\tself.active = {};\r\n\r\n\tself.for = function(name, func){\r\n\t\tif(sf.component.registered[name]){\r\n\t\t\tsf.component.registered[name][1] = func;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tself.pending[name] = func;\r\n\t}\r\n\r\n\tself.modelScope = function(element, func){\r\n\t\tvar model = sf.controller.modelName(element);\r\n\r\n\t\tif(!model)\r\n\t\t\tthrow 'model or controller was not found';\r\n\r\n\t\tvar bindedList = element.getAttribute('sf-bind-list');\r\n\t\tif(!bindedList){\r\n\t\t\tvar parentEl = $.parent(element, '[sf-bind-list]');\r\n\t\t\tif(parentEl !== null)\r\n\t\t\t\tbindedList = parentEl.getAttribute('sf-bind-list');\r\n\t\t}\r\n\t\telse var parentEl = element;\r\n\r\n\t\tif(!bindedList){\r\n\t\t\tif(func) return func(sf.model.root[model], -1);\r\n\t\t\telse return sf.model.root[model];\r\n\t\t}\r\n\r\n\t\t// Find index\r\n\t\tvar bindedListIndex = 0;\r\n\t\tif(bindedList)\r\n\t\t\tbindedListIndex = $.prevAll(parentEl, '[sf-bind-list]').length;\r\n\r\n\t\tif(func) return func(sf.model.root[model][bindedList], bindedListIndex);\r\n\t\telse return sf.model.root[model][bindedList][bindedListIndex];\r\n\t}\r\n\r\n\tself.modelElement = function(element){\r\n\t\tif(element.nodeType === 1 && element.hasAttribute('sf-controller'))\r\n\t\t\treturn element;\r\n\r\n\t\treturn $.parent(element, '[sf-controller]');\r\n\t}\r\n\r\n\tself.modelName = function(element){\r\n\t\tvar name = self.modelElement(element);\r\n\t\tif(name === null){\r\n\t\t\tconsole.error(\"Can't find any controller for\", element);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tname = name.getAttribute('sf-controller');\r\n\r\n\t\t// Initialize it first\r\n\t\tif(name !== undefined && !self.active[name])\r\n\t\t\tself.run(name);\r\n\r\n\t\treturn name;\r\n\t}\r\n\r\n\tvar listenSFClick = function(e){\r\n\t\tvar element = e.target;\r\n\t\tvar script = element.getAttribute('sf-click');\r\n\r\n\t\tif(!script){\r\n\t\t\telement = $.parent(element, '[sf-click]');\r\n\t\t\tscript = element.getAttribute('sf-click');\r\n\t\t}\r\n\r\n\t\tvar model = $.parent(element, '[sf-controller]').getAttribute('sf-controller');\r\n\r\n\t\tif(!sf.model.root[model])\r\n\t\t\tthrow \"Couldn't find model for \"+model+\" that was called from sf-click\";\r\n\r\n\t\tvar modelKeys = sf.model.modelKeys(sf.model.root[model]).join('|');\r\n\t\tscript = avoidQuotes(script, function(script_){\r\n\t\t\treturn script_.replace(RegExp(sf.regex.strictVar+'('+modelKeys+')\\\\b', 'g'), function(full, matched){\r\n\t\t\t\treturn '_modelScope.'+matched;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tscript = script.split('(');\r\n\r\n\t\tvar method = script[0];\r\n\t\tvar method_ = method;\r\n\r\n\t\t// Get method reference\r\n\t\ttry{\r\n\t\t\tmethod = eval(method);\r\n\t\t} catch(e) {\r\n\t\t\tmethod = false;\r\n\t\t}\r\n\r\n\t\tif(!method){\r\n\t\t\tconsole.error(\"Error on sf-click for model: \" + model + ' [Cannot call `'+method_+'`]\\n', element);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Take the argument list\r\n\t\tscript.shift();\r\n\t\tscript = script.join('(');\r\n\t\tscript = script.split(')');\r\n\t\tscript.pop();\r\n\t\tscript = script.join('(');\r\n\r\n\t\t// Turn argument as array\r\n\t\tif(script.length !== 0){\r\n\t\t\t// Replace `this` to `element`\r\n\t\t\tscript = eval(('['+script+']').replace(/,this|\\[this/g, function(found){\r\n\t\t\t\treturn found[0] + 'element';\r\n\t\t\t}));\r\n\t\t}\r\n\t\tif(!script)\r\n\t\t\tscript = [];\r\n\r\n\t\ttry{\r\n\t\t\tmethod.apply(element, script);\r\n\t\t\te.preventDefault();\r\n\t\t} catch(e) {\r\n\t\t\tconsole.error(\"Error on sf-click for model: \" + model + '\\n', element, '\\n', e);\r\n\t\t}\r\n\t}\r\n\r\n\tself.run = function(name, func){\r\n\t\tif(!sf.loader.DOMWasLoaded)\r\n\t\t\treturn sf(function(){\r\n\t\t\t\tself.run(name, func);\r\n\t\t\t});\r\n\r\n\t\tif(sf.component.registered[name])\r\n\t\t\treturn console.error(\"'\"+name+\"' is registered as a component\");\r\n\r\n\t\tif(self.pending[name]){\r\n\t\t\tif(!sf.model.root[name])\r\n\t\t\t\tsf.model.root[name] = {};\r\n\r\n\t\t\tself.pending[name](sf.model.root[name], root_);\r\n\t\t\tself.active[name] = true;\r\n\t\t\tdelete self.pending[name];\r\n\t\t}\r\n\r\n\t\tif(sf.model.root[name] === undefined)\r\n\t\t\tsf.model.root[name] = {};\r\n\r\n\t\tif(func)\r\n\t\t\tfunc(sf.model.root[name], root_);\r\n\t}\r\n\r\n\tself.init = function(parent){\r\n\t\tif(!sf.loader.DOMWasLoaded)\r\n\t\t\treturn sf(function(){\r\n\t\t\t\tself.init(name);\r\n\t\t\t});\r\n\r\n\t\tvar temp = $('[sf-controller]', parent || document.body);\r\n\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\tself.run(temp[i].getAttribute('sf-controller'));\r\n\t\t}\r\n\t}\r\n\r\n\t// Create listener for sf-click\r\n\tdocument.addEventListener('DOMContentLoaded', function(){\r\n\t\t$.on(document.body, 'click', '[sf-click]', listenSFClick);\r\n\t}, {capture:true, once:true});\r\n}\r\n\r\nvar root_ = function(scope){\r\n\tif(sf.component.registered[scope]){\r\n\t\tvar available = [];\r\n\t\tvar component = sf.component.available[scope];\r\n\t\tif(component !== undefined){\r\n\t\t\tfor (var i = 0; i < component.length; i++) {\r\n\t\t\t\tavailable.push(sf.model.root[component[i]]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn available;\r\n\t}\r\n\r\n\tif(!sf.model.root[scope])\r\n\t\tsf.model.root[scope] = {};\r\n\r\n\treturn sf.model.root[scope];\r\n}","/*\r\n  Special Thanks to Vladimir Kharlampidi\r\n  https://github.com/nolimits4web/\r\n*/\r\n\r\nvar globals = {};\r\nvar jsonpRequests = 0;\r\nfunction Request(requestOptions) {\r\n    var globalsNoCallbacks = Object.assign({}, globals);\r\n    ('beforeCreate beforeOpen beforeSend error complete success statusCode').split(' ').forEach(function (callbackName) {\r\n        delete globalsNoCallbacks[callbackName];\r\n    });\r\n    var defaults = Object.assign({\r\n        url: window.location.toString(),\r\n        method: 'GET',\r\n        data: false,\r\n        async: true,\r\n        cache: true,\r\n        user: '',\r\n        password: '',\r\n        headers: {},\r\n        xhrFields: {},\r\n        statusCode: {},\r\n        processData: true,\r\n        dataType: 'text',\r\n        contentType: 'application/x-www-form-urlencoded',\r\n        timeout: 0,\r\n    }, globalsNoCallbacks);\r\n    var options = Object.assign({}, defaults, requestOptions);\r\n    var proceedRequest;\r\n    // Function to run XHR callbacks and events\r\n    function fireCallback(callbackName) {\r\n        var data = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            data[_i - 1] = arguments[_i];\r\n        }\r\n        /*\r\n          Callbacks:\r\n          beforeCreate (options),\r\n          beforeOpen (xhr, options),\r\n          beforeSend (xhr, options),\r\n          error (xhr, status),\r\n          complete (xhr, stautus),\r\n          success (response, status, xhr),\r\n          statusCode ()\r\n        */\r\n        var globalCallbackValue;\r\n        var optionCallbackValue;\r\n        if (globals[callbackName]) {\r\n            globalCallbackValue = globals[callbackName].apply(globals, data);\r\n        }\r\n        if (options[callbackName]) {\r\n            optionCallbackValue = options[callbackName].apply(options, data);\r\n        }\r\n        if (typeof globalCallbackValue !== 'boolean')\r\n            globalCallbackValue = true;\r\n        if (typeof optionCallbackValue !== 'boolean')\r\n            optionCallbackValue = true;\r\n        return (globalCallbackValue && optionCallbackValue);\r\n    }\r\n    // Before create callback\r\n    proceedRequest = fireCallback('beforeCreate', options);\r\n    if (proceedRequest === false)\r\n        return undefined;\r\n    // For jQuery guys\r\n    if (options.type)\r\n        options.method = options.type;\r\n    // Parameters Prefix\r\n    var paramsPrefix = options.url.indexOf('?') >= 0 ? '&' : '?';\r\n    // UC method\r\n    var method = options.method.toUpperCase();\r\n    // Data to modify GET URL\r\n    if ((method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') && options.data) {\r\n        var stringData = void 0;\r\n        if (typeof options.data === 'string') {\r\n            // Should be key=value string\r\n            if (options.data.indexOf('?') >= 0)\r\n                stringData = options.data.split('?')[1];\r\n            else\r\n                stringData = options.data;\r\n        }\r\n        else {\r\n            // Should be key=value object\r\n            stringData = serializeQuery(options.data);\r\n        }\r\n        if (stringData.length) {\r\n            options.url += paramsPrefix + stringData;\r\n            if (paramsPrefix === '?')\r\n                paramsPrefix = '&';\r\n        }\r\n    }\r\n    // JSONP\r\n    if (options.dataType === 'json' && options.url.indexOf('callback=') >= 0) {\r\n        var callbackName_1 = \"jsonp_\" + (Date.now() + ((jsonpRequests += 1)));\r\n        var abortTimeout_1;\r\n        var callbackSplit = options.url.split('callback=');\r\n        var requestUrl = callbackSplit[0] + \"callback=\" + callbackName_1;\r\n        if (callbackSplit[1].indexOf('&') >= 0) {\r\n            var addVars = callbackSplit[1].split('&').filter(function (el) { return el.indexOf('=') > 0; }).join('&');\r\n            if (addVars.length > 0)\r\n                requestUrl += \"&\" + addVars;\r\n        }\r\n        // Create script\r\n        var script_1 = document.createElement('script');\r\n        script_1.type = 'text/javascript';\r\n        script_1.onerror = function onerror() {\r\n            clearTimeout(abortTimeout_1);\r\n            fireCallback('error', null, 'scripterror');\r\n            fireCallback('complete', null, 'scripterror');\r\n        };\r\n        script_1.src = requestUrl;\r\n        // Handler\r\n        window[callbackName_1] = function jsonpCallback(data) {\r\n            clearTimeout(abortTimeout_1);\r\n            fireCallback('success', data);\r\n            script_1.parentNode.removeChild(script_1);\r\n            script_1 = null;\r\n            delete window[callbackName_1];\r\n        };\r\n        document.querySelector('head').appendChild(script_1);\r\n        if (options.timeout > 0) {\r\n            abortTimeout_1 = setTimeout(function () {\r\n                script_1.parentNode.removeChild(script_1);\r\n                script_1 = null;\r\n                fireCallback('error', null, 'timeout');\r\n            }, options.timeout);\r\n        }\r\n        return undefined;\r\n    }\r\n    // Cache for GET/HEAD requests\r\n    if (method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') {\r\n        if (options.cache === false) {\r\n            options.url += paramsPrefix + \"_nocache\" + Date.now();\r\n        }\r\n    }\r\n    // Create XHR\r\n    var xhr = new XMLHttpRequest();\r\n    // Save Request URL\r\n    xhr.requestUrl = options.url;\r\n    xhr.requestParameters = options;\r\n    // Before open callback\r\n    proceedRequest = fireCallback('beforeOpen', xhr, options);\r\n    if (proceedRequest === false)\r\n        return xhr;\r\n    // Open XHR\r\n    xhr.open(method, options.url, options.async, options.user, options.password);\r\n    // Create POST Data\r\n    var postData = null;\r\n    if ((method === 'POST' || method === 'PUT' || method === 'PATCH') && options.data) {\r\n        if (options.processData) {\r\n            var postDataInstances = [ArrayBuffer, Blob, Document, FormData];\r\n            // Post Data\r\n            if (postDataInstances.indexOf(options.data.constructor) >= 0) {\r\n                postData = options.data;\r\n            }\r\n            else {\r\n                // POST Headers\r\n                var boundary = \"---------------------------\" + Date.now().toString(16);\r\n                if (options.contentType === 'multipart/form-data') {\r\n                    xhr.setRequestHeader('Content-Type', \"multipart/form-data; boundary=\" + boundary);\r\n                }\r\n                else {\r\n                    xhr.setRequestHeader('Content-Type', options.contentType);\r\n                }\r\n                postData = '';\r\n                var data = serializeQuery(options.data);\r\n                if (options.contentType === 'multipart/form-data') {\r\n                    data = data.split('&');\r\n                    var newData = [];\r\n                    for (var i = 0; i < data.length; i += 1) {\r\n                        newData.push(\"Content-Disposition: form-data; name=\\\"\" + data[i].split('=')[0] + \"\\\"\\r\\n\\r\\n\" + data[i].split('=')[1] + \"\\r\\n\");\r\n                    }\r\n                    postData = \"--\" + boundary + \"\\r\\n\" + newData.join(\"--\" + boundary + \"\\r\\n\") + \"--\" + boundary + \"--\\r\\n\";\r\n                }\r\n                else if (options.contentType === 'application/json') {\r\n                    postData = JSON.stringify(options.data);\r\n                }\r\n                else {\r\n                    postData = data;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            postData = options.data;\r\n            xhr.setRequestHeader('Content-Type', options.contentType);\r\n        }\r\n    }\r\n    // Additional headers\r\n    if (options.headers) {\r\n        Object.keys(options.headers).forEach(function (headerName) {\r\n            xhr.setRequestHeader(headerName, options.headers[headerName]);\r\n        });\r\n    }\r\n    // Check for crossDomain\r\n    if (typeof options.crossDomain === 'undefined') {\r\n        // eslint-disable-next-line\r\n        options.crossDomain = /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(options.url) && RegExp.$2 !== window.location.host;\r\n    }\r\n    if (!options.crossDomain) {\r\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n    }\r\n    if (options.xhrFields) {\r\n        Object.assign(xhr, options.xhrFields);\r\n    }\r\n    var xhrTimeout;\r\n    // Handle XHR\r\n    xhr.onload = function onload() {\r\n        if (xhrTimeout)\r\n            clearTimeout(xhrTimeout);\r\n        if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 0) {\r\n            var responseData = void 0;\r\n            if (options.dataType === 'json') {\r\n                var parseError = void 0;\r\n                try {\r\n                    responseData = JSON.parse(xhr.responseText);\r\n                }\r\n                catch (err) {\r\n                    parseError = true;\r\n                }\r\n                if (!parseError) {\r\n                    fireCallback('success', responseData, xhr.status, xhr);\r\n                }\r\n                else {\r\n                    fireCallback('error', xhr, 'parseerror');\r\n                }\r\n            }\r\n            else {\r\n                responseData = xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;\r\n                fireCallback('success', responseData, xhr.status, xhr);\r\n            }\r\n        }\r\n        else {\r\n            fireCallback('error', xhr, xhr.status);\r\n        }\r\n        if (options.statusCode) {\r\n            if (globals.statusCode && globals.statusCode[xhr.status])\r\n                globals.statusCode[xhr.status](xhr);\r\n            if (options.statusCode[xhr.status])\r\n                options.statusCode[xhr.status](xhr);\r\n        }\r\n        fireCallback('complete', xhr, xhr.status);\r\n    };\r\n    xhr.onerror = function onerror() {\r\n        if (xhrTimeout)\r\n            clearTimeout(xhrTimeout);\r\n        fireCallback('error', xhr, xhr.status);\r\n        fireCallback('complete', xhr, 'error');\r\n    };\r\n    // Timeout\r\n    if (options.timeout > 0) {\r\n        xhr.onabort = function onabort() {\r\n            if (xhrTimeout)\r\n                clearTimeout(xhrTimeout);\r\n        };\r\n        xhrTimeout = setTimeout(function () {\r\n            xhr.abort();\r\n            fireCallback('error', xhr, 'timeout');\r\n            fireCallback('complete', xhr, 'timeout');\r\n        }, options.timeout);\r\n    }\r\n    // Ajax start callback\r\n    proceedRequest = fireCallback('beforeSend', xhr, options);\r\n    if (proceedRequest === false)\r\n        return xhr;\r\n    // Send XHR\r\n    xhr.send(postData);\r\n    // Return XHR object\r\n    return xhr;\r\n}\r\nfunction RequestShortcut(method) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var _a = [], url = _a[0], data = _a[1], success = _a[2], error = _a[3], dataType = _a[4];\r\n    if (typeof args[1] === 'function') {\r\n        url = args[0], success = args[1], error = args[2], dataType = args[3];\r\n    }\r\n    else {\r\n        url = args[0], data = args[1], success = args[2], error = args[3], dataType = args[4];\r\n    }\r\n    [success, error].forEach(function (callback) {\r\n        if (typeof callback === 'string') {\r\n            dataType = callback;\r\n            if (callback === success)\r\n                success = undefined;\r\n            else\r\n                error = undefined;\r\n        }\r\n    });\r\n    dataType = dataType || (method === 'json' || method === 'postJSON' ? 'json' : undefined);\r\n    var requestOptions = {\r\n        url: url,\r\n        method: method === 'post' || method === 'postJSON' ? 'POST' : 'GET',\r\n        data: data,\r\n        success: success,\r\n        error: error,\r\n        dataType: dataType,\r\n    };\r\n    if (method === 'postJSON') {\r\n        Object.assign(requestOptions, {\r\n            contentType: 'application/json',\r\n            processData: false,\r\n            crossDomain: true,\r\n            data: typeof data === 'string' ? data : JSON.stringify(data),\r\n        });\r\n    }\r\n    return Request(requestOptions);\r\n}\r\nObject.assign(Request, {\r\n    get: function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return RequestShortcut.apply(void 0, ['get'].concat(args));\r\n    },\r\n    post: function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return RequestShortcut.apply(void 0, ['post'].concat(args));\r\n    },\r\n    json: function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return RequestShortcut.apply(void 0, ['json'].concat(args));\r\n    },\r\n    getJSON: function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return RequestShortcut.apply(void 0, ['json'].concat(args));\r\n    },\r\n    postJSON: function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return RequestShortcut.apply(void 0, ['postJSON'].concat(args));\r\n    },\r\n});\r\nRequest.setup = function setup(options) {\r\n    if (options.type && !options.method) {\r\n        Object.assign(options, { method: options.type });\r\n    }\r\n    Object.assign(globals, options);\r\n};\r\nfunction serializeQuery(params, prefix) {\r\n    var key = Object.keys(params);\r\n    for (var i = 0; i < key.length; i++) {\r\n      var value = params[key[i]];\r\n      if (params.constructor === Array)\r\n          key[i] += prefix + \"[]\";\r\n      else if (params.constructor === Object)\r\n          key[i] = (prefix ? prefix + \"[\" + key[i] + \"]\" : key[i]);\r\n\r\n      if (typeof value === 'object')\r\n          key[i] = serializeQuery(value, key[i]);\r\n      else\r\n          key[i] = key[i] + \"=\" + encodeURIComponent(value);\r\n    }\r\n    return key.join('&');\r\n}\r\n$.ajax = sf.ajax = Request;","return sf;\r\n\r\n// ===== Module End =====\r\n})));","sf.router = new function(){\r\n\tvar self = this;\r\n\tself.loading = false;\r\n\tself.enabled = false;\r\n\tself.pauseRenderOnTransition = false;\r\n\tself.currentPage = [];\r\n\tvar initialized = false;\r\n\tvar lazyRouting = false;\r\n\tvar currentRouterURL = '';\r\n\r\n\t// Should be called if not using lazy page load\r\n\tself.init = function(targetNode){\r\n\t\tif(!sf.loader.DOMWasLoaded)\r\n\t\t\treturn sf(function(){\r\n\t\t\t\tself.init();\r\n\t\t\t});\r\n\r\n\t\t// Run 'before' event for new page view\r\n\t\tvar temp = $('[sf-controller], [sf-page]', targetNode);\r\n\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\tif(temp[i].getAttribute('sf-controller'))\r\n\t\t\t\tsf.controller.run(temp[i].getAttribute('sf-controller'));\r\n\t\t\t\r\n\t\t\tif(temp[i].getAttribute('sf-page')){\r\n\t\t\t\tvar name = temp[i].getAttribute('sf-page');\r\n\t\t\t\tbeforeEvent(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinitialized = true;\r\n\t\tcurrentRouterURL = window.location.pathname;\r\n\t}\r\n\r\n\tfunction popstateListener(event) {\r\n\t\t// Don't continue if the last routing was error\r\n\t\tif(routingError){\r\n\t\t\troutingError = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\troutingBack = true;\r\n\t\tself.goto(window.location.pathname);\r\n\t}\r\n\r\n\tself.enable = function(status){\r\n\t\tif(status === undefined) status = true;\r\n\t\tif(self.enabled === status) return;\r\n\t\tself.enabled = status;\r\n\r\n\t\tif(status === true){\r\n\t\t\t// Create listener for link click\r\n\t\t\t$.on(document.body, 'click', 'a[href]', self.load);\r\n\r\n\t\t\t// Create listener when navigate backward\r\n\t\t\twindow.addEventListener('popstate', popstateListener, false);\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$.off(document.body, 'click', 'a[href]', self.load);\r\n\t\t\twindow.removeEventListener('popstate', popstateListener, false);\r\n\t\t}\r\n\t}\r\n\r\n\tvar before = {};\r\n\t// Set index with number if you want to replace old function\r\n\tself.before = function(name, func, index){\r\n\t\tif(!before[name])\r\n\t\t\tbefore[name] = [];\r\n\r\n\t\tif(index === undefined){\r\n\t\t\tif(before[name].indexOf(func) === -1)\r\n\t\t\t\tbefore[name].push(func);\r\n\t\t}\r\n\t\telse\r\n\t\t\tbefore[name][index] = func;\r\n\t}\r\n\r\n\tvar after = {};\r\n\t// Set index with number if you want to replace old function\r\n\tself.after = function(name, func, index){\r\n\t\tif(!after[name])\r\n\t\t\tafter[name] = [];\r\n\r\n\t\tif(index === undefined){\r\n\t\t\tif(after[name].indexOf(func) === -1)\r\n\t\t\t\tafter[name].push(func);\r\n\t\t}\r\n\t\telse\r\n\t\t\tafter[name][index] = func;\r\n\t}\r\n\r\n\t// Running 'before' new page going to be displayed\r\n\tvar beforeEvent = function(name){\r\n\t\tif(self.currentPage.indexOf(name) === -1)\r\n\t\t\tself.currentPage.push(name);\r\n\r\n\t\tif(before[name]){\r\n\t\t\tfor (var i = 0; i < before[name].length; i++) {\r\n\t\t\t\tbefore[name][i](sf.model);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Running 'after' old page going to be removed\r\n\tvar afterEvent = function(name){\r\n\t\tif(self.currentPage.indexOf(name) === -1)\r\n\t\t\tself.currentPage.splice(self.currentPage.indexOf(name), 1);\r\n\r\n\t\tif(after[name]){\r\n\t\t\tfor (var i = 0; i < after[name].length; i++) {\r\n\t\t\t\tafter[name][i](sf.model);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar onEvent = {\r\n\t\t'loading':[],\r\n\t\t'loaded':[],\r\n\t\t'special':[],\r\n\t\t'error':[]\r\n\t};\r\n\tself.on = function(event, func){\r\n\t\tif(onEvent[event].indexOf(func) === -1)\r\n\t\t\tonEvent[event].push(func);\r\n\t}\r\n\r\n\tself.lazyViewPoint = {};\r\n\t/*\r\n\t\t{\r\n\t\t\toldURlPattern:{\r\n\t\t\t\tnewURLPattern:'.viewPoint'\r\n\t\t\t}\r\n\t\t}\r\n\t*/\r\n\r\n\tself.load = function(ev){\r\n\t\tif(self.enabled !== true) return;\r\n\r\n\t\tvar elem = ev.target;\r\n\t\tif(!elem.href) return;\r\n\r\n\t\tif(!history.pushState || elem.hasAttribute('sf-router-ignore'))\r\n\t\t\treturn;\r\n\r\n\t\t// Make sure it's from current origin\r\n\t\tvar path = elem.href.replace(window.location.origin, '');\r\n\t\tif(path.indexOf('//') !== -1)\r\n\t\t\treturn;\r\n\r\n\t\tev.preventDefault()\r\n\t\treturn !self.goto(path);\r\n\t}\r\n\r\n\tvar RouterLoading = false;\r\n\tvar routingBack = false;\r\n\tvar routingError = false;\r\n\tself.goto = function(path, data, method){\r\n\t\tif(!method) method = 'GET';\r\n        else method = method.toUpperCase();\r\n\r\n\t\tif(!data) data = {};\r\n\r\n\t\tfor (var i = 0; i < onEvent['loading'].length; i++) {\r\n\t\t\tif(onEvent['loading'][i](path)) return;\r\n\t\t}\r\n\t\tvar oldPath = window.location.pathname;\r\n\t\tinitialized = false;\r\n\r\n\t\tif(RouterLoading) RouterLoading.abort();\r\n\t\tRouterLoading = $.ajax({\r\n\t\t\turl:window.location.origin + path,\r\n\t\t\tmethod:method,\r\n            data:Object.assign(data, {\r\n                _scarlets:'.dynamic.'\r\n            }),\r\n\t\t\tsuccess:function(data){\r\n\t\t\t\tif(initialized) return;\r\n\t\t\t\tlazyRouting = true;\r\n\r\n\t\t\t\t// Run 'loaded' event\r\n\t\t\t\tRouterLoading = false;\r\n\r\n\t\t\t\t// Find special data\r\n\t\t\t\tvar regex = RegExp('<!-- SF-Special:(.*?)-->', 'gm');\r\n\t\t\t\tvar special = regex.exec(data);\r\n\t\t\t\tif(special && special.length !== 1){\r\n\t\t\t\t\tspecial = special[1].split('--|&>').join('-->');\r\n\t\t\t\t\tspecial = JSON.parse(special);\r\n\r\n\t\t\t\t\tif(!isEmptyObject(special)){\r\n\t\t\t\t\t\tfor (var i = 0; i < onEvent['special'].length; i++) {\r\n\t\t\t\t\t\t\tif(onEvent['special'][i](special)) return;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar DOMReference = false;\r\n\t\t\t\tvar foundAction = function(ref){\r\n\t\t\t\t\tDOMReference = $.findOne(ref);\r\n\r\n\t\t\t\t\t// Run 'after' event for old page view\r\n\t\t\t\t\tvar last = $.findOne('[sf-page]', DOMReference);\r\n\t\t\t\t\tafterEvent(last ? last.getAttribute('sf-page') : '/');\r\n\r\n\t\t\t\t\t// Redefine title if exist\r\n\t\t\t\t\tif(special && special.title)\r\n\t\t\t\t\t\t$('head > title').innerHTML = special.title;\r\n\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar found = false;\r\n\t\t\t\tfor(var oldURL in self.lazyViewPoint){\r\n\t\t\t\t\tif(currentRouterURL.indexOf(oldURL) !== -1){\r\n\t\t\t\t\t\tfor(var newURL in self.lazyViewPoint[oldURL]){\r\n\t\t\t\t\t\t\tif(currentRouterURL.indexOf(oldURL) !== -1){\r\n\t\t\t\t\t\t\t\tfoundAction(self.lazyViewPoint[oldURL][newURL]);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(found) break;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// When the view point was not found\r\n\t\t\t\tif(!found){\r\n\t\t\t\t\t// Use fallback if exist\r\n\t\t\t\t\tif(sf.router.lazyViewPoint[\"@default\"])\r\n\t\t\t\t\t\tfoundAction(sf.router.lazyViewPoint[\"@default\"]);\r\n\r\n\t\t\t\t\tif(!found){\r\n\t\t\t\t\t\tfor (var i = 0; i < onEvent['error'].length; i++) {\r\n\t\t\t\t\t\t\tonEvent['error'][i]('sf.router.lazyViewPoint[\"'+oldURL+'\"][\"'+newURL+'\"] was not found');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Run 'before' event for new page view\r\n\t\t\t\tif(!DOMReference) DOMReference = document.body;\r\n\t\t\t\tif(self.pauseRenderOnTransition)\r\n\t\t\t\t\tself.pauseRenderOnTransition.css('display', 'none');\r\n\r\n\t\t\t\t// Let page script running first, then update the data binding\r\n\t\t\t\tDOMReference.innerHTML = data;\r\n\r\n\t\t\t\t// Parse the DOM data binding\r\n\t\t\t\tsf.model.init(DOMReference);\r\n\r\n\t\t\t\t// Init template to model binding\r\n\t\t\t\tvar temp = $('[sf-page]', DOMReference);\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tbeforeEvent(temp[i].getAttribute('sf-page'));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(self.pauseRenderOnTransition)\r\n\t\t\t\t\tself.pauseRenderOnTransition.css('display', '');\r\n\r\n\t\t\t\trouterLoaded(currentRouterURL, path, DOMReference);\r\n\r\n\t\t\t\tinitialized = true;\r\n\t\t\t\tlazyRouting = false;\r\n\r\n\t\t\t\tcurrentRouterURL = path;\r\n\t\t\t\troutingError = false;\r\n\t\t\t},\r\n\t\t\terror:function(xhr, data){\r\n\t\t\t\troutingError = true;\r\n\t\t\t\tif(xhr.aborted) return;\r\n\r\n\t\t\t\tRouterLoading = false;\r\n\t\t\t\tfor (var i = 0; i < onEvent['error'].length; i++) {\r\n\t\t\t\t\tonEvent['error'][i](xhr.status, data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Back on error\r\n\t\t\t\twindow.history.back();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!routingBack)\r\n\t\t\twindow.history.pushState(null, \"\", path);\r\n\r\n\t\troutingBack = false;\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Trigger loaded event\r\n\tfunction routerLoaded(currentRouterURL, path, data){\r\n\t\tfor (var i = 0; i < onEvent['loaded'].length; i++) {\r\n\t\t\tonEvent['loaded'][i](currentRouterURL, path, data);\r\n\t\t}\r\n\t}\r\n};","sf.internal.virtual_scroll = new function(){\r\n\tvar self = this;\r\n\tvar styleInitialized = false;\r\n\tvar scrollingByScript = false;\r\n\r\n\t// before and after\r\n\tself.prepareCount = 4; // 4, 8, 12, 16, ...\r\n\r\n\tself.handle = function(list, targetNode, parentNode){\r\n\t\tif(!styleInitialized){\r\n\t\t\tinitStyles();\r\n\t\t\tstyleInitialized = true;\r\n\t\t}\r\n\r\n\t\tvar dynamicList = false;\r\n\t\tvar virtual = list.$virtual;\r\n\t\tvirtual.reset = function(reinitOnly){\r\n\t\t\tvirtual.DOMCursor = 0; // cursor of first element in DOM tree as a cursor\r\n\r\n\t\t\tvirtual.bounding.ceiling = -1;\r\n\t\t\tvirtual.bounding.floor = 0;\r\n\r\n\t\t\tvirtual.vCursor.ceiling = null; // for forward direction\r\n\t\t\tvirtual.vCursor.floor = virtual.dom.firstElementChild; // for backward direction\r\n\r\n\t\t\tvirtual.bounding.initial = virtual.dCursor.ceiling.offsetTop;\r\n\t\t\trefreshScrollBounding(0, virtual.bounding, list, parentNode);\r\n\t\t}\r\n\r\n\t\tvirtual.reinitCursor = function(){\r\n\t\t\tvirtual.vCursor.ceiling = virtual.dom.children[virtual.DOMCursor - 1] || null;\r\n\t\t\tvirtual.vCursor.floor = virtual.dom.children[virtual.DOMCursor] || null;\r\n\t\t}\r\n\r\n\t\tvirtual.reinitScroll = function(){\r\n\t\t\trefreshScrollBounding(virtual.DOMCursor, virtual.bounding, list, parentNode);\r\n\t\t}\r\n\r\n\t\tvirtual.elements = function(){\r\n\t\t\treturn obtainElements(list, parentNode);\r\n\t\t}\r\n\r\n\t\tvirtual.dCursor = { // DOM Cursor\r\n\t\t\tceiling:parentNode.querySelector('.virtual-spacer.ceiling'),\r\n\t\t\tfloor:parentNode.querySelector('.virtual-spacer.floor')\r\n\t\t};\r\n\r\n\t\tvirtual.bounding = {};\r\n\t\tvirtual.vCursor = {};\r\n\r\n\t\tvirtual.reset();\r\n\t\tvirtual.targetNode = parentNode;\r\n\t\tvirtual.scrollHeight = virtual.dCursor.floor.offsetTop - virtual.bounding.initial;\r\n\r\n\t\tvar scroller = parentNode;\r\n\t\tvirtual.destroy = function(){\r\n\t\t\t$.off(scroller, 'scroll');\r\n\t\t\t$.off(parentNode, 'mousedown mouseup');\r\n\t\t\tvirtual.dom.innerHTML = '';\r\n\t\t\toffElementResize(parentNode);\r\n\r\n\t\t\tdelete list.$virtual;\r\n\t\t}\r\n\r\n\t\tvirtual.resetViewport = function(){\r\n\t\t\tvirtual.visibleLength = Math.floor(scroller.clientHeight / virtual.scrollHeight);\r\n\t\t\tvirtual.preparedLength = virtual.visibleLength + self.prepareCount * 2;\r\n\r\n\t\t\tif(virtual.preparedLength < 18)\r\n\t\t\t\tvirtual.preparedLength = 18;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tscroller = parentNode;\r\n\r\n\t\t\tvar length = parentNode.getAttribute('scroll-parent-index') || 0;\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\tscroller = scroller.parentElement;\r\n\t\t\t}\r\n\r\n\t\t\tvirtual.resetViewport();\r\n\r\n\t\t\tif(parentNode.classList.contains('sf-list-dynamic')){\r\n\t\t\t\tdynamicList = true;\r\n\t\t\t\tdynamicHeight(list, targetNode, parentNode, scroller);\r\n\t\t\t}\r\n\t\t\telse staticHeight(list, targetNode, parentNode, scroller);\r\n\t\t}, 500);\r\n\t}\r\n\r\n\t// Recommended for a list that have different element height\r\n\tfunction dynamicHeight(list, targetNode, parentNode, scroller){\r\n\t\tvar virtual = list.$virtual;\r\n\t\tvar ceiling = virtual.dCursor.ceiling;\r\n\t\tvar floor = virtual.dCursor.floor;\r\n\t\tvar vCursor = virtual.vCursor;\r\n\t\tvCursor.floor = virtual.dom.firstElementChild;\r\n\t\t\r\n\t\tvirtual.scrollTo = function(index){\r\n\t\t\tscrollTo(index, list, self.prepareCount, parentNode, scroller);\r\n\r\n\t\t\t// Reset virtual spacer height\r\n\t\t\tceilingHeight = 0;\r\n\t\t\tfloorHeight = 0;\r\n\t\t\tceiling.style.height = ceilingHeight+'px';\r\n\t\t\tfloor.style.height = floorHeight+'px';\r\n\t\t}\r\n\r\n\t\tvirtual.refresh = function(force){\r\n\t\t\trefresh(force, list, self.prepareCount, parentNode, scroller);\r\n\t\t\tfillViewport();\r\n\t\t}\r\n\r\n\t\t// Insert some element until reach visible height\r\n\t\tfillViewport();\r\n\r\n\t\tvirtual.visibleLength = parentNode.childElementCount - 2;\r\n\t\tvirtual.preparedLength = virtual.visibleLength + self.prepareCount * 2;\r\n\r\n\t\tfor (var i = 0; i < self.prepareCount; i++) {\r\n\t\t\tvar temp = vCursor.floor;\r\n\t\t\tif(temp === null) break;\r\n\r\n\t\t\tvCursor.floor = temp.nextElementSibling;\r\n\t\t\tfloor.insertAdjacentElement('beforeBegin', temp);\r\n\t\t}\r\n\t\tvirtual.DOMCursor = 0;\r\n\r\n\t\tvar ceilingHeight = 0;\r\n\t\tvar floorHeight = 0;\r\n\t\tfunction previousCeiling(){\r\n\t\t\tvar temp = null;\r\n\t\t\tvar resetCeiling = false;\r\n\r\n\t\t\t// Add some element on the ceiling\r\n\t\t\tfor (var i = 0; i < self.prepareCount; i++) {\r\n\t\t\t\tif(vCursor.floor === null)\r\n\t\t\t\t\ttemp = virtual.dom.lastElementChild;\r\n\t\t\t\telse\r\n\t\t\t\t\ttemp = vCursor.floor.previousElementSibling;\r\n\r\n\t\t\t\tif(temp === null) break;\r\n\t\t\t\tvCursor.ceiling = temp.previousElementSibling;\r\n\t\t\t\tvirtual.DOMCursor--;\r\n\r\n\t\t\t\tceiling.insertAdjacentElement('afterEnd', temp);\r\n\r\n\t\t\t\tif(ceilingHeight > 0)\r\n\t\t\t\t\tceilingHeight -= getAbsoluteHeight(temp);\r\n\r\n\t\t\t\tif(virtual.DOMCursor < self.prepareCount && !resetCeiling){\r\n\t\t\t\t\ti = 0;\r\n\t\t\t\t\tresetCeiling = true;\r\n\t\t\t\t\ttemp = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(ceilingHeight < 0 || temp === null)\r\n\t\t\t\tceilingHeight = 0;\r\n\r\n\t\t\tvar length = parentNode.childElementCount - 2 - list.$virtual.preparedLength;\r\n\t\t\t// Remove some element on the floor\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\ttemp = floor.previousElementSibling;\r\n\t\t\t\tfloorHeight += getAbsoluteHeight(temp);\r\n\r\n\t\t\t\tif(vCursor.floor === null)\r\n\t\t\t\t\tvirtual.dom.insertAdjacentElement('beforeEnd', temp);\r\n\t\t\t\telse vCursor.floor.insertAdjacentElement('beforeBegin', temp);\r\n\r\n\t\t\t\tvCursor.floor = temp;\r\n\t\t\t}\r\n\r\n\t\t\tif(vCursor.floor === null)\r\n\t\t\t\tvCursor.ceiling = virtual.dom.lastElementChild;\r\n\t\t\telse \r\n\t\t\t\tvCursor.ceiling = vCursor.floor.previousElementSibling;\r\n\r\n\t\t\tceiling.style.height = ceilingHeight+'px';\r\n\t\t\tfloor.style.height = floorHeight+'px';\r\n\t\t}\r\n\r\n\t\tfunction fillViewport(){\r\n\t\t\t// Insert some element depend on prepared length\r\n\t\t\tvar length = virtual.preparedLength - (parentNode.childElementCount - 2);\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\tif(vCursor.ceiling === null)\r\n\t\t\t\t\ttemp = virtual.dom.firstElementChild;\r\n\t\t\t\telse\r\n\t\t\t\t\ttemp = vCursor.ceiling.nextElementSibling;\r\n\r\n\t\t\t\tif(temp === null) break;\r\n\t\t\t\tvCursor.floor = temp.nextElementSibling;\r\n\r\n\t\t\t\tfloor.insertAdjacentElement('beforeBegin', temp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction nextFloor(){\r\n\t\t\tvar temp = null;\r\n\t\t\tfillViewport();\r\n\r\n\t\t\tif(vCursor.floor !== null){\r\n\t\t\t\tif(vCursor.ceiling === null)\r\n\t\t\t\t\tvCursor.ceiling = vCursor.floor.previousElementSibling;\r\n\r\n\t\t\t\t// Add extra element based on prepare count\r\n\t\t\t\tfor (var i = 0; i < self.prepareCount; i++) {\r\n\t\t\t\t\ttemp = vCursor.floor;\r\n\t\t\t\t\tif(temp === null) break;\r\n\r\n\t\t\t\t\tvCursor.floor = temp.nextElementSibling;\r\n\t\t\t\t\tfloor.insertAdjacentElement('beforeBegin', temp);\r\n\r\n\t\t\t\t\tif(floorHeight > 0)\r\n\t\t\t\t\t\tfloorHeight -= getAbsoluteHeight(temp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(floorHeight < 0 || temp === null)\r\n\t\t\t\tfloorHeight = 0;\r\n\r\n\t\t\t// Remove some element on the ceiling\r\n\t\t\tvar length = parentNode.childElementCount - 2 - list.$virtual.preparedLength;\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\ttemp = ceiling.nextElementSibling;\r\n\t\t\t\tceilingHeight += getAbsoluteHeight(temp);\r\n\t\t\t\tvirtual.DOMCursor++;\r\n\r\n\t\t\t\tif(vCursor.ceiling === null)\r\n\t\t\t\t\tvirtual.dom.insertAdjacentElement('afterBegin', temp);\r\n\t\t\t\telse vCursor.ceiling.insertAdjacentElement('afterEnd', temp);\r\n\r\n\t\t\t\tvCursor.ceiling = temp;\r\n\t\t\t}\r\n\r\n\t\t\tif(vCursor.ceiling === null)\r\n\t\t\t\tvCursor.floor = virtual.dom.firstElementChild;\r\n\t\t\telse \r\n\t\t\t\tvCursor.floor = vCursor.ceiling.nextElementSibling;\r\n\r\n\t\t\tceiling.style.height = ceilingHeight+'px';\r\n\t\t\tfloor.style.height = floorHeight+'px';\r\n\t\t}\r\n\r\n\t\tvar bounding = virtual.bounding;\r\n\t\trefreshScrollBounding(0, bounding, list, parentNode);\r\n\r\n\t\tif(virtual.callback_ !== undefined){\r\n\t\t\tvar callback_ = virtual.callback_;\r\n\t\t\tdelete virtual.callback_;\r\n\t\t}\r\n\r\n\t\tvar updating = false;\r\n\t\tfunction checkCursorPosition(){\r\n\t\t\tif(updating || scrollingByScript) return;\r\n\t\t\tupdating = true;\r\n\r\n\t\t\tif(scroller.scrollTop < bounding.ceiling){\r\n\t\t\t\t// console.log('back', bounding, scroller.scrollTop, virtual.DOMCursor);\r\n\t\t\t\tpreviousCeiling();\r\n\t\t\t\trefreshScrollBounding(virtual.DOMCursor, bounding, list, parentNode);\r\n\t\t\t\t// console.warn('back', bounding, scroller.scrollTop, virtual.DOMCursor);\r\n\t\t\t}\r\n\r\n\t\t\telse if(scroller.scrollTop > bounding.floor){\r\n\t\t\t\t// console.log('front', bounding, scroller.scrollTop, virtual.DOMCursor);\r\n\t\t\t\tnextFloor();\r\n\t\t\t\trefreshScrollBounding(virtual.DOMCursor, bounding, list, parentNode);\r\n\t\t\t\t// console.warn('front', bounding, scroller.scrollTop, virtual.DOMCursor);\r\n\t\t\t}\r\n\r\n\t\t\tif(virtual.callback !== undefined && list.length !== 0){\r\n\t\t\t\tif(virtual.callback.hitFloor && virtual.vCursor.floor === null &&\r\n\t\t\t\t\tscroller.scrollTop + scroller.clientHeight === scroller.scrollHeight\r\n\t\t\t\t){\r\n\t\t\t\t\tvirtual.callback.hitFloor(virtual.DOMCursor);\r\n\t\t\t\t}\r\n\t\t\t\telse if(virtual.callback.hitCeiling && virtual.vCursor.ceiling === null && scroller.scrollTop === 0){\r\n\t\t\t\t\tvirtual.callback.hitCeiling(virtual.DOMCursor);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(callback_ && callback_.ref[callback_.var]){\r\n\t\t\t\tvirtual.callback = callback_.ref[callback_.var];\r\n\t\t\t\tcallback_ = null;\r\n\t\t\t}\r\n\r\n\t\t\tupdating = false;\r\n\t\t}\r\n\r\n\t\t$.on(scroller, 'scroll', checkCursorPosition);\r\n\t\tonElementResize(parentNode, function(){\r\n\t\t\trefreshScrollBounding(virtual.DOMCursor, bounding, list, parentNode);\r\n\t\t});\r\n\t}\r\n\r\n\t// Recommended for a list that have similar element height\r\n\tfunction staticHeight(list, targetNode, parentNode, scroller){\r\n\t\tvar virtual = list.$virtual;\r\n\t\tvar ceiling = virtual.dCursor.ceiling;\r\n\t\tvar floor = virtual.dCursor.floor;\r\n\r\n\t\t// Insert visible element to dom tree\r\n\t\tvar insertCount = virtual.preparedLength <= list.length ? virtual.preparedLength : list.length;\r\n\t\tfor (var i = 0; i < insertCount; i++) {\r\n\t\t\tif(virtual.dom.firstElementChild === null)\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tfloor.insertAdjacentElement('beforeBegin', virtual.dom.firstElementChild);\r\n\t\t}\r\n\r\n\t\tvirtual.refreshVirtualSpacer = refreshVirtualSpacer;\r\n\r\n\t\tfunction refreshVirtualSpacer(cursor){\r\n\t\t\tif(cursor >= self.prepareCount){\r\n\t\t\t\tceiling.style.height = (cursor - self.prepareCount) * virtual.scrollHeight + 'px';\r\n\t\t\t\tfloor.style.height = (list.length - virtual.preparedLength - cursor) * virtual.scrollHeight + 'px';\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tceiling.style.height = cursor * virtual.scrollHeight + 'px'; //'0px';\r\n\t\t\t\tvar count = (list.length - virtual.preparedLength);\r\n\t\t\t\tfloor.style.height = (count || 0) * virtual.scrollHeight + 'px';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar bounding = virtual.bounding;\r\n\r\n\t\trefreshVirtualSpacer(0);\r\n\t\trefreshScrollBounding(self.prepareCount, bounding, list, parentNode);\r\n\t\tbounding.ceiling = -1;\r\n\r\n\t\tvirtual.offsetTo = function(index){\r\n\t\t\treturn index * virtual.scrollHeight + ceiling.offsetTop;\r\n\t\t}\r\n\r\n\t\tvar vCursor = virtual.vCursor;\r\n\t\tvCursor.floor = virtual.dom.firstElementChild;\r\n\t\tvirtual.scrollTo = function(index){\r\n\t\t\tscrollTo(index, list, self.prepareCount, parentNode, scroller);\r\n\t\t}\r\n\r\n\t\tvirtual.refresh = function(force){\r\n\t\t\trefresh(force, list, self.prepareCount, parentNode, scroller, checkCursorPosition, refreshVirtualSpacer);\r\n\t\t}\r\n\r\n\t\tif(virtual.callback_ !== undefined){\r\n\t\t\tvar callback_ = virtual.callback_;\r\n\t\t\tdelete virtual.callback_;\r\n\t\t}\r\n\r\n\t\tvar updating = false;\r\n\t\tvar fromCeiling = true;\r\n\t\tvar scrollFocused = false;\r\n\t\tfunction checkCursorPosition(){\r\n\t\t\tif(updating || scrollingByScript || scroller.scrollTop >= bounding.ceiling && scroller.scrollTop <= bounding.floor){\r\n\t\t\t\t// Fix chrome scroll anchoring bugs when scrolling at corner\r\n\t\t\t\tif(scrollFocused){\r\n\t\t\t\t\tif(scroller.scrollTop === 0 || scroller.scrollTop === scroller.scrollHeight - scroller.clientHeight){\r\n\t\t\t\t\t\tremoveUserScrollFocus(scroller);\r\n\t\t\t\t\t\tscrollFocused = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar cursor = Math.floor(scroller.scrollTop / virtual.scrollHeight);\r\n\t\t\tif(cursor + virtual.preparedLength > list.length)\r\n\t\t\t\tcursor = list.length - virtual.preparedLength;\r\n\r\n\t\t\tif(fromCeiling){\r\n\t\t\t\tif(cursor < self.prepareCount*2)\r\n\t\t\t\t\tcursor -= self.prepareCount;\r\n\r\n\t\t\t\t// Fix chrome scroll anchoring bugs\r\n\t\t\t\tif(scrollFocused){\r\n\t\t\t\t\tremoveUserScrollFocus(scroller);\r\n\t\t\t\t\tscrollFocused = false;\r\n\t\t\t\t}\r\n\t\t\t\tfromCeiling = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(cursor < self.prepareCount){\r\n\t\t\t\tcursor = 0;\r\n\t\t\t\tfromCeiling = true;\r\n\t\t\t}\r\n\r\n\t\t\tupdating = true;\r\n\r\n\t\t\tvar changes = cursor - virtual.DOMCursor;\r\n\t\t\tif(cursor + changes >= list.length)\r\n\t\t\t\tchanges = cursor + changes - list.length;\r\n\r\n\t\t\tif(changes === 0){ // This should be fixed to improve performance and future bugs\r\n\t\t\t\t//console.warn(\"No changes (The scroll bounding is not correct)\");\r\n\t\t\t\tupdating = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvirtual.DOMCursor = cursor;\r\n\r\n\t\t\t// console.log(cursor, changes, bounding.ceiling, bounding.floor, scroller.scrollTop);\r\n\t\t\tmoveElementCursor(changes, list);\r\n\t\t\trefreshVirtualSpacer(cursor);\r\n\t\t\trefreshScrollBounding(cursor, bounding, list, parentNode);\r\n\t\t\t// console.log('a', bounding.ceiling, bounding.floor, scroller.scrollTop);\r\n\r\n\t\t\tif(virtual.callback !== undefined && list.length !== 0){\r\n\t\t\t\tif(virtual.callback.hitFloor && virtual.vCursor.floor === null){\r\n\t\t\t\t\tvirtual.callback.hitFloor(cursor);\r\n\t\t\t\t}\r\n\t\t\t\telse if(virtual.callback.hitCeiling && virtual.vCursor.ceiling === null){\r\n\t\t\t\t\tvirtual.callback.hitCeiling(cursor);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(callback_ && callback_.ref[callback_.var]){\r\n\t\t\t\tvirtual.callback = callback_.ref[callback_.var];\r\n\t\t\t\tcallback_ = null;\r\n\t\t\t}\r\n\r\n\t\t\tupdating = false;\r\n\t\t}\r\n\r\n\t\t$.on(scroller, 'scroll', checkCursorPosition);\r\n\r\n\t\t// For preventing scroll jump if scrolling over than viewport\r\n\t\tif(scroller === parentNode && navigator.userAgent.indexOf('Chrom') !== -1){\r\n\t\t\t$.on(parentNode, 'mousedown', function(){\r\n\t\t\t\tscrollFocused = true;\r\n\t\t\t});\r\n\t\t\t$.on(parentNode, 'mouseup', function(){\r\n\t\t\t\tscrollFocused = false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction refreshScrollBounding(cursor, bounding, list, parentNode){\r\n\t\tvar temp = Math.floor(self.prepareCount / 2); // half of element preparation\r\n\t\tif(cursor < self.prepareCount){\r\n\t\t\tbounding.ceiling = -1;\r\n\t\t\tbounding.floor = parentNode.children[self.prepareCount * 2 + 1];\r\n\r\n\t\t\tif(bounding.floor !== undefined)\r\n\t\t\t\tbounding.floor = bounding.floor.offsetTop;\r\n\t\t\telse bounding.floor = parentNode.lastElementChild.offsetTop + 1000;\r\n\r\n\t\t\tbounding.floor -= bounding.initial;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if(parentNode.children[temp + 1] !== undefined)\r\n\t\t\t\tbounding.ceiling = parentNode.children[temp + 1].offsetTop; // -2 element\r\n\r\n\t\tif(list.$virtual.preparedLength !== undefined && cursor >= list.length - list.$virtual.preparedLength)\r\n\t\t\tbounding.floor = list.$virtual.dCursor.floor.offsetTop + list.$virtual.scrollHeight*2;\r\n\t\telse{\r\n\t\t\tbounding.floor = parentNode.children[self.prepareCount + 3].offsetTop; // +2 element\r\n\r\n\t\t\tif(parentNode.hasAttribute('scroll-reduce-floor')){\r\n\t\t\t\tbounding.floor -= parentNode.getAttribute('scroll-reduce-floor');\r\n\t\t\t\tbounding.ceiling -= parentNode.getAttribute('scroll-reduce-floor');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbounding.ceiling -= bounding.initial;\r\n\t\tbounding.floor -= bounding.initial;// scrollHeight - clientHeight\r\n\t}\r\n\r\n\tfunction moveElementCursor(changes, list){\r\n\t\tvar vDOM = list.$virtual.dom;\r\n\t\tvar vCursor = list.$virtual.vCursor;\r\n\t\tvar dCursor = list.$virtual.dCursor;\r\n\r\n\t\tif(changes > 0){ // forward\r\n\t\t\tvar ref = 0;\r\n\r\n\t\t\t// Select from virtual ceiling cursor to Dom tree\r\n\t\t\tfor (var i = 0; i < changes; i++) { // vDom -> Dom tree\r\n\t\t\t\tif(vCursor.ceiling === null)\r\n\t\t\t\t\tref = vDOM.firstElementChild;\r\n\r\n\t\t\t\telse ref = vCursor.ceiling.nextElementSibling;\r\n\t\t\t\tif(ref === null) break;\r\n\t\t\t\tdCursor.floor.insertAdjacentElement('beforeBegin', ref);\r\n\t\t\t}\r\n\r\n\t\t\t// Move element on the ceiling to vDom\r\n\t\t\tfor (var i = changes; i > 0; i--) { // Dom tree -> vDom\r\n\t\t\t\tif(vCursor.ceiling === null){\r\n\t\t\t\t\tvCursor.ceiling = dCursor.ceiling.nextElementSibling;\r\n\t\t\t\t\tvDOM.insertAdjacentElement('afterBegin', vCursor.ceiling);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tref = dCursor.ceiling.nextElementSibling;\r\n\t\t\t\t\tvCursor.ceiling.insertAdjacentElement('afterEnd', ref);\r\n\t\t\t\t\tvCursor.ceiling = ref;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvCursor.floor = vCursor.ceiling.nextElementSibling;\r\n\t\t}\r\n\t\telse if(changes < 0){ // backward\r\n\t\t\tvar ref = 0;\r\n\t\t\tchanges = -changes;\r\n\r\n\t\t\t// Select from virtual floor cursor to Dom tree\r\n\t\t\tfor (var i = 0; i < changes; i++) { // vDom -> Dom tree\r\n\t\t\t\tif(vCursor.floor === null)\r\n\t\t\t\t\tref = vDOM.lastElementChild;\r\n\r\n\t\t\t\telse ref = vCursor.floor.previousElementSibling;\r\n\t\t\t\tif(ref === null) break;\r\n\t\t\t\tdCursor.ceiling.insertAdjacentElement('afterEnd', ref);\r\n\t\t\t}\r\n\r\n\t\t\t// Move element on the floor to vDom\r\n\t\t\tfor (var i = 0; i < changes; i++) { // Dom tree -> vDom\r\n\t\t\t\tif(vCursor.floor === null){\r\n\t\t\t\t\tvCursor.floor = dCursor.floor.previousElementSibling;\r\n\t\t\t\t\tvDOM.insertAdjacentElement('beforeEnd', vCursor.floor);\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse{\r\n\t\t\t\t\tref = dCursor.floor.previousElementSibling;\r\n\t\t\t\t\tvCursor.floor.insertAdjacentElement('beforeBegin', ref);\r\n\t\t\t\t\tvCursor.floor = ref;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvCursor.ceiling = vCursor.floor.previousElementSibling;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scrollTo(index, list, prepareCount, parentNode, scroller){\r\n\t\tvar virtual = list.$virtual;\r\n\t\tvar reduce = 0;\r\n\r\n\t\tif(index >= list.length - virtual.preparedLength){\r\n\t\t\treduce -= prepareCount;\r\n\t\t\tindex = list.length - virtual.preparedLength;\r\n\t\t}\r\n\r\n\t\tif(index - virtual.DOMCursor === 0 || index >= list.length) return;\r\n\r\n\t\tscrollingByScript = true;\r\n\r\n\t\t// Already on DOM tree\r\n\t\tif((virtual.DOMCursor === 0 && index < prepareCount + prepareCount/2) ||\r\n\t\t\t(virtual.DOMCursor + prepareCount/2 > index\r\n\t\t\t&& virtual.DOMCursor + prepareCount < index))\r\n\t\t\tscroller.scrollTop = parentNode.children[index - virtual.DOMCursor + 1].offsetTop;\r\n\r\n\t\t// Move cursor\r\n\t\telse {\r\n\t\t\tvar temp = null;\r\n\t\t\tvar ceiling = virtual.dCursor.ceiling;\r\n\t\t\tvar floor = virtual.dCursor.floor;\r\n\t\t\tvar vCursor = virtual.vCursor;\r\n\r\n\t\t\t// DOM tree to virtual DOM\r\n\t\t\tvar length = parentNode.childElementCount - 2;\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\ttemp = ceiling.nextElementSibling;\r\n\r\n\t\t\t\tif(vCursor.floor === null){\r\n\t\t\t\t\tvirtual.dom.insertAdjacentElement('beforeEnd', temp);\r\n\r\n\t\t\t\t\tif(i === length-1)\r\n\t\t\t\t\t\tvCursor.floor = temp;\r\n\t\t\t\t}\r\n\t\t\t\telse vCursor.floor.insertAdjacentElement('beforeBegin', temp);\r\n\t\t\t}\r\n\r\n\t\t\tif(index >= prepareCount){\r\n\t\t\t\tif(index < list.length - virtual.preparedLength)\r\n\t\t\t\t\tindex -= prepareCount;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treduce = prepareCount - index;\r\n\t\t\t\tvirtual.DOMCursor = index = 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar insertCount = virtual.preparedLength <= list.length ? virtual.preparedLength : list.length;\r\n\r\n\t\t\t// Virtual DOM to DOM tree\r\n\t\t\tfor (var i = 0; i < insertCount; i++) {\r\n\t\t\t\ttemp = virtual.dom.children[index];\r\n\t\t\t\tif(temp === undefined) break;\r\n\r\n\t\t\t\tfloor.insertAdjacentElement('beforeBegin', temp);\r\n\t\t\t}\r\n\t\t\tvirtual.DOMCursor = index;\r\n\r\n\t\t\tvCursor.floor = virtual.dom.children[index] || null;\r\n\t\t\tvCursor.ceiling = vCursor.floor ? vCursor.floor.previousElementSibling : null;\r\n\r\n\t\t\tif(list.$virtual.refreshVirtualSpacer)\r\n\t\t\t\tlist.$virtual.refreshVirtualSpacer(index);\r\n\r\n\t\t\trefreshScrollBounding(index, virtual.bounding, list, parentNode);\r\n\r\n\t\t\ttemp = parentNode.children[prepareCount - reduce + 1];\r\n\t\r\n\t\t\tif(temp !== undefined)\r\n\t\t\t\tscroller.scrollTop = temp.offsetTop - scroller.offsetTop;\r\n\t\t}\r\n\r\n\t\tscrollingByScript = false;\r\n\t}\r\n\r\n\tfunction removeUserScrollFocus(parentNode){\r\n\t\tparentNode.style.overflow = 'hidden';\r\n\t\tsetTimeout(function(){\r\n\t\t\tparentNode.style.overflow = '';\r\n\t\t}, 50);\r\n\t}\r\n\r\n\tfunction getAbsoluteHeight(el){\r\n\t  var styles = window.getComputedStyle(el);\r\n\t  var margin = parseInt(styles['marginTop']) + parseInt(styles['marginBottom']);\r\n\t  return el.offsetHeight + margin || 0;\r\n\t}\r\n\r\n\tfunction obtainElements(list, parentNode){\r\n\t\tvar exist = [];\r\n\t\tvar temp = undefined;\r\n\r\n\t\tvar length = list.$virtual.DOMCursor;\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\ttemp = list.$virtual.dom.children[i];\r\n\t\t\tif(temp === undefined) break;\r\n\t\t\texist.push(temp);\r\n\t\t}\r\n\r\n\t\tlength = parentNode.childElementCount - 2;\r\n\t\tfor (var i = 1; i <= length; i++) {\r\n\t\t\ttemp = parentNode.children[i];\r\n\t\t\tif(temp === undefined) break;\r\n\t\t\texist.push(temp);\r\n\t\t}\r\n\t\t\r\n\t\t// Get elements length\r\n\t\tvar elementLength = list.$virtual.dom.childElementCount + length;\r\n\r\n\t\tlength = elementLength - length - list.$virtual.DOMCursor;\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\ttemp = list.$virtual.dom.children[list.$virtual.DOMCursor + i];\r\n\t\t\tif(temp === undefined) break;\r\n\t\t\texist.push(temp);\r\n\t\t}\r\n\r\n\t\treturn exist;\r\n\t}\r\n\r\n\tfunction refresh(force, list, prepareCount, parentNode, scroller, checkCursorPosition, refreshVirtualSpacer){\r\n\t\tvar cursor = list.$virtual.DOMCursor;\r\n\t\tvar additionalScroll = 0;\r\n\r\n\t\t// Find nearest cursor for current view position\r\n\t\tif(force){\r\n\t\t\tvar i = -1;\r\n\t\t\tvar length = list.$virtual.preparedLength;\r\n\r\n\t\t\tdo{\r\n\t\t\t\ti++;\r\n\t\t\t} while(i < length && parentNode.children[i].offsetTop < scroller.scrollTop);\r\n\r\n\t\t\tcursor = cursor + i;\r\n\t\t\tif(cursor > 0) cursor -= 1;\r\n\r\n\t\t\tadditionalScroll = scroller.scrollTop - parentNode.children[i].offsetTop;\r\n\t\t}\r\n\r\n\t\t// Force move cursor if element in the DOM tree was overloaded\r\n\t\tif(force || parentNode.childElementCount - 2 > list.$virtual.preparedLength){\r\n\t\t\tlist.$virtual.DOMCursor = list.length;\r\n\t\t\tvar moveTo = cursor;\r\n\t\t\tif(!force)\r\n\t\t\t\tmoveTo = cursor <= prepareCount ? cursor : (cursor + prepareCount);\r\n\r\n\t\t\tscrollTo(moveTo,\r\n\t\t\t\tlist,\r\n\t\t\t\tprepareCount,\r\n\t\t\t\tparentNode,\r\n\t\t\t\tscroller\r\n\t\t\t);\r\n\r\n\t\t\tscroller.scrollTop += additionalScroll;\r\n\t\t}\r\n\r\n\t\tif(refreshVirtualSpacer)\r\n\t\t\trefreshVirtualSpacer(cursor);\r\n\r\n\t\tif(checkCursorPosition)\r\n\t\t\tcheckCursorPosition();\r\n\r\n\t\trefreshScrollBounding(cursor, list.$virtual.bounding, list, parentNode);\r\n\t}\r\n\r\n\tvar _onElementResize = [];\r\n\tvar _onElementResize_timer = -1;\r\n\tfunction onElementResize(parentNode, callback){\r\n\t\tif(_onElementResize_timer === -1){\r\n\t\t\t_onElementResize_timer = setInterval(function(){\r\n\t\t\t\tvar temp = null;\r\n\t\t\t\tfor (var i = _onElementResize.length - 1; i >= 0; i--) {\r\n\t\t\t\t\ttemp = _onElementResize[i];\r\n\r\n\t\t\t\t\t// Check resize\r\n\t\t\t\t\tif(temp.element.scrollHeight === temp.height\r\n\t\t\t\t\t\t|| temp.element.scrollWidth === temp.width)\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t// Check if it's removed from DOM\r\n\t\t\t\t\tif(temp.element.parentElement === null){\r\n\t\t\t\t\t\t_onElementResize.splice(i, 1);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttemp.callback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(_onElementResize.length === 0){\r\n\t\t\t\t\tclearInterval(_onElementResize_timer);\r\n\t\t\t\t\t_onElementResize_timer = -1;\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\r\n\t\t_onElementResize.push({\r\n\t\t\telement:parentNode,\r\n\t\t\tcallback:callback,\r\n\t\t\theight:parentNode.scrollHeight,\r\n\t\t\twidth:parentNode.scrollWidth\r\n\t\t});\r\n\t}\r\n\r\n\tfunction offElementResize(parentNode){\r\n\t\tfor (var i = _onElementResize.length - 1; i >= 0; i--) {\r\n\t\t\tif(_onElementResize[i].element === parentNode)\r\n\t\t\t\t_onElementResize.splice(i, 1);\r\n\t\t}\r\n\r\n\t\t// Interval will be cleared when the array is empty\r\n\t}\r\n\r\n\tfunction initStyles(){\r\n\t\tvar style = document.getElementById('sf-styles');\r\n\r\n\t\tif(!style){\r\n\t\t\tstyle = document.createElement('style');\r\n\t\t\tstyle.id = 'sf-styles';\r\n        \tdocument.head.appendChild(style);\r\n\t\t}\r\n\r\n\t\tstyle.sheet.insertRule(\r\n\t\t'.sf-virtual-list .virtual-spacer{'+\r\n            'visibility: hidden;'+\r\n            'position: relative;'+\r\n            'height: 1px;'+\r\n            'transform-origin: 0 0;'+\r\n            'width: 1px;'+\r\n            'margin: 0;'+\r\n            'padding: 0;'+\r\n            'background: none;'+\r\n            'border: none;'+\r\n            'box-shadow: none;'+\r\n         '}', style.sheet.cssRules.length);\r\n\t}\r\n};"]}