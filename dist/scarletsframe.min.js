/*
  ScarletsFrame
  A frontend library for Scarlets Framework that support
  lazy page load and element binding that can help
  simplify your code

  https://github.com/ScarletsFiction/ScarletsFrame
*/
!function(global,factory){if(void 0===window.customElements)return console.error("This browser was not supported"),window.onOldBrowser?window.onOldBrowser():(console.error("Please make an callback in 'window.onOldBrowser' to create a custom fallback"),alert("This browser was not supported"));function routerEval(code){eval(code)}"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory(global,routerEval):global.sf=factory(global,routerEval)}("undefined"!=typeof window?window:this,function(window,routerEval){"use strict";void 0===typeof document&&(document=window.document);var internal={},sf=function(e){return e.constructor===Function?sf.loader.onFinish.apply(null,arguments):void 0!==e.tagName?sf.model.root[sf.controller.modelName(e)]:void 0};sf.internal={},sf.regex={getQuotes:/(['"])(?:\1|[\s\S]*?[^\\]\1)/g,validFunctionCall:/[_a-zA-Z0-9 \]\$\)]/,strictVar:"(?=\\b[^.]|^|\\n| +|\\t|\\W )",escapeHTML:/(?!&#.*?;)[\u00A0-\u9999<>\&]/gm,uniqueDataParser:/{{((@|#[\w])[\s\S]*?)}}/g,dataParser:/{{([^@%][\s\S]*?)}}/g,arrayItemsObserve:/\b_model_\.([_a-zA-Z0-9.['\]]+)(?:$|[^'\]])/g};var allowedFunctionEval={for:!0,if:!0,while:!0,"_content_.take":!0,"console.log":!0};function avoidQuotes(e,t,r){var n=[],o="<%$@>";if(void 0===r){e=t(e=e.replace(sf.regex.getQuotes,function(e){return n.push(e),o+(n.length-1)+o}));for(var i=0;i<n.length;i++)e=e.replace(o+i+o,n[i]);return e}t(e.replace(sf.regex.getQuotes,"<%$@>"))}function isEmptyObject(e){for(var t in e)return!1;return!0}function compareObject(e,t){if(!e||!t)return!1;for(var r in e)if("object"!=typeof e[r]&&e[r]!==t[r])return!1;return!0}function hiddenProperty(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:r})}function deepProperty(e,t){for(var r=0;r<t.length;r++)if(void 0===(e=e[t[r]]))return e;return e}function capitalizeLetters(e){for(var t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].slice(1);return e.join("")}function DOMList(e){if(null===e)return this.length=0,this;if(void 0===e.length)return this[0]=e,this.length=1,this;for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this}sf.dom=function(e,t){if(!e){if(void 0===e){var r=function(e){return r.find(e)};return Object.defineProperty(r,"length",{writable:!0,enumerable:!1,value:0}),Object.assign(r,DOMList.prototype)}return new DOMList([])}return e.constructor===Function?sf(e):"<"===e[0]||">"===e[e.length-1]?new DOMList(sf.dom.parseElement(e)):t?new DOMList(t.querySelectorAll(e)):e.constructor===String?new DOMList(document.querySelectorAll(e)):new DOMList(e)};var $=sf.dom;!function(){var e=sf.dom,t=/\-[a-z0-9]/,r=function(e,t){return t.toUpperCase()};e.fn=DOMList.prototype={push:function(e){this[this.length++]=e},indexOf:function(e){for(var t=Object.keys(this),r=0;r<t.length;r++)if(this[t[r]]===e)return r;return-1},splice:function(e){for(var t=this.length-1;e<t;e++)delete this[e],this[e]=this[e+1];this.length--},add:function(e){return this[this.length++]=e,this},find:function(e){if(1===this.length)return new DOMList(this[0].querySelectorAll(e));for(var t=[],r=0;r<this.length;r++)t.push.apply(t,this[r].querySelectorAll(e));return new DOMList(t)},parent:function(t){if(1===this.length)return new DOMList(t?e.parent(this[0],t):this[0].parentElement);for(var r=[],n=0;n<this.length;n++)r.push.apply(r,e.parent(this[n],t));return new DOMList(r)},prevAll:function(t){for(var r=[],n=0;n<this.length;n++)r.push.apply(r,e.prevAll(this[n],t));return new DOMList(r)},nextAll:function(t){for(var r=[],n=0;n<this.length;n++)r.push.apply(r,e.nextAll(this[n],t,!0));return new DOMList(r)},children:function(e){for(var t=[],r=0;r<this.length;r++)t.push.apply(t,this[r].children);return new DOMList(t)},remove:function(){for(var e=0;e<this.length;e++)this[e].remove();return this},empty:function(){for(var e=0;e<this.length;e++)this[e].textContent="";return this},addClass:function(e){for(var t=0;t<this.length;t++)DOMTokenList.prototype.add.apply(this[t].classList,e.split(" "));return this},removeClass:function(e){for(var t=0;t<this.length;t++)DOMTokenList.prototype.remove.apply(this[t].classList,e.split(" "));return this},toggleClass:function(e){for(var t=0;t<this.length;t++)DOMTokenList.prototype.toggle.apply(this[t].classList,e.split(" "));return this},hasClass:function(e){for(var t=0;t<this.length;t++)if(this[t].classList.contains(e))return!0;return!1},prop:function(e,t){if(void 0===t)return this[0][e];for(var r=0;r<this.length;r++)this[r][e]=t;return this},attr:function(e,t){if(void 0===t)return this[0].getAttribute(e);for(var r=0;r<this.length;r++)this[r].setAttribute(e,t);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this},css:function(e,n){if(void 0===n&&e.constructor===String)return this[0].style[e];if(e.constructor===Object){for(var o=Object.keys(e),i=0;i<o.length;i++)!0===/\-/.test(o[i])&&(e[o[i].replace(t,r)]=e[o[i]],delete e[o[i]]);for(i=0;i<this.length;i++)Object.assign(this[i].style,e);return this}e=e.replace(t,r);for(i=0;i<this.length;i++)this[i].style[e]=n;return this},on:function(t,r,n){for(var o=0;o<this.length;o++)e.on(this[o],t,r,n);return this},off:function(t,r,n){for(var o=0;o<this.length;o++)e.off(this[o],t,r,n);return this},once:function(t,r,n){for(var o=0;o<this.length;o++)e.on(this[o],t,r,n,!0);return this},trigger:function(e,t,r){e=e.split(" ");for(var n=0;n<e.length;n++)for(var o=e[n],i=0;i<this.length;i++)if(!0!==r){var l;try{l=new window.CustomEvent(o,{detail:t,bubbles:!0,cancelable:!0})}catch(e){(l=document.createEvent("Event")).initEvent(o,!0,!0),l.detail=t}this[i].dispatchEvent(l)}else this[i][o]();return this},animateKey:function(t,r,n){for(var o=0;o<this.length;o++)e.animateKey(this[o],t,r,n);return this},each:function(e){for(var t=0;t<this.length;t++)e(this[t],t,this);return this},data:function(e,t){if(void 0===t)return this[0].$data?this[0].$data[e]:void 0;for(var r=0;r<this.length;r++)void 0===this[r].$data&&(this[r].$data={}),this[r].$data[e]=t;return this},removeData:function(e){for(var t=0;t<this.length;t++)void 0!==this[t].$data&&delete this[t].$data[e];return this},append:function(e){if(e.constructor===Array||e.constructor===Object)for(var t=0;t<e.length;t++)this[0].append(e[t]);else e.constructor===String?this[0].insertAdjacentHTML("beforeEnd",e):this[0].append(e);return this},prepend:function(e){if(e.constructor===Array||e.constructor===Object)for(var t=0;t<e.length;t++)this[0].prepend(e[t]);else e.constructor===String?this[0].insertAdjacentHTML("afterBegin",e):this[0].prepend(e);return this},eq:function(e){return new DOMList(this[e])},insertAfter:function(e){var t=e.parentElement;t.insertBefore(this[0],e.nextSibling);for(var r=1;r<this.length;r++)t.insertBefore(this[r],this[r-1]);return this},insertBefore:function(e){for(var t=e.parentElement,r=0;r<this.length;r++)t.insertBefore(this[r],e);return this},text:function(e){if(void 0===e)return this[0].innerText;for(var t=0;t<this.length;t++)this[t].innerText=e;return this},html:function(e){if(void 0===e)return this[0].innerHTML;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},val:function(e){if(void 0===e)return this[0].value;for(var t=0;t<this.length;t++)this[t].text=e;return this}},Object.assign(e.fn,{click:function(e){return this.trigger("click",e,!0)},blur:function(e){return this.trigger("blur",e,!0)},focus:function(e){return this.trigger("focus",e,!0)},focusin:function(e){return this.trigger("focusin",e)},focusout:function(e){return this.trigger("focusout",e)},keyup:function(e){return this.trigger("keyup",e)},keydown:function(e){return this.trigger("keydown",e)},keypress:function(e){return this.trigger("keypress",e)},submit:function(e){return this.trigger("submit",e)},change:function(e){return this.trigger("change",e)},mousedown:function(e){return this.trigger("mousedown",e)},mousemove:function(e){return this.trigger("mousemove",e)},mouseup:function(e){return this.trigger("mouseup",e)},mouseenter:function(e){return this.trigger("mouseenter",e)},mouseleave:function(e){return this.trigger("mouseleave",e)},mouseout:function(e){return this.trigger("mouseout",e)},mouseover:function(e){return this.trigger("mouseover",e)},touchstart:function(e){return this.trigger("touchstart",e)},touchend:function(e){return this.trigger("touchend",e)},touchmove:function(e){return this.trigger("touchmove",e)},resize:function(e){return this.trigger("resize",e,!0)},scroll:function(e){return this.trigger("scroll",e,!0)}}),e.findOne=function(e,t){return void 0!==t?t.querySelector(e):document.querySelector(e)},e.isChildOf=function(e,t){for(var r=e.parentNode;null!==r;){if(r===t)return!0;r=r.parentNode}return!1},e.parentHasProperty=function(e,t){do{if(void 0!==e[t])return e;e=e.parentElement}while(null!==e);return null},e.parent=function(e,t){if(e.closest)return e.closest(t);do{if(!0===e.matches(t))return e;e=e.parentElement}while(null!==e);return null},e.prevAll=function(e,t,r){var n=[],o=!t||t.constructor!==String;for(e=r?e.nextSibling:e.previousSibling;null!==e;){if(!1===o)!0===e.matches(t)&&n.push(e);else{if(e===t)break;n.push(e)}e=r?e.nextSibling:e.previousSibling}return n},e.nextAll=function(t,r){return e.prevAll(t,r,!0)},e.on=function(t,r,n,o,i){if("string"==typeof t&&(t=document,o=n,n=r,r=t),"function"==typeof n&&(o=n,n=null),n){var l=o;(o=function(t){var r=e.parent(t.target,n);null!==r&&l.apply(r,[t])}).callback=l}o.selector=n,o.once=i,t.addEventListener(r,o,{capture:!0,once:!0===i}),i||(void 0===t.sf$eventListener&&(t.sf$eventListener={}),void 0===t.sf$eventListener[r]&&(t.sf$eventListener[r]=[]),t.sf$eventListener[r].push(o))},e.once=function(t,r,n,o){e.on(t,r,n,o,!0)},e.off=function(t,r,n,o){if(void 0!==r){if(1===(a=r.split(" ")).length)if(void 0!==n&&n.constructor===Function&&(o=n,n=void 0),void 0!==t.sf$eventListener)if(o){if(t.removeEventListener(r,o,{capture:!0}),void 0===(i=t.sf$eventListener[r]))return;-1!==(l=i.indexOf(o))&&i.splice(l,1)}else{var i;if(void 0!==(i=t.sf$eventListener)&&void 0!==i[r])for(l=i[r].length-1;l>=0;l--)n&&i[r][l].selector!==n||t.removeEventListener(r,i[r].splice(l,1),{capture:!0})}else void 0!==o&&t.removeEventListener(r,o,{capture:!0});else for(var l=0;l<a.length;l++)e.off(t,a[l])}else{if(void 0===t.sf$eventListener)return;for(var a=t.sf$eventListener[r],l=0;l<a.length;l++)e.off(t,a[l])}},e.animateKey=function(t,r,n,o){if(void 0!==t){n&&n.constructor===Function&&(o=n,n=void 0);var i=null;void 0!==t.style.animation&&(i="animationend"),void 0!==t.style.WebkitAnimation&&(i="webkitAnimationEnd");var l=t.style,a=r;if(void 0!==n&&n.constructor!==Number||(n={duration:n&&n.constructor===Number?n:.6,ease:"ease",fill:"both"}),void 0!==n.duration&&(a+=" "+n.duration+"s"),void 0!==n.ease&&(a+=" "+n.ease),void 0!==n.delay){if(a+=" "+n.delay+"s","animationend"===i)var s="animationstart";else s="webkitAnimationStart";!1===n.visible&&(t.classList.add("anim-pending"),l.visibility="hidden"),e.once(t,s,function(){t.isConnected&&(n.whenBegin&&n.whenBegin(),t.classList.remove("anim-pending"),l.visibility="visible")})}else l.visibility="visible";void 0!==n.iteration&&(a+=" "+n.iteration),void 0!==n.direction&&(a+=" "+n.direction),void 0!==n.fill&&(a+=" "+n.fill),l.webkitAnimation=l.animation=a,setTimeout(function(){if(t.isConnected){if(t.classList.add("anim-element"),null!==t.parentElement){var r=t.offsetLeft+t.offsetWidth/2+"px"+(t.offsetTop+t.offsetHeight/2)+"px",n=t.parentElement.style;t.parentElement.classList.add("anim-parent"),n.webkitPerspectiveOrigin=n.perspectiveOrigin=r}e.once(t,i,function(){setTimeout(function(){if(null!==t.parentElement){l.visibility="",t.classList.remove("anim-element"),l.webkitAnimation=l.animation="";var e=t.parentElement.style;e.webkitPerspectiveOrigin=e.perspectiveOrigin=""}}),void 0!==o&&o()})}else void 0!==o&&o()})}};var n={div:document.createElement("div"),ul:document.createElement("ul"),tbody:document.createElement("tbody"),tr:document.createElement("tr"),table:document.createElement("table"),select:document.createElement("select")};e.parseElement=function(e,t){var r=[],o=n.div;0===e.indexOf("<li")&&(o=n.ul),0===e.indexOf("<tr")&&(o=n.tbody),0!==e.indexOf("<td")&&0!==e.indexOf("<th")||(o=n.tr),0===e.indexOf("<tbody")&&(o=n.table),0===e.indexOf("<option")&&(o=n.select),o.textContent="",o.insertAdjacentHTML("afterBegin",e);for(var i=o[t?"childNodes":"children"],l=0;l<i.length;l++)r.push(i.item(l));return r},e.escapeText=function(e){var t=n.div;return t.textContent=e,t.innerHTML},e.remove=function(e){if(void 0!==e.remove)return e.remove();for(var t=0;t<e.length;t++)e[t].remove()};var o=null;setTimeout(function(){sf.loader.domReady(function(){o=document.body.parentElement})});var i=/[~`!@#$%^&*()+={}|[\]\\:";'<>?,.\/ ]/;e.getSelector=function(e,t,r){var n=[];void 0===r&&(r=o);for(var l=t?"previousSibling":"previousElementSibling";null!==e.parentNode;){if(e.id&&!i.test(e.id)){n.unshift("#"+e.id);break}if(e===r)void 0===t?n.unshift(e.tagName):n.unshift(0);else{for(var a=e,s=t?0:1;a[l];)a=a[l],s++;t?n.unshift(s):n.unshift(":nth-child("+s+")")}if(null===(e=e.parentNode))break}return t?n:n.join(" > ")},e.childIndexes=function(e,t){var r=t||o,n=1;if(e[0].constructor===String&&r.id!==e[0].substr(1))r=r.querySelector(e[0]);else if(1===e.length)return r;for(n=n;n<e.length;n++)if(null===(r=r.childNodes.item(e[n])))return null;return r}}(),sf.loader=new function(){var e=this;e.loadedContent=0,e.totalContent=0,e.DOMWasLoaded=!1,e.DOMReady=!1,e.turnedOff=!0;var t=[],r=[],n=[];e.onFinish=function(t){if(e.DOMWasLoaded)return t();-1===r.indexOf(t)&&r.push(t)},e.domReady=function(r){if(e.DOMReady)return r();-1===t.indexOf(r)&&t.push(r)},e.onProgress=function(t){if(e.DOMWasLoaded)return t(e.loadedContent,e.totalContent);-1===n.indexOf(t)&&n.push(t)},e.f=function(t){e.loadedContent++;for(var r=0;r<n.length;r++)n[r](e.loadedContent,e.totalContent)},e.css=function(t){if(e.DOMWasLoaded){for(var r=t.length-1;r>=0;r--)0!==$('link[href*="'+t[r]+'"]').length&&t.splice(r,1);if(0===t.length)return}e.turnedOff=!1,e.totalContent=e.totalContent+t.length;for(r=0;r<t.length;r++){var n=document.createElement("link");n.rel="stylesheet",n.href=t[r],n.addEventListener("load",sf.loader.f,{once:!0}),n.addEventListener("error",sf.loader.f,{once:!0}),document.head.appendChild(n)}},e.js=function(t){if(e.DOMWasLoaded){for(var r=t.length-1;r>=0;r--)0!==$('script[src*="'+t[r]+'"]').length&&t.splice(r,1);if(0===t.length)return}e.turnedOff=!1,e.totalContent=e.totalContent+t.length;for(r=0;r<t.length;r++){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=t[r],n.addEventListener("load",sf.loader.f,{once:!0}),n.addEventListener("error",sf.loader.f,{once:!0}),document.head.appendChild(n)}};document.addEventListener("load",function e(t){document.body&&document.removeEventListener("load",e,!0)},!0),document.addEventListener("readystatechange",function r(){if("interactive"===document.readyState||"complete"===document.readyState){if(!1===e.DOMReady){e.DOMReady=!0;for(var n=0;n<t.length;n++)try{t[n]()}catch(e){console.error(e)}}o=setInterval(i,100),document.removeEventListener("readystatechange",r,!0)}},!0);var o=-1;function i(){if(!(!1===e.turnedOff&&e.loadedContent<e.totalContent)){clearInterval(o);for(var i=sf.dom("script, link, img"),l=0;l<i.length;l++)i[l].removeEventListener("error",sf.loader.f),i[l].removeEventListener("load",sf.loader.f);e.DOMWasLoaded=!0,e.turnedOff=!0;var a=Object.keys(internal.modelPending);for(l=0;l<a.length;l++){var s=internal.modelPending[a[l]];if(void 0===sf.model.root[a[l]])var u=sf.model.root[a[l]]={};else u=sf.model.root[a[l]];for(var f=0;f<s.length;f++)s[f](u,root_);delete internal.modelPending[a[l]]}for(l=internal.controller.pending.length-1;l>=0;l--){void 0!==(u=sf.controller.pending[internal.controller.pending[l]])&&(u(root_(internal.controller.pending[l]),root_),internal.controller.pending.splice(l,1))}for(l=0;l<r.length;l++)try{r[l]()}catch(e){console.error(e)}n.splice(0),t.splice(0),r.splice(0),t=r=null}}},sf.prototype.constructor=sf.loader.onFinish,sf.component=new function(){var self=this,scope=internal.component={list:{}};self.registered={},self.available={},self.for=function(e,t,r){void 0===self.registered[e]&&(self.registered[e]=[t,sf.controller.pending[e],0,!1,r]),internal.component[e.toUpperCase()]=!0,self.registered[e][0]=t,delete sf.controller.pending[e],defineComponent(e)},self.html=function(e,t){void 0===self.registered[e]&&(self.registered[e]=[!1,!1,0,!1]);var r=$.parseElement(t);if(1!==r.length){var n=document.createElement("div");n.tempDOM=!0;for(var o=0;o<r.length;o++)n.appendChild(r[o]);self.registered[e][3]=n}else self.registered[e][3]=r[0]};var tempDOM=document.createElement("div");function componentInit(e,t,r){e.sf$controlled=t,e.sf$componentFrom=r}self.new=function(e,t,r){if(!internal.component.skip)if(t.hasAttribute("sf-repeat-this"))t.sf$componentIgnore=!0;else if((0!==t.childElementCount||!1!==self.registered[e][3])&&!0!==t.sf$componentIgnore){var n=/(^|:)(sf-|class|style)/,o=t.attributes;0!==o.length&&void 0===r&&(r={});for(var i=0;i<o.length;i++)n.test(o[i].nodeName)||(r[o[i].nodeName]=o[i].value);if(void 0===t){if(!1===self.registered[e][3])return void console.error("HTML content for '"+e+"' was not defined");t=self.registered[e][3].cloneNode(!0)}var l=e+"@"+self.registered[e][2]++;void 0===self.available[e]&&(self.available[e]=[]),self.available[e].push(l);var a=sf.model.root[l]={$el:$()};if(a.$el.push(t),self.registered[e][0](a,sf.model,r),self.registered[e][1]&&self.registered[e][1](a,sf.model,r),0===t.childElementCount){var s=self.registered[e][3],u=s.tempDOM;s.constructor!==Object&&(s=sf.model.extractPreprocess(s,null,a),self.registered[e][3]=s,s.tempDOM=u);var f=Object.assign({},s);if(0!==f.parse.length){var d=null;f.parse=f.parse.slice(0);for(i=0;i<f.parse.length;i++){f.parse[i]=Object.assign({},f.parse[i]);var c=f.parse[i].data=f.parse[i].data.slice(0);null===d&&4===c.length&&((d=Object.assign({},c[3]))._modelScope=a),c[2]=a,c[3]=d}}var p=internal.model.templateParser(f,a);if(t.sf$elementReferences=p.sf$elementReferences,sf.model.bindElement(t,l,f),!0===u){i=0;for(var v=(p=p.childNodes).length;i<v;i++)t.appendChild(p[0])}else t.appendChild(p)}else{var h={repeat:[],input:[]};sf.model.parsePreprocess(sf.model.queuePreprocess(t,!0,h),l),internal.model.bindInput(h.input,a),internal.model.repeatedListBinding(h.repeat,a)}return t.model=a,componentInit(t,l,e),t.sf$initTriggered=!0,t.destroy=function(){null===this.parentElement?internal.model.DOMNodeRemoved(this):this.remove()},t}};var HTMLElement=window.HTMLElement,customElements=window.customElements,HTMLElement_wrap=function(e){function t(){return Reflect.construct(e,arguments,Object.getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(t,e)}(HTMLElement);function defineComponent(name){if(!customElements.get(name)){name=name.replace(/[^\w-]+/g,"");var tagName=name;if(name=name.split("-"),1===name.length)return console.error("Please use '-' when defining component tags");name=capitalizeLetters(name);var func=eval("function "+name+"($item){var he = HTMLElement_wrap.call(this);self.new(tagName, he, $item);return he}"+name);func.prototype=Object.create(HTMLElement.prototype),func.prototype.constructor=func,func.__proto__=HTMLElement,func.prototype.connectedCallback=function(){if(this.model)return void 0!==this.sf$destroying?(clearTimeout(this.sf$destroying),void(this.sf$destroying=void 0)):this.sf$initTriggered?(delete this.sf$initTriggered,void(this.model.init&&this.model.init())):void(this.model.reinit&&this.model.reinit())},func.prototype.disconnectedCallback=function(){if(!this.sf$componentIgnore){var e=sf.component.available[tagName];e.splice(e.indexOf(this.sf$controller),1);var t=this;this.sf$destroying=setTimeout(function(){if(!t.model)return console.log(t);t.model.destroy&&t.model.destroy(),delete sf.model.root[t.sf$controlled]},500)}};try{customElements.define(tagName,func)}catch(e){console.error(e)}window["$"+name]=func}}},sf.model=function(e){if(void 0!==sf.component.registered[e])return root_(e);sf.model.root[e]||(sf.model.root[e]={},internal.controller.pending.push(e));var t=internal.modelPending[e];if(t){for(var r=sf.model.root[e],n=0;n<t.length;n++)t[n](r,sf.model);t=internal.modelPending[e]=!1}for(n=internal.controller.pending.length-1;n>=0;n--){void 0!==(r=sf.controller.pending[internal.controller.pending[n]])&&(r(root_(internal.controller.pending[n]),root_),internal.controller.pending.splice(n,1))}return sf.controller.pending[e]&&sf.controller.run(e),sf.model.root[e]},function(){var e=sf.model;e.root={},internal.modelPending={},e.index=function(t){!1===t.hasAttribute("sf-bind-list")&&(t=sf.dom.parent(t,"[sf-bind-list]"));for(var r=-1,n=t.tagName,o=t;null!==t;)t.tagName===n&&r++,t=t.previousElementSibling;var i=o.getAttribute("sf-bind-list");if(!i)return r;var l=e.root[sf.controller.modelName(o)][i];return l.$virtual?r+l.$virtual.DOMCursor-1:r},e.for=function(t,r){if(!sf.loader.DOMWasLoaded)return void 0===internal.modelPending[t]&&(internal.modelPending[t]=[]),!1===internal.modelPending[t]?r(e(t),e):internal.modelPending[t].push(r);r(e(t),e)},e.modelKeys=function(e){for(var t=Object.keys(e),r=t.length-1;r>=0;r--)-1!==t[r].indexOf("$")&&t.splice(r,1);return t}}();class SFModel extends HTMLElement{constructor(){super(),this.sf$firstInit=!0}connectedCallback(){if(void 0!==this.sf$destroying&&clearTimeout(this.sf$destroying),void 0!==this.sf$firstInit){var e=this;delete this.sf$firstInit,setTimeout(function(){if(sf.loader.DOMWasLoaded)return sf.model.init(e,e.getAttribute("name"));sf.loader.onFinish(function(){sf.model.init(e,e.getAttribute("name"))})})}}disconnectedCallback(){var e=this;this.sf$destroying=setTimeout(function(){if(e.model.$el){var t=e.model.$el.indexOf(e);-1!==t&&e.model.$el.splice(t)}internal.model.removeModelBinding(e.model)},1e3)}}customElements.define("sf-m",SFModel),function(){var self=sf.model;function escapeEscapedQuote(e){return e.split('\\"').join("\\$%*").split("\\'").join("\\%$*")}function unescapeEscapedQuote(e){return e.split("\\$%*").join('\\"').split("\\%$*").join("\\'")}self.init=function(e,t){if(void 0===e.sf$controlled){e.sf$controlled=t;var r=e.model=sf.model.root[t]||sf.model(t);void 0===r.$el&&(r.$el=$()),r.$el.push(e),void 0!==sf.controller.pending[t]&&sf.controller.run(t),void 0!==r.init&&r.init(e);var n={repeat:[],input:[]};sf.model.parsePreprocess(sf.model.queuePreprocess(e,void 0,n),t),bindInput(n.input,r),repeatedListBinding(n.repeat,r)}};var processingElement=null,bindingEnabled=!1,scope=internal.model={};function trimIndentation(e){var t=e.split("\n",3);return void 0===(t=" "!==t[0][0]||"\t"!==t[0][0]?t[1]:t[0])?e:0===(t=t.length-t.trim().length)?e:e.replace(RegExp("^([\\t ]{"+t+"})","gm"),"")}var bracketMatch=/([\w\n.]*?[\S\s])\(/g,chackValidFunctionCall=sf.regex.validFunctionCall,localEval=function(script,_model_,_modelScope,_content_){var _result_="";try{if(!0===/@return /.test(script)){var _evaled_=eval("(function(){"+script.split("@return ").join("return ")+"})()");return void 0===_evaled_?_result_+"undefined":null===_evaled_?_result_+"null":void 0!==_evaled_.onclick?_evaled_:_result_+_evaled_}var _evaled_=eval(script)}catch(e){return console.groupCollapsed("%c<-- Expand the template error","color: yellow"),console.log(trimIndentation(processingElement.outerHTML).trim()),console.log("%c"+trimIndentation(script).trim(),"color: yellow"),console.groupEnd(),console.error(e),"#TemplateError"}return""!==_result_?_result_:_evaled_};function modelToViewBinding(e,t,r,n,o){var i;if(void 0===e.sf$bindedKey&&initBindingInformation(e),void 0!==e.sf$bindedKey[t])return-1===(i=e.sf$bindedKey[t]).indexOf(r)&&i.push(r),void(void 0!==n&&(void 0===i.input?(i.input=[n],i.input.type=o):i.input.push(n)));(e.sf$bindedKey[t]=[r],void 0!==n)&&((i=e.sf$bindedKey[t]).input=[n],i.input.type=o);if(void 0===Object.getOwnPropertyDescriptor(e,t).set){var l=e[t];Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(e){return l},set:function(r){if(l!==r){var n=void 0;if(!1===inputBoundRunning){var o=e["on$"+t],i=e["out$"+t];try{void 0!==o&&(n=o(l,r)),void 0!==i&&(n=i(l,r))}catch(e){console.error(e)}}var a=e["m2v$"+t];void 0!==a?void 0!==(n=a(l,r))?(l=n,a=r):(a=void 0,l=r):l=void 0!==n?n:r;for(var s=e.sf$bindedKey[t],u=0;u<s.length;u++)inputBoundRun!==s[u]?syntheticTemplate(s[u].element,s[u].template,void 0,e):s[u](l,s.input);void 0!==a&&(l=a)}return inputBoundRunning=!1,l}})}}internal.model.removeModelBinding=function(e){if(void 0!==e){var t=e.sf$bindedKey,r=null;for(var n in t)if(null!==t[n]){for(var o=t[n].length-1;o>=0;o--)t[n][o].element.isConnected||t[n].splice(o,1);if(void 0!==t[n].input)for(o=t[n].input.length-1;o>=0;o--)t[n].input[o].isConnected||t[n].input.splice(o,1);if(e[n].constructor===String||e[n].constructor===Number||e[n].constructor===Boolean);else{if(e[n].constructor!==Array)continue;e[n].$virtual&&(e[n].$virtual.destroy(),delete e[n].$virtual),r=e[n].splice("obtain"),delete e[n],e[n]=r}if(0===t[n].length){if(delete t[n],void 0===Object.getOwnPropertyDescriptor(e,n))continue;r=e[n];delete e[n],e[n]=r}}}},self.bindElement=function(e,t,r){var n=self.root[t];void 0===r&&(r=self.extractPreprocess(e,null,n),templateParser(r,n,!0),delete r.addresses,e.parentNode.replaceChild(r.html,e),e=r.html);for(var o=r.modelRef_array,i=0;i<o.length;i++){var l=o[i][0];void 0===n[l]&&(n[l]=""),modelToViewBinding(n,l,{element:e,template:r})}};var callInputListener=function(e,t,r){var n=e["on$"+t],o=e["v2m$"+t],i=void 0,l=void 0;if(void 0!==n||void 0!==o){var a=e[t];null!=a&&a.constructor===Array&&(a=a.slice(0));try{void 0!==o&&(i=o(a,r)),void 0!==n&&(l=n(a,r))}catch(e){console.error(e)}}return void 0!==l?l:i},inputBoundRunning=!1,inputTextBound=function(e){if(!0!==e.fromSFFramework){var t=inputBoundRunning=e.target;t.viewInputted=!0;var r=t.typeData===Number?Number(t.value):t.value,n=callInputListener(t.sfModel,t.sfBounded,r);t.sfModel[t.sfBounded]=void 0!==n?n:r}},inputFilesBound=function(e){if(!0!==e.fromSFFramework){var t=e.target;callInputListener(t.sfModel,t.sfBounded,t.files),t.sfModel[t.sfBounded]=t.files}},inputCheckBoxBound=function(e){if(!0!==e.fromSFFramework){var t=inputBoundRunning=e.target;t.viewInputted=!0;var r=t.typeData===Number?Number(t.value):t.value,n=callInputListener(t.sfModel,t.sfBounded,r);void 0!==n&&(r=n);var o=t.sfModel,i=o[t.sfBounded].constructor;if(i===Array){var l=o[t.sfBounded].indexOf(r);-1===l&&!0===t.checked?o[t.sfBounded].push(r):-1!==l&&!1===t.checked&&o[t.sfBounded].splice(l,1)}else i===Boolean||t.typeData===Boolean?o[t.sfBounded]=t.checked:o[t.sfBounded]=r}},inputSelectBound=function(e){if(!0!==e.fromSFFramework){var t=inputBoundRunning=e.target;t.viewInputted=!0;var r=t.typeData;if(!0===t.multiple)for(var n=t.selectedOptions,o=[],i=0;i<n.length;i++)o.push(r===Number?Number(n[i].value):n[i].value);else o=r===Number?Number(t.selectedOptions[0].value):t.selectedOptions[0].value;var l=callInputListener(t.sfModel,t.sfBounded,o);t.sfModel[t.sfBounded]=void 0!==l?l:o}},assignElementData={select:function(e,t){for(var r=t.options,n=t.typeData,o=e.constructor===Array&&e,i=0,l=r.length;i<l;i++)!1===o?n===String?r[i].selected=r[i].value===e:r[i].selected=r[i].value==e:r[i].selected=-1!==o.indexOf(n===Number?Number(r[i].value):r[i].value)},checkbox:function(e,t){e.constructor===Array?t.checked=-1!==e.indexOf(t.typeData===Number?Number(t.value):t.value):e.constructor===Boolean?t.checked=Boolean(e):t.typeData===String?t.checked=t.value===e:t.checked=t.value==e}},inputBoundRun=function(e,t){if(0===e||e)for(var r=0;r<t.length;r++)if(inputBoundRunning!==t[r]){var n=new Event("change");n.fromSFFramework=!0,1===t.type?t[r].value=e:2===t.type?assignElementData.select(e,t[r]):3===t.type?t[r].checked=e==t[r].value:4===t.type&&assignElementData.checkbox(e,t[r]),t[r].dispatchEvent(n)}},triggerInputEvent=function(e){!0!==e.fromSFFramework&&(!0!==e.target.viewInputted?e.target.dispatchEvent(new Event("input")):e.target.viewInputted=!1)},elementBoundChanges=function(e,t,r,n){void 0===e.sf$bindedKey&&initBindingInformation(e);var o=e[t],i=0,l=null;if(null!=o&&(l=o.constructor),"number"===(r.getAttribute("typedata")||"").toLowerCase()&&(l=Number),r.typeData=l,$.on(r,"change",triggerInputEvent),"TEXTAREA"===r.tagName)$.on(r,"input",inputTextBound),r.value=o,i=1;else if(void 0!==r.selectedOptions)$.on(r,"input",inputSelectBound),i=2,assignElementData.select(o,r);else{if("radio"===(i=r.type.toLowerCase()))$.on(r,"input",inputTextBound),i=3,r.checked=o==r.value;else if("checkbox"===i)$.on(r,"input",inputCheckBoxBound),i=4,assignElementData.checkbox(o,r);else{if("file"===i)return void $.on(r,"input",inputFilesBound);$.on(r,"input",inputTextBound),r.value=o,i=1}}!0!==n&&modelToViewBinding(e,t,inputBoundRun,r,i)},bindInput=internal.model.bindInput=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=!1,i=n.getAttribute("sf-bind");if(null===i&&(i=n.getAttribute("sf-into"),o=!0),""===i&&(i=n.getAttribute("name")),null!==i){if(void 0===t[i])return void console.error("Can't get property \""+i+'" on model',t);n.sfBounded=i,n.sfModel=t,!1===o?(n.setAttribute("sf-bound",""),n.removeAttribute("sf-bind")):(n.setAttribute("sf-bound",""),n.removeAttribute("sf-into")),elementBoundChanges(t,i,n,o)}else console.error("Property key to be bound wasn't be found",n)}},dataParser=function(e,t,r,n,o,i){o||(o="");var l=self.modelKeys(n).join("|");if(0===l.length)throw"'1' model was not found";var a=RegExp(sf.regex.strictVar+"("+l+")\\b","g");if(r)var s=RegExp(sf.regex.strictVar+r+"\\.\\b","g");if(bindingEnabled=!0,"#noEval"===o)var u=[],f=i.length;var d=e.replace(sf.regex.dataParser,function(e,l){if(l=avoidQuotes(l,function(e){return e=e.split("&amp;").join("&").split("&lt;").join("<").split("&gt;").join(">"),r&&(e=e.replace(s,function(e){return"_model_."+e[0].slice(1)})),e.replace(a,function(e,t){return"_modelScope."+t})}),"#noEval"===o){l=l.trim();var d=u.indexOf(l);return-1===d?(u.push(l),i.push({type:REF_DIRECT,data:[l,t,n]}),"{{%="+(u.length+f-1)):"{{%="+(d+f)}return(l=""+localEval.apply(self.root,[o+l,t,n])).replace(sf.regex.escapeHTML,function(e){return"&#"+e.charCodeAt(0)+";"})});return"#noEval"===o&&(n=u=t=r=o=a=s=e=null,setTimeout(function(){d=null})),d},uniqueDataParser=function(e,t,r,n,o){var i={length:0,_modelScope:n,take:function(e,n){if(null===e)return dataParser(this[n],t,r,this._modelScope);var o='"use strict";var ',i=!0;for(var l in e){if("string"==typeof e[l])e[l]='"'+e[l].split('"').join('\\"')+'"';else{if("_model_"===l){t=e[l];continue}"object"==typeof e[l]&&(e[l]=JSON.stringify(e[l]))}i||(o+=","),o+=l+" = "+e[l],i=!1}return!0===i&&(o=o.replace("var ","")),o=o.split("(").join("&#40;").split(")").join("&#41;"),dataParser(this[n],t,r,this._modelScope,o+";")}};e=e.replace(/{\[([\s\S]*?)\]}/g,function(e,t){return!1===/{{.*?}}/.test(t)?"_result_ += '"+t.split("'").join("\\'")+"'":(i[i.length]=t,i.length++,"_result_ += _content_.take(&VarPass&, "+(i.length-1)+");")});var l=self.modelKeys(n).join("|");if(0===l.length)throw"'1' model was not found";var a=RegExp(sf.regex.strictVar+"("+l+")\\b","g");if(r)var s=RegExp(sf.regex.strictVar+r+"\\.\\b","g");if("#noEval"===o)var u=[];var f=e.replace(sf.regex.uniqueDataParser,function(e,l){l=avoidQuotes(l,function(e){return e=e.split("&amp;").join("&").split("&lt;").join("<").split("&gt;").join(">"),r&&(e=e.replace(s,function(e){return"_model_."+e[0].slice(1)})),e.replace(a,function(e,t){return"_modelScope."+t})});for(var f=!1,d=/(var|let)([\w,\s]+)(?=\s(?==|in|of))/g,c=[],p=null;null!==(p=d.exec(l));)c.push(p[2]);if(null===t&&"#noEval"===o&&c.push("_model_"),0!==c.length){for(var v=[],h=0;h<c.length;h++)c[h].replace(/([\n\t\r]|  )+/g,"").split(",").forEach(function(e){v.push(e)});c=v;for(h=0;h<c.length;h++)c[h]+=":typeof "+c[h]+'!=="undefined"?'+c[h]+":void 0";c=0===c.length?"null":"{"+c.join(",")+"}",l=l.split("&VarPass&").join(c)}else l=l.split("&VarPass&").join("null");if(1!==(f=l.split("@if ")).length){f=f[1].split(":");var g=function(e){var t=null;2===(t=(e=(e=e.join(":")).split("@elseif "))[e.length-1].split("@else")).length?(e[e.length-1]=t[0],t=(t=t.pop()).substr(t.indexOf(":")+1)):t=null;for(var r={if:e.shift(),elseIf:[],elseValue:t},n=0;n<e.length;n++){var o=e[n].split(":");r.elseIf.push([o.shift(),o.join(":")])}return r};if("#noEval"===o){var m=f.shift(),b=g(f);b.type=REF_IF,b.data=[null,t,n,i],b.if=[m.trim(),b.if.trim()],null!==b.elseValue&&(b.elseValue=b.elseValue.trim());for(h=0;h<b.elseIf.length;h++)b.elseIf[h][0]=b.elseIf[h][0].trim(),b.elseIf[h][1]=b.elseIf[h][1].trim();return u.push(b),"{{%%="+(u.length-1)}var y=[f[0],t,n,i];return localEval.apply(self.root,y)?(f.shift(),y[0]=f.join(":"),localEval.apply(self.root,y)):(f.shift(),elseIfHandle(g(f),y))}if(1!==(f=l.split("@exec")).length){y=[f[1],t,n,i];return"#noEval"===o?(u.push({type:REF_EXEC,data:y}),"{{%%="+(u.length-1)):l=localEval.apply(self.root,y)}return""});return"#noEval"===o?(n=o=a=s=e=null,setTimeout(function(){f=null}),[f,u,i]):f};self.extractPreprocess=function(e,t,r){for(var n=e.querySelectorAll("[sf-repeat-this]"),o=0;o<n.length;o++){(u=n[o]).insertAdjacentHTML("afterEnd","<sfrepeat-this></sfrepeat-this>"),u.remove()}var i=e.outerHTML;null!==t&&(i=i.split("#"+t).join("_model_"));var l=(i=uniqueDataParser(i,null,t,r,"#noEval"))[1],a=i[2];i=dataParser(i[0],null,t,r,"#noEval",l),internal.component.skip=!0,i=$.parseElement(i)[0],internal.component.skip=!1;var s=i.querySelectorAll("sfrepeat-this");for(o=0;o<s.length;o++){var u;(u=s[o]).parentNode.replaceChild(n[o],u)}var f={repeat:[],input:[]},d=self.queuePreprocess(i,!0,f).reverse(),c=[];function p(e){for(var t=e.attributes,r=[],n=0,o=0;o<t.length;o++){var i=t[o].value.split("{{%=");if(1!==i.length){if(":"===t[o].name[0]){var l={name:t[o].name.slice(1),value:t[o].value};e.removeAttribute(t[o].name),e.setAttribute(l.name,"")}else l={name:t[o].name,value:t[o].value};n=[],""===(i=l.value.replace(/{{%=([0-9]+)/g,function(e,t){return n.push(Number(t)),""}))&&1===n.length?l.direct=n[0]:l.parse_index=n,r.push(l)}}return r}var v=p(i);0!==v.length&&c.push({nodeType:1,address:[0],attributes:v});for(o=0;o<d.length;o++){var h={nodeType:d[o].nodeType};if(1===h.nodeType)h.attributes=p(d[o]),h.address=$.getSelector(d[o],!0);else if(3===h.nodeType){var g=d[o].textContent,m=[];if(g.replace(/{{%%=([0-9]+)/gm,function(e,t){m.push(Number(t))}),0!==m.length){g=g.split(/{{%%=[0-9]+/gm);for(var b=0;b<g.length;b++)g[b]=trimIndentation(g[b]).trim();d[o].textContent=g.shift();var y=d[o].parentNode,C=d[o].nextSibling,E=null;0!==m.length&&0!==d[o].textContent.length?E=$.getSelector(d[o],!0):null!==d[o].previousSibling&&(E=$.getSelector(d[o].previousSibling,!0));var O=[];for(b=0;b<m.length;b++){var w=document.createComment("");if(y.insertBefore(w,C),O.push({nodeType:-1,parse_index:m[b],startFlag:E,address:$.getSelector(w,!0)}),g[b]){var x=document.createTextNode(g[b]);y.insertBefore(x,C),b+1<m.length&&(E=$.getSelector(x,!0))}else null!==E&&b+1<m.length&&(E=E.slice())[E.length-1]++}if(Array.prototype.push.apply(c,O),""===d[o].textContent){d[o].remove();for(b=0;b<O.length;b++){var S=O[b].address;S[S.length-1]--}continue}if(-1===d[o].textContent.search(/{{%=[0-9]+/))continue}m=[],""===(g=d[o].textContent.replace(/{{%=([0-9]+)/gm,function(e,t){return m.push(Number(t)),""}))&&1===m.length?h.direct=m[0]:(h.value=d[o].textContent,h.parse_index=m),h.address=$.getSelector(d[o],!0)}c.push(h)}var T=function(){if(null===t)var e=RegExp("(?:{{.*?\\b|_modelScope\\.)("+self.modelKeys(r).sort(function(e,t){return t.length-e.length}).join("|")+")(\\b.*?}}|)","g");else e=sf.regex.arrayItemsObserve;for(var n={},o=0;o<l.length;o++){var i=l[o];if(0!==i.type){if(1===i.type){var s=i.if.join(";");null!==i.elseValue&&(s+=";"+i.elseValue);for(var u=0;u<i.elseIf.length;u++)s+=i.elseIf[u].join(";")}else 2===i.type&&(s=i.data[0]);(s=s.replace(/_result_ \+= _content_\.take\(.*?, ([0-9]+)\);/g,function(e,t){return a[t]})).split('"').join("'").replace(e,function(e,t){t=t.replace(/\['(.*?)'\]/g,function(e,t){return"."+t}),void 0===n[t]?n[t]=[o]:-1===n[t].indexOf(o)&&n[t].push(o)})}else i.data[0].split('"').join("'").replace(e,function(e,t){t=t.replace(/\['(.*?)'\]/g,function(e,t){return"."+t}),void 0===n[t]?n[t]=[o]:-1===n[t].indexOf(o)&&n[t].push(o)})}return n}(),L=Object.keys(T),D=[];for(o=0;o<L.length;o++)D.push([L[o],L[o].split(".")]);var M=f.input;for(o=0;o<M.length;o++)M[o]=$.getSelector(M[o],!0);var P=f.repeat;for(o=0;o<P.length;o++)P[o]=$.getSelector(P[o],!0);return{html:i,parse:l,addresses:c,modelReference:T,modelRef_array:D,specialElement:f}};var enclosedHTMLParse=!1,excludes={HTML:1,HEAD:1,STYLE:1,LINK:1,META:1,SCRIPT:1,OBJECT:1,IFRAME:1};function initBindingInformation(e){void 0===e.sf$bindedKey&&Object.defineProperty(e,"sf$bindedKey",{configurable:!0,enumerable:!1,writable:!0,value:{}})}self.queuePreprocess=function(e,t,r,n){var o=(e||document.body).childNodes,i=!1;void 0===n&&(n=new Set,i=!0);for(var l=o.length-1;l>=0;l--){var a=o[l];if(void 0===excludes[a.nodeName])if(1===a.nodeType){if(!0===enclosedHTMLParse)continue;if("SF-M"===a.tagName||a.sf$controlled)continue;var s=a.attributes;if(void 0!==s["sf-bind-list"])continue;if(void 0!==s["sf-repeat-this"]){r.repeat.push(a);continue}if(void 0===s["sf-into"]&&void 0===s["sf-bind"]||r.input.push(a),void 0!==internal.component[a.tagName])continue;for(var u=0;u<s.length;u++)if(-1!==s[u].value.indexOf("{{")){n.add(a);break}self.queuePreprocess(a,t,r,n)}else if(3===a.nodeType){if(0===a.textContent.length){a.remove();continue}var f=a.textContent.indexOf("{[");if(-1!==f)enclosedHTMLParse=!1;else if(!0===enclosedHTMLParse)continue;var d=a.textContent.indexOf("]}");if(-1!==d&&(-1===f||f>d)){enclosedHTMLParse=!0;continue}if(-1!==a.nodeValue.indexOf("{{")){if(void 0===t){n.has(a.parentNode)||n.add(a.parentNode);break}n.has(a)||n.add(a)}}}if(i)return Array.from(n)},self.parsePreprocess=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=processingElement=e[n];(internal.modelPending[t]||void 0===self.root[t])&&self(t);var i=self.root[t];if(3!==o.nodeType||-1!==r.indexOf(o.parentElement)){if(-1!==o.innerHTML.indexOf("sf-bind-list"))return console.error("Can't parse element that already bound"),void console.log(o);if(!1===o.hasAttribute("sf-bind-ignore"))self.bindElement(o,t);else{var l=uniqueDataParser(o.innerHTML,i,!1,t);o.innerHTML=dataParser(l,i,!1,t);for(var a=o.attributes,s=0;s<a.length;s++)if(-1!==a[s].value.indexOf("{{")){var u=a[s];u.value=dataParser(u.value,i,!1,t)}}}else self.bindElement(o.parentElement,t),r.push(o.parentElement)}};var loopParser=function(e,t,r,n){var o=r.split(" in "),i=o[0],l=e[o[1]];void 0===l&&(l=e[o[1]]=[]);var a=void 0!==internal.component[t.tagName]&&window["$"+capitalizeLetters(t.tagName.toLowerCase().split("-"))];if(t.setAttribute("sf-bind-list",o[1]),processingElement=t,t=self.extractPreprocess(t,i,e),2===o.length){for(var s=document.createElement("div"),u=0;u<l.length;u++){var f;if(a)(f=new a(l[u])).setAttribute("sf-bind-list",o[1]);else syntheticCache(f=templateParser(t,l[u]),t,l[u]);s.appendChild(f)}if(void 0===e.sf$bindedKey&&initBindingInformation(e),void 0===e.sf$bindedKey[o[1]]&&(e.sf$bindedKey[o[1]]=null),Object.defineProperty(e,o[1],{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){return 0===e.length?l.splice(0):l.replace(e,!0)}}),bindArray(t,l,i,e,o[1],n,s),void 0===l.$virtual){for(var d=s.children,c=(u=0,d.length);u<c;u++)n.appendChild(d[0]);s.remove(),s=null}}},repeatedListBinding=internal.model.repeatedListBinding=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.hasAttribute("sf-repeat-this")){var o=n.parentElement;if(o.classList.contains("sf-virtual-list")){var i=document.createElement(n.tagName);i.classList.add("virtual-spacer");var l=i.cloneNode(!0);i.classList.add("ceiling"),o.insertBefore(i,o.firstElementChild),l.classList.add("floor"),o.appendChild(l)}var a=n.nextElementSibling;null!==a&&n!==a||(a=!1);var s=n.previousElementSibling;null!==s&&n!==s||(s=!1);var u=n.getAttribute("sf-repeat-this");n.removeAttribute("sf-repeat-this"),loopParser(t,n,u,o),n.remove()}}},bindArray=function(e,t,r,n,o,i,l){var a=["pop","push","splice","shift","unshift","swap","move","replace","softRefresh","hardRefresh"],s=-1,u=i.children,f="on$"+o,d=n[f],c=function(r,o,l,a){if(t.$virtual)var c=t.$virtual.DOMCursor+t.$virtual.preparedLength;if("clear"===o){if(t.$virtual)var p=[i.firstElementChild,i.lastElementChild];return i.textContent="",void(t.$virtual&&(i.appendChild(p[0]),i.appendChild(p[1]),t.$virtual.dom.textContent="",p[1].style.height=p[0].style.height=0,t.$virtual.reset(!0)))}if(t.$virtual){var v=t.$virtual.elements();clearTimeout(s),s=setTimeout(function(){t.$virtual&&t.$virtual.reinitScroll()},100)}else v=u;if("hardRefresh"!==o){if(void 0===d&&(d=n[f]),"swap"===o||"move"===o){if("move"===o){(E=t.length-r-a)<0&&(a+=E);var h=document.createElement("div");for(L=0;L<a;L++)h.appendChild(v[r+L]);var g=v[l]||null,m=g&&g.parentNode;!1===m&&(m=t.$virtual&&t.length>=c?t.$virtual.dom:i);for(L=0;L<a;L++)m.insertBefore(h.firstElementChild,g),void 0!==d&&d.update&&d.update(v[r+L],"move");return}if(r>l){var b=v[l];l=v[r],r=b}else r=v[r],l=v[l];var y=l.nextSibling,C=l.parentNode;return r.parentNode.insertBefore(l,r.nextSibling),C.insertBefore(r,y),void(void 0!==d&&d.update&&(d.update(v[l],"swap"),d.update(v[r],"swap")))}if("removeRange"!==o){if("remove"!==o){if("update"===o){var E;void 0===r?(r=0,l=t.length):void 0===l?l=r+1:l<0?l=t.length+l:l+=r,(E=t.length-l)<0&&(l+=E);for(L=r;L<l;L++){var $=v[L];if(void 0===$||void 0===t[L])break;syntheticCache(M=templateParser(e,t[L]),e,t[L]),t.$virtual?$.parentNode.replaceChild(M,$):(i.replaceChild(M,$),void 0!==d&&d.update&&d.update(M,"replace"))}}var O=t[r];if(void 0!==O){if(syntheticCache(M=templateParser(e,O),e,O),"insertAfter"===o){if(0===v.length)i.insertBefore(M,i.lastElementChild);else(w=v[r-1]).parentNode.insertBefore(M,w.nextSibling);void 0!==d&&d.create&&d.create(M)}else if("prepend"===o){var w;void 0!==(w=v[0])?(w.parentNode.insertBefore(M,w),void 0!==d&&d.create&&d.create(M)):o="append"}if("append"===o){if(t.$virtual)return 0===r?i.insertBefore(M,i.lastElementChild):r>=c?(null===t.$virtual.vCursor.floor&&(t.$virtual.vCursor.floor=M),t.$virtual.dom.appendChild(M)):v[r-1].insertAdjacentElement("afterEnd",M),void(void 0!==d&&d.create&&d.create(M));i.appendChild(M),void 0!==d&&d.create&&d.create(M)}}}else if(v[r]){var x=v[r];if(void 0!==d&&d.remove){var S=!1,T=function(){S||(S=!0,x.remove())};d.remove(v[r],T)||T()}else x.remove()}}else for(L=r;L<l;L++)v[L].remove()}else{for(var L=r;L<v.length;L++)v[L].remove();if(t.$virtual)var D=t.$virtual.vCursor;for(var L=r;L<t.length;L++){var M=templateParser(e,t[L]);t.$virtual?null===D.floor&&L<c?i.insertBefore(M,i.lastElementChild):t.$virtual.dom.appendChild(M):i.appendChild(M),syntheticCache(M,e,t[L])}t.$virtual&&t.$virtual.refreshVirtualSpacer&&t.$virtual.refreshVirtualSpacer(t.$virtual.DOMCursor)}},p=function(e,r){Object.defineProperty(e,r,{enumerable:!1,configurable:!0,value:function(){var e=void 0,n=this.length;if("move"===r){var o=arguments[0],i=arguments[1];if(o===i)return;var l=arguments[2]||1;return c(o,"move",i,l),(e=Array.prototype.splice.apply(this,[o,l])).unshift(i,0),Array.prototype.splice.apply(this,e),void(t.$virtual&&t.$virtual.reinitCursor())}if("swap"===r){var a=arguments[0],s=arguments[1];if(a===s)return;c(a,"swap",s);e=this[a];return this[a]=this[s],void(this[s]=e)}if("replace"===r){if(t.$virtual&&t.$virtual.resetViewport(),arguments[0].length>=n&&0!==n){var u=n,f=arguments[0];for(a=0;a<n&&f[a]===this[a];a++)u--;if(0===u){if(f.length===n)return;return(e=arguments[0].slice(n)).unshift(n,0),void this.splice.apply(this,e)}if(u!==n){if(!0===arguments[1])(e=arguments[0].slice(a)).unshift(a,n-a),Array.prototype.splice.apply(this,e),t.refresh(a,n);return}}if(0===n)return Array.prototype.push.apply(this,arguments[0]),void c(0,"hardRefresh");e=[0,n];return Array.prototype.push.apply(e,arguments[0]),Array.prototype.splice.apply(this,e),!0!==arguments[1]?(c(0,"clear"),c(0,"hardRefresh")):(this.length<n&&c(this.length,"removeRange",n),t.refresh(0,this.length),t.$virtual&&t.$virtual.refreshVirtualSpacer&&t.$virtual.refreshVirtualSpacer(t.$virtual.DOMCursor)),t.$virtual&&t.$virtual.reset(),this}if("splice"===r&&0===arguments[0]&&void 0===arguments[1])return c(0,"clear"),Array.prototype.splice.apply(this,arguments);if(Array.prototype[r]&&(e=Array.prototype[r].apply(this,arguments)),"pop"===r)c(this.length,"remove");else if("push"===r)if(1===arguments.length)c(n,"append");else for(a=0;a<arguments.length;a++)c(n+a,"append");else if("shift"===r)c(0,"remove"),t.$virtual&&t.$virtual.DOMCursor>0&&(t.$virtual.DOMCursor--,t.$virtual.reinitCursor());else if("splice"===r){if(0===arguments[0]&&void 0===arguments[1])return e;var d=arguments[0];d<0&&(d=n+d);var p=arguments[1];p||0===p||(p=this.length);for(a=p-1;a>=0;a--)c(d+a,"remove");if(t.$virtual&&t.$virtual.DOMCursor>=d&&(t.$virtual.DOMCursor=d-p),arguments.length>=3){p=arguments.length-2,d>=this.length&&(d=this.length-1);for(a=0;a<p;a++)c(d+a,"insertAfter");t.$virtual&&t.$virtual.DOMCursor>=d&&(t.$virtual.DOMCursor+=p)}}else if("unshift"===r){if(1===arguments.length)c(0,"prepend");else for(a=arguments.length-1;a>=0;a--)c(a,"prepend");t.$virtual&&0!==t.$virtual.DOMCursor&&(t.$virtual.DOMCursor+=arguments.length,t.$virtual.reinitCursor())}else"softRefresh"===r?(c(arguments[0],"update",arguments[1]),t.$virtual&&t.$virtual.DOMCursor&&t.$virtual.reinitCursor()):"hardRefresh"===r&&(c(arguments[0]||0,"hardRefresh"),t.$virtual&&(t.$virtual.DOMCursor=arguments[0]||0));return e}})};i&&i.classList.contains("sf-virtual-list")?(delete t.$virtual,t.$virtual={},t.$virtual.dom=l,void 0!==d?t.$virtual.callback=d:t.$virtual.callback_={ref:n,var:f},i.replaceChild(e.html,u[1]),sf.internal.virtual_scroll.handle(t,i),e.html.remove()):setTimeout(function(){var e=internal.findScrollerElement(i);if(null!==e){var t=getComputedStyle(e);"hidden"!==t.backfaceVisibility&&-1===t.overflow.indexOf("hidden")&&(e.classList.add("sf-scroll-element"),internal.addScrollerStyle())}},1e3);for(var v=0;v<a.length;v++)p(t,a[v]);hiddenProperty(t,"$replace",function(r,n,o,i){var l=t.getElement(r).sf$elementReferences,a=e.modelReference[n];if(void 0!==a){for(var s=0;s<l.length;s++)if(void 0!==l[s].textContent&&void 0!==l[s].ref.direct&&-1!==a.indexOf(l[s].ref.direct)){var u=l[s].textContent,f=$.escapeText(t[r][n]).replace(o,i);if(t[r][n]===f)continue;for(u.textContent="",u.sf$haveChilds=!0,f=$.parseElement(f,!0);u.previousSibling&&u.previousSibling.sf$childRoot===u;)u.previousSibling.remove();var d=u.parentNode;for(s=0;s<f.length;s++)f[s].sf$childRoot=u,d.insertBefore(f[s],u)}}else console.error("Can't found binding for '"+n+"'")}),hiddenProperty(t,"refresh",function(r,n,o){void 0===r||r.constructor===String?(o=r,r=0,n=t.length):void 0===n?n=r+1:n.constructor===String?(o=n,n=r+1):n<0?n=t.length+n:n+=r;var i=t.length-n;i<0&&(n+=i);for(var l=r;l<n;l++){var a=t.getElement(l);if(void 0===a){t.hardRefresh(l);break}!1!==syntheticTemplate(a,e,o,t[l])&&(a.model!==t[l]&&(a.model=t[l]),void 0!==d&&d.update&&d.update(a,"replace"))}});var h=null;t.$virtual&&(h=t.$virtual.dom.children),hiddenProperty(t,"getElement",function(e){if(null!==h){if(e<t.$virtual.DOMCursor)return h[e];e-=t.$virtual.DOMCursor;var r=i.childElementCount-2;return e<r?u[e+1]:h[e-r+t.$virtual.DOMCursor]}return u[e]})};function elseIfHandle(e,t){for(var r=e.elseIf,n=0;n<r.length;n++)if(t[0]=r[n][0],localEval.apply(self.root,t))return t[0]=r[n][1],localEval.apply(self.root,t);return null===e.elseValue?"":(t[0]=e.elseValue,localEval.apply(self.root,t))}var templateParser_regex=/{{%=([0-9]+)/gm,REF_DIRECT=0,REF_IF=1,REF_EXEC=2,templateExec=function(e,t,r){for(var n={},o=null,i=0;i<e.length;i++)if(void 0===r||-1!==r.indexOf(i)){var l=e[i];if(l.data[1]=t,l.type!==REF_DIRECT)if(l.type!==REF_EXEC){if(l.type===REF_IF){var a=l.data;if(n[i]={type:l.type,data:""},a[0]=l.if[0],!localEval.apply(self.root,a)){n[i].data=elseIfHandle(l,a);continue}a[0]=l.if[1],n[i].data=localEval.apply(self.root,a)}}else n[i]={type:l.type,data:localEval.apply(self.root,l.data)};else void 0===(o=localEval.apply(self.root,l.data))?o="":(o.constructor===Object&&(o=JSON.stringify(o)),o.constructor!==String&&(o=String(o))),n[i]={type:l.type,data:o}}return n},templateParser=internal.model.templateParser=function(e,t,r){processingElement=e.html;for(var n=!0===r?e.html:e.html.cloneNode(!0),o=e.addresses,i=templateExec(e.parse,t),l=[],a=[],s=0;s<o.length;s++){var u=o[s],f=$.childIndexes(u.address,n);if(1!==u.nodeType){if(3===u.nodeType){c=f;if(l.push({textContent:c,ref:u}),void 0!==u.direct){c.textContent=i[u.direct].data;continue}c.textContent=c.textContent.replace(templateParser_regex,function(e,t){return i[t].data})}if(-1===u.nodeType){var d={dynamicFlag:f,direct:u.parse_index,parentNode:f.parentNode,startFlag:u.startFlag&&$.childIndexes(u.startFlag,n)};l.push(d),a.push(d)}}else for(var c=u.attributes,p=0;p<c.length;p++){var v=c[p],h="value"===v.name&&("TEXTAREA"===f.tagName||"INPUT"===f.tagName&&!1===/checkbox|radio|hidden/.test(f.type));if(l.push({attribute:!0===h?f:f.attributes[v.name],ref:v}),void 0===v.direct)if("value"===v.name&&!0===h){var g=f.value;f.removeAttribute("value"),f.value=g,f.value=f.value.replace(templateParser_regex,function(e,t){return i[t].data})}else f.setAttribute(v.name,(v.value||f.value).replace(templateParser_regex,function(e,t){return i[t].data}));else{if("value"===v.name&&!0===h){f.value=i[v.direct].data,f.removeAttribute("value");continue}f.setAttribute(v.name,i[v.direct].data)}}}n.model=t,n.sf$elementReferences=l;for(s=0;s<a.length;s++){u=a[s];var m=i[u.direct].data;if(void 0===m.onclick){m=$.parseElement(i[u.direct].data,!0);for(p=0;p<m.length;p++)u.parentNode.insertBefore(m[p],u.dynamicFlag)}else u.parentNode.insertBefore(m,u.dynamicFlag)}if(0!==e.specialElement.input.length){var b=e.specialElement.input,y=[];for(s=0;s<b.length;s++)y.push($.childIndexes(b[s],n));bindInput(y,t)}if(0!==e.specialElement.repeat.length){var C=e.specialElement.repeat,E=[];for(s=0;s<C.length;s++)E.push($.childIndexes(C[s],n));repeatedListBinding(E,t)}return n};function syntheticCache(e,t,r){void 0===e.sf$cache&&(e.sf$cache={});for(var n=e.sf$cache,o=t.modelRef_array,i=0;i<o.length;i++){var l=o[i];n[l[0]]=deepProperty(r,l[1])}}function syntheticTemplate(e,t,r,n){var o=e.sf$cache,i=t.modelRef_array;if(void 0!==r){if(void 0===(s=t.modelReference[r])||0===s.length)return console.log(e,t,r,n),console.error("Failed to run syntheticTemplate because property '"+r+"' is not observed"),!1;if(o)for(var l=0;l<i.length;l++){if((u=i[l])[0]===r){var a=deepProperty(n,u[1]);o[u[0]]!==a&&(o[u[0]]=a)}}}else{var s=[];for(l=0;l<i.length;l++){var u=i[l];if(void 0!==o){a=deepProperty(n,u[1]);o[u[0]]!==a&&(Array.prototype.push.apply(s,t.modelReference[u[0]]),o[u[0]]=a)}else Array.prototype.push.apply(s,t.modelReference[u[0]])}if(0===s.length)return!1}var f=templateExec(t.parse,n,s);function d(e){for(var r=!1,o=0;o<e.length;o++)if(-1!==s.indexOf(e[o])){r=!0;break}if(!1===r)return!1;var i=[];for(o=0;o<e.length;o++)void 0===f[e[o]]&&i.push(e[o]);return Object.assign(f,templateExec(t.parse,n,i)),!0}var c=e.sf$elementReferences,p=!1;for(l=0;l<c.length;l++){var v=c[l];if(void 0===v.dynamicFlag)if(void 0===v.textContent){if(void 0!==v.attribute){if(void 0!==v.ref.parse_index){if(!0===d(v.ref.parse_index)){h=v.ref.value.replace(templateParser_regex,function(e,t){return f[t].data});if(v.attribute.value===h)continue;v.attribute.value=h,p=!0}continue}if(f[v.ref.direct]){g=f[v.ref.direct].data;if(v.attribute.value==g)continue;v.attribute.value=g,p=!0}}}else{if(void 0!==v.ref.parse_index){if(!0===d(v.ref.parse_index)){var h=v.ref.value.replace(templateParser_regex,function(e,t){return f[t].data});if(v.textContent.textContent===h)continue;v.textContent.textContent=h,p=!0}continue}if(f[v.ref.direct]){var g=f[v.ref.direct].data;if(v.textContent.textContent===g)continue;var m=v.textContent;if(!0===m.sf$haveChilds)for(;m.previousSibling&&m.previousSibling.sf$childRoot===m;)m.previousSibling.remove();m.textContent=g}}else if(void 0!==f[v.direct]){for(var b=$.parseElement(f[v.direct].data,!0).reverse(),y=$.prevAll(v.dynamicFlag,v.startFlag),C=!1,E=0;E<b.length;E++){if(void 0===y[E]){C=!0;break}!1===y[E].isEqualNode(b[E])&&v.parentNode.replaceChild(b[E],y[E])}if(C)for(E=b.length-1;E>=0;E--)v.parentNode.insertBefore(b[E],v.dynamicFlag);else for(E=b.length;E<y.length;E++)y[E].remove();p=!0}}return p}}(),sf.API=function(e,t,r,n,o,i,l){var a=typeof r;"object"!==a&&"function"!==a&&(r={});var s={url:t,dataType:"json",method:"POST",success:function(e){!sf.API.onSuccess(e)&&n&&n(e,t),o&&o(200)},error:function(e,t){try{e=JSON.parse(e.response)}catch(e){}sf.API.onError(t,e),o&&o(t,e)}};return r.constructor!==FormData&&(s.contentType="application/json"),r.constructor===Function&&(o=n,n=r,r={}),r._method=e.toUpperCase(),i?s.beforeSend=function(e){e.setRequestHeader("X-Authorization","Bearer "+i),l&&l(e)}:void 0!==l&&(s.beforeSend=l),s.data=r,sf.ajax(s)},sf.API.onError=function(e,t){},sf.API.onSuccess=function(e){};var extendsAPI={get:function(e,t,r,n){return sf.API("get",this.url+e,t,r,n,this.accessToken)},post:function(e,t,r,n){return sf.API("post",this.url+e,t,r,n,this.accessToken)},delete:function(e,t,r,n){return sf.API("delete",this.url+e,t,r,n,this.accessToken)},put:function(e,t,r,n){return sf.API("put",this.url+e,t,r,n,this.accessToken)},upload:function(e,t,r,n,o){if(t.constructor!==FormData)return console.error("Parameter 2 must be a FormData");var i=void 0;return void 0!==o&&(i=function(e){e.upload.onprogress=function(e){e.lengthComputable&&o(e.loaded,e.total)}}),sf.API("post",this.url+e,t,r,n,this.accessToken,i)}};sf.API.instance=function(e){this.url=e,this.accessToken=!1,Object.assign(this,extendsAPI)},sf.controller=new function(){var self=this;self.pending={},self.active={},internal.controller={pending:[]},self.for=function(e,t){if(!sf.component.registered[e])return self.active[e]?t():void(self.pending[e]=t);sf.component.registered[e][1]=t},self.modelScope=function(e,t){var r=sf.controller.modelName(e);if(!r)throw"model or controller was not found";var n=e.getAttribute("sf-bind-list");if(n)var o=e;else null!==(o=$.parent(e,"[sf-bind-list]"))&&(n=o.getAttribute("sf-bind-list"));if(!n)return t?t(sf.model.root[r],-1):sf.model.root[r];var i=0;return n&&(i=$.prevAll(o,"[sf-bind-list]").length),t?t(sf.model.root[r][n],i):sf.model.root[r][n][i]},self.modelElement=function(e){return 1===e.nodeType&&void 0!==e.sf$controlled?e:$.parentHasProperty(e,"sf$controlled")},self.modelName=function(e){var t=self.modelElement(e);if(null!==t)return void 0===(t=t.sf$controlled)||self.active[t]||self.run(t),t;console.error("Can't find any controller for",e)};var listenSFClick=function(e){var element=e.target,script=element.getAttribute("sf-click");script||(element=$.parent(element,"[sf-click]"),script=element.getAttribute("sf-click"));var model=$.parentHasProperty(element,"sf$controlled"),_modelScope=model.model;if(model=model.sf$controlled,void 0===_modelScope)return console.error("Couldn't find model for '"+model+"' that was called from sf-click");var modelKeys=sf.model.modelKeys(_modelScope).join("|");script=avoidQuotes(script,function(e){return e.replace(RegExp(sf.regex.strictVar+"("+modelKeys+")\\b","g"),function(e,t){return"_modelScope."+t})}),script=script.split("(");var method=script.shift(),method_=method;try{method=eval(method)}catch(e){return void console.error("Error on sf-click for model: "+model+" [Cannot call `"+method_+"`]\n",element,e)}script=script.join("("),script=script.split(")"),script.pop(),script=script.join("("),script=0!==script.length?eval(("["+script+"]").replace(/,this|\[this/g,function(e){return e[0]+"element"})):[e];try{method.apply(element,script),e.preventDefault()}catch(e){console.error("Error on sf-click for model: "+model+"\n",element,"\n",e)}};self.run=function(e,t){if(sf.component.registered[e])return console.error("'"+e+"' is registered as a component");if(self.pending[e]){sf.model.root[e]||(sf.model.root[e]={}),self.pending[e](sf.model.root[e],root_),self.active[e]=!0,delete self.pending[e];var r=internal.controller.pending.indexOf(e);-1!==r&&internal.controller.pending.splice(r,1)}void 0===sf.model.root[e]&&(sf.model.root[e]={}),t&&t(sf.model.root[e],root_)},self.init=function(e){if(!sf.loader.DOMWasLoaded)return sf(function(){self.init(e)});for(var t=$("[sf-controller]",e||document.body),r=0;r<t.length;r++)self.run(t[r].sf$controlled)},document.addEventListener("DOMContentLoaded",function(){$.on(document.body,"click","[sf-click]",listenSFClick)},{capture:!0,once:!0})};var root_=function(e){if(sf.component.registered[e]){var t=[],r=sf.component.available[e];if(void 0!==r)for(var n=0;n<r.length;n++)t.push(sf.model.root[r[n]]);return t}if(!sf.model.root[e]){var o=sf.model.root[e]={};if(void 0!==internal.modelPending[e]){for(var i=internal.modelPending[e],l=0;l<i.length;l++)i[l](o,root_);delete internal.modelPending[e]}}return sf.model.root[e]},globals={},jsonpRequests=0;function Request(e){var t=Object.assign({},globals);"beforeCreate beforeOpen beforeSend error complete success statusCode".split(" ").forEach(function(e){delete t[e]});var r=Object.assign({url:window.location.toString(),method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},t),n=Object.assign({},r,e);function o(e){for(var t,r,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return globals[e]&&(t=globals[e].apply(globals,o)),n[e]&&(r=n[e].apply(n,o)),"boolean"!=typeof t&&(t=!0),"boolean"!=typeof r&&(r=!0),t&&r}if(!1!==o("beforeCreate",n)){n.type&&(n.method=n.type);var i=n.url.indexOf("?")>=0?"&":"?",l=n.method.toUpperCase();if(("GET"===l||"HEAD"===l||"OPTIONS"===l||"DELETE"===l)&&n.data){var a=void 0;(a="string"==typeof n.data?n.data.indexOf("?")>=0?n.data.split("?")[1]:n.data:serializeQuery(n.data)).length&&(n.url+=i+a,"?"===i&&(i="&"))}if("json"===n.dataType&&n.url.indexOf("callback=")>=0){var s,u="jsonp_"+(Date.now()+(jsonpRequests+=1)),f=n.url.split("callback="),d=f[0]+"callback="+u;if(f[1].indexOf("&")>=0){var c=f[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");c.length>0&&(d+="&"+c)}var p=document.createElement("script");return p.type="text/javascript",p.onerror=function(){clearTimeout(s),o("error",null,"scripterror"),o("complete",null,"scripterror")},p.src=d,window[u]=function(e){clearTimeout(s),o("success",e),p.parentNode.removeChild(p),p=null,delete window[u]},document.head.appendChild(p),void(n.timeout>0&&(s=setTimeout(function(){p.parentNode.removeChild(p),p=null,o("error",null,"timeout")},n.timeout)))}"GET"!==l&&"HEAD"!==l&&"OPTIONS"!==l&&"DELETE"!==l||!1===n.cache&&(n.url+=i+"_nocache"+Date.now());var v=new XMLHttpRequest;if(v.requestUrl=n.url,v.requestParameters=n,!1===o("beforeOpen",v,n))return v;v.open(l,n.url,n.async,n.user,n.password);var h,g=null;if(("POST"===l||"PUT"===l||"PATCH"===l)&&n.data)if(n.processData)if([ArrayBuffer,Blob,Document,FormData].indexOf(n.data.constructor)>=0)g=n.data;else{var m="---------------------------"+Date.now().toString(16);"multipart/form-data"===n.contentType?v.setRequestHeader("Content-Type","multipart/form-data; boundary="+m):v.setRequestHeader("Content-Type",n.contentType),g="";var b=serializeQuery(n.data);if("multipart/form-data"===n.contentType){b=b.split("&");for(var y=[],C=0;C<b.length;C+=1)y.push('Content-Disposition: form-data; name="'+b[C].split("=")[0]+'"\r\n\r\n'+b[C].split("=")[1]+"\r\n");g="--"+m+"\r\n"+y.join("--"+m+"\r\n")+"--"+m+"--\r\n"}else g="application/json"===n.contentType?JSON.stringify(n.data):b}else g=n.data,v.setRequestHeader("Content-Type",n.contentType);return n.headers&&Object.keys(n.headers).forEach(function(e){v.setRequestHeader(e,n.headers[e])}),"void 0"==typeof n.crossDomain&&(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!==window.location.host),n.crossDomain||v.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.xhrFields&&Object.assign(v,n.xhrFields),v.onload=function(){if(h&&clearTimeout(h),v.status>=200&&v.status<300||0===v.status){var e=void 0;if("json"===n.dataType){var t=void 0;try{e=JSON.parse(v.responseText)}catch(e){t=!0}t?o("error",v,"parseerror"):o("success",e,v.status,v)}else o("success",e="text"===v.responseType||""===v.responseType?v.responseText:v.response,v.status,v)}else o("error",v,v.status);n.statusCode&&(globals.statusCode&&globals.statusCode[v.status]&&globals.statusCode[v.status](v),n.statusCode[v.status]&&n.statusCode[v.status](v)),o("complete",v,v.status)},v.onerror=function(){h&&clearTimeout(h),o("error",v,v.status),o("complete",v,"error")},n.timeout>0&&(v.onabort=function(){h&&clearTimeout(h)},h=setTimeout(function(){v.abort(),o("error",v,"timeout"),o("complete",v,"timeout")},n.timeout)),!1===o("beforeSend",v,n)?v:(v.send(g),v)}}function RequestShortcut(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=[],o=n[0],i=n[1],l=n[2],a=n[3],s=n[4];"function"==typeof t[1]?(o=t[0],l=t[1],a=t[2],s=t[3]):(o=t[0],i=t[1],l=t[2],a=t[3],s=t[4]),[l,a].forEach(function(e){"string"==typeof e&&(s=e,e===l?l=void 0:a=void 0)});var u={url:o,method:"post"===e||"postJSON"===e?"POST":"GET",data:i,success:l,error:a,dataType:s=s||("json"===e||"postJSON"===e?"json":void 0)};return"postJSON"===e&&Object.assign(u,{contentType:"application/json",processData:!1,crossDomain:!0,data:"string"==typeof i?i:JSON.stringify(i)}),Request(u)}function serializeQuery(e,t){for(var r=Object.keys(e),n=0;n<r.length;n++){var o=e[r[n]];e.constructor===Array?r[n]+=t+"[]":e.constructor===Object&&(r[n]=t?t+"["+r[n]+"]":r[n]),r[n]="object"==typeof o?serializeQuery(o,r[n]):r[n]+"="+encodeURIComponent(o)}return r.join("&")}return Object.assign(Request,{get:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RequestShortcut.apply(void 0,["get"].concat(e))},post:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RequestShortcut.apply(void 0,["post"].concat(e))},json:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RequestShortcut.apply(void 0,["json"].concat(e))},getJSON:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RequestShortcut.apply(void 0,["json"].concat(e))},postJSON:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return RequestShortcut.apply(void 0,["postJSON"].concat(e))}}),Request.setup=function(e){e.type&&!e.method&&Object.assign(e,{method:e.type}),Object.assign(globals,e)},$.ajax=sf.ajax=Request,sf.events=function(){var e={},t={};function r(n,o){if(n.constructor!==Array){if(void 0===r[n]){var i=void 0;if(void 0!==o&&o.constructor===Boolean&&(i=o),void 0!==i)Object.defineProperty(r,n,{enumerable:!1,configurable:!0,get:function(){return i},set:function(e){if(i!==e){var o=t[n];if(void 0!==o){for(var l=0;l<o.length;l++)try{o[l].apply(null,arguments)}catch(e){console.error(e)}delete t[n]}Object.defineProperty(r,n,{enumerable:!1,configurable:!0,writable:!0,value:e})}}});else{r[n]=function(){for(var e=0;e<l.length;e++)try{l[e].apply(null,arguments),!0===l[e].once&&l.splice(e--,1)}catch(e){console.error(e)}},void 0===e[n]&&(e[n]=[]);var l=e[n]}}o&&o.constructor===Function&&(o(r[n]),o=null)}else for(var a=0;a<n.length;a++)r(n[a],o)}return self.warningWhen=10,r.when=function(e,n){if(!0===r[e])return n();void 0===t[e]&&(t[e]=[]),t[e].push(n)},r.once=function(t,r){r.once=!0,e[t].push(r)},r.on=function(t,r){void 0===e[t]&&(e[t]=[]),e[t].length>=self.warningWhen&&console.warn("Events",t,"have more than",self.warningWhen,"callback, there may possible memory leak."),e[t].push(r)},r.off=function(t,r){if(void 0===e[t])return e[t].length=0;var n=e[t].indexOf(r);-1!==n&&e[t].splice(n,1)},r}(),function(){var e=sf.lang=function(e){sf.lang.init(e)};e.list={},e.default="en",e.serverURL=!1,e.interpolate={},e.add=function(t,r){void 0===e.list[t]&&(e.list[t]={}),function e(t,r){var n=Object.keys(r);for(var o=0;o<n.length;o++){var i=n[o];void 0===t[i]?t[i]=r[i]:r[i].constructor===Object&&e(t[i],r[i])}}(e.list[t],r)};var t=/{(.*?)}/;function r(r,n){return r.replace(t,function(t,r){return void 0!==n[r]?n[r].constructor===Function?n[r]():n[r]:void 0!==e.interpolate[r]?e.interpolate[r].constructor===Function?e.interpolate[r]():e.interpolate[r]:t})}var n=!1,o=[];function i(){!1!==a&&(clearTimeout(n),n=setTimeout(function(){!1!==u&&u.abort(),u=sf.ajax({url:e.serverURL,data:{lang:e.default,paths:JSON.stringify(a)},dataType:"json",method:"POST",success:function(t){a=!1,e.add(e.default,t);for(var r=e.list[e.default],n=0;n<o.length;n++)void 0===o[n].callbackOnly?o[n](f(r,o[n].path)):o[n]();o.length=0},error:e.onError})},500))}function l(t,n,l){for(var s=e.list[e.default],u={},d=[],c=0;c<t.length;c++){var p=f(s,t[c]);p?u[t[c]]=p:d.push(t[c])}if(0===d.length)return n&&(u=r(u,n)),l?l(u):u;!1===a&&(a={});for(c=0;c<d.length;c++)f(a,d[c],1);var v=function(){for(var e=0;e<d.length;e++){var t=f(s,d[e]);t&&(u[d[e]]=t)}return l(u)};v.callbackOnly=!0,o.push(v),i()}e.get=function(t,n,s){return void 0!==n&&n.constructor===Function&&(s=n,n=void 0),t.constructor===String?function(t,n,l){var s=f(e.list[e.default],t);if(void 0!==s)return n&&(s=r(s,n)),l?l(s):s;!1===a&&(a={});f(a,t,1),l&&(l.path=t,o.push(l));return i(),t}(t,n,s):l(t,n,s)},e.assign=function(e,t,r,n){var o=Object.keys(t),i=Object.values(t);void 0!==r&&r.constructor===Function&&(n=r,r=void 0),l(i,r,function(t){for(var r=0;r<o.length;r++)e[o[r]]=t[i[r]];n&&n()})};var a=!1,s=[],u=!1;function f(e,t,r){for(var n=t.split("."),o=0,i=n.length-1;o<=i;o++){var l=n[o];if(void 0===r){if(void 0===e[l])return;e=e[l]}else{if(o===i)return void(e[l]=r);e=void 0===e[l]?e[l]={}:e[l]}}return e}function d(t,r){for(var n=e.list[e.default],o=t.length-1;o>=0;o--)if(t[o].sf_lang!==e.default||!0!==r){var i=t[o],l=i.getAttribute("sf-lang"),u=f(n,l);void 0!==u?(!0===r&&t.splice(o,1),"INPUT"===i.tagName?i.placeholder=u:i.textContent=u,i.sf_lang=e.default):!0!==r&&(!1===a&&(a={}),f(a,l,1),s.push(i))}else t.splice(o,1)}e.onError=!1,e.init=function(t){var r=t.querySelectorAll("[sf-lang]");if(void 0===e.list[e.default]&&(e.list[e.default]={}),d(r),!1!==a&&!1!==e.serverURL){var n=function(){a=!1,d(s,!0)};n.callbackOnly=!0,o.push(n),i()}!1!==a&&!1===e.serverURL&&console.warn("Some language was not found, and the serverURL was set to false")}}(),function(){var e=sf.url=function(){var r="";for(var n in t)"/"!==t[n]&&(r+="#"+n+t[n]);var o="|"+e.data.join("|");return e.paths+r+(1!==o.length?o:"")},t=e.hashes={};e.data={},e.paths="/",e.push=function(){window.history.pushState((window.history.state||0)+1,"",e())},e.replace=function(){window.history.replaceState(window.history.state,"",e())},e.get=function(r,n){return e.parse(),r.constructor===Number?e.paths.split("/")[r+1]:void 0!==t[r]?t[r].split("/")[n+1]:void 0},e.parse=function(r){if(void 0!==r){var n={hashes:{}};n.data=r.split("|");for(var o=n.data.shift().split("#"),i=1;i<o.length;i++){var l=o[i].split("/");n.hashes[l.shift()]="/"+l.join("/")}return n.paths=r.split("#")[0],n}e.data=window.location.hash.split("|");for(o=e.data.shift().split("#"),i=1;i<o.length;i++){l=o[i].split("/");t[l.shift()]="/"+l.join("/")}return e.paths=window.location.pathname,e},e.parse()}(),function(){var e=routerEval;routerEval=void 0;var t=/<html/,r=sf.url.hashes,n=!1,o=1,i=window.history.state||1,l=!1;window.addEventListener("popstate",function(e){if(n)return n=!1,void(i-=o);l=!0,o=window.history.state>=i?1:-1,i+=o,s.goto(),l=!1},!1),sf(function(){$.on(document.body,"click","a[href]",function(e){e.preventDefault();var t=e.target,r=t.getAttribute("href");if(null===r&&(r=(t=$.parent(t,"a[href]")).getAttribute("href")),"@"!==r[0]){-1===t.href.replace(window.location.origin,"").indexOf("//")&&s.goto(r)}else{var n=t.getAttribute("target");n?window.open(r.slice(1),n):window.location=r.slice(1)}})});var a={};internal.router={},internal.router.parseRoutes=function(e,t){var r=[],n=/\/:([^\/]+)/g,o=/^(path|url|templateURL|html|on|routes|beforeRoute|defaultData|cache)$/;return function e(i,l,a,s){""!==a&&(a+=" ");for(var u=0;u<i.length;u++){var f=i[u],d=l+f.path;void 0!==f.routes&&e(f.routes,d,a,s),d=d.split("//").join("/");var c=[],p=d.replace(n,function(e,t){return c.push(t),"/([^/]+)"}),v=RegExp("^"+p+"$");if(void 0!==f.url)v.url=f.url;else if(void 0!==f.templateURL)v.templateURL=f.templateURL;else if(void 0!==f.html){var h=v.html=document.createElement("sf-page-view");f.html.constructor===String?h.innerHTML=f.html:h.appendChild(f.html),h.classList.add("page-prepare")}v.keys=c,v.beforeRoute=f.beforeRoute,v.defaultData=f.defaultData||{},""!==a&&(v.selector=t.indexOf(a),-1===v.selector&&(v.selector=t.length,t.push(a.trim()))),void 0!==s&&(v.parent=s),void 0!==f.on&&(v.on=f.on),f.cache&&(v.cache=!0);for(var g=[],m=(c=Object.keys(f),0);m<c.length;m++)if(!o.test(c[m])){g.push(c[m]),e(f[c[m]],d,c[m],v);break}0!==g.length&&(v.hasChild=g,v.forChild=RegExp(p)),r.push(v)}}(e,"",""),r},internal.router.findRoute=function(e){for(var t=0;t<this.length;t++){var r=e.match(this[t]);if(null!==r){var n=this[t].keys;if(void 0!==n){var o=this[t].data={};r.shift();for(var i=0;i<n.length;i++)o[n[i]]=r[i]}return this[t]}}return!1};var s=sf.views=function(i,s){void 0===s&&(s="/");var u=this;s&&(void 0===sf.views.list[s]&&(sf.views.list[s]=[]),sf.views.list[s].push(u));var f=!1;"/"===s?u.currentPath=sf.url.paths:!1===s?u.currentPath="":(u.currentPath="",f=!0);var d=!1,c=!1;u.lastPath="/",u.currentDOM=null,u.lastDOM=null,u.relatedDOM=[],u.data={},u.maxCache=2;var p={};u.selector=function(e,t,r){d=!0;var n=(t||(p.isConnected?p:document)).querySelector(e||i);if(!n)return!1;if(n.sf$viewInitialized)return!1;if(null===b&&(b=n.getElementsByTagName("sf-page-view")),n){e&&(i=e);var o=null;if(0!==n.childNodes.length)if(1===n.childNodes.length&&"#text"===n.firstChild.nodeName&&""===n.firstChild.textContent.trim())n.firstChild.remove();else{o=document.createElement("sf-page-view"),n.insertBefore(o,n.firstChild);for(var l=1,a=n.childNodes.length;l<a;l++)o.appendChild(n.childNodes[1]);o.routePath=r||u.currentPath,o.routeCached=h.findRoute(o.routePath),o.classList.add("page-current"),n.defaultViewContent=o}return n.sf$viewInitialized=!0,t?n:(u.currentDOM=o,p=n,!0)}return!1};var v=[i],h=[];h.findRoute=internal.router.findRoute,internal.router.enabled=!0;var g={routeStart:[],routeFinish:[],routeCached:[],routeError:[]};u.on=function(e,t){if(void 0===g[e])return console.error("Event '"+e+"' was not exist");-1===g[e].indexOf(t)&&g[e].push(t)},u.addRoute=function(e){h.push.apply(h,internal.router.parseRoutes(e,v)),d||u.selector(),!c&&s&&sf(function(){c||("/"!==s||p.childElementCount||(u.currentPath="",c=u.goto(sf.url.paths)),f&&(c=void 0!==r[s]?u.goto(r[s]):u.goto("/"))&&(f=!1))})};var m=!1,b=null;function y(e,t){if(!e.aborted){n=!0,m=!1;for(var r=0;r<g.routeError.length;r++)g.routeError[r](e.status,t);window.history.go(-1*o)}}var C="SF-PAGE-VIEW";function E(e,t,r,n){for(var o=[e],i=e.parentElement;i!==p&&null!==i;)i.nodeName===C&&o.unshift(i),i=i.parentElement;for(var l=void 0,a=void 0,s=0;s<u.relatedDOM.length;s++)-1===o.indexOf(u.relatedDOM[s])&&(void 0===l&&(a=(l=u.relatedDOM[s]).parentElement),u.relatedDOM[s].classList.remove("page-current"));var f=void 0;for(s=0;s<o.length;s++)void 0===f&&o[s].parentElement===a&&(f=o[s]),o[s].classList.add("page-current");u.showedSibling=f,u.lastSibling=l,e.classList.add("page-current"),u.relatedDOM=o}return u.goto=function(o,f,d,c){if(u.currentPath!==o){var C=h.findRoute(o);if(C&&(void 0===C.beforeRoute||!C.beforeRoute(C.data))){if("/"===s?sf.url.paths=o:s&&(r[s]=o),l||c||sf.url.push(),!p.isConnected)return void 0!==p.nodeType&&(p={}),u.selector(),console.error(s,"can't route to",o,"because element with selector '"+i+"' was not found");if(m&&m.abort(),function(e){var t=!1;function r(r){if(null===r)return!1;if(t=function(e){for(var t=b.length-1;t>=0;t--)if(e===b[t].routePath)return b[t];return!1}(e))return!0;for(var n=r.children,o=0;o<n.length;o++)if(n[o].routePath===e)return t=n[o],!0;return!1}if(!1===r(p))for(var n=0;n<v.length&&!r(p.querySelector(v[n]));n++);if(!1===t)return!1;void 0!==u.currentDOM.routeCached.on&&u.currentDOM.routeCached.on.leaving&&u.currentDOM.routeCached.on.leaving();u.currentDOM=t,u.data=t.routerData,void 0!==u.currentDOM.routeCached.on&&u.currentDOM.routeCached.on.coming&&u.currentDOM.routeCached.on.coming();E(t);for(var o=g.routeCached,n=0;n<o.length;n++)o[n](u.currentPath,u.lastPath);return u.lastPath=u.currentPath,u.currentPath=u.currentDOM.routePath,!0}(o))return!0;for(var $=0;$<g.routeStart.length;$++)if(g.routeStart[$](u.currentPath,o))return;var O=function(e){if(C.selector||C.hasChild){var t=e.sf$viewSelector;void 0===t&&(t=e.sf$viewSelector={})}if(C.hasChild){for(var r=[],n=0;n<C.hasChild.length;n++){t[C.hasChild[n]]=u.selector(C.hasChild[n],e,o);var i=t[C.hasChild[n]].firstElementChild;i&&r.unshift(i)}0===r.length&&(r=void 0)}else r=void 0;if(void 0===C.selector)var l=p;else{var a=v[C.selector],s=(l=null,function(e){for(var t=[],r=0;r<b.length;r++)0===e.indexOf(b[r].routePath)&&t.push(b[r]);return t}(o));for(n=0;n<s.length;n++){var f=s[n].sf$viewSelector;void 0!==f&&void 0!==f[a]&&(l=f[a])}if(!l||!l.isConnected){if(void 0===C.parent)return e.remove(),y({status:0});var h=o.match(C.parent.forChild)[0];return u.goto(h,!1,d,function(t){if(w(l=t.sf$viewSelector[a],e,t),c)return c(e);var r=e.parentElement.defaultViewContent;r.routePath!==o&&r.classList.remove("page-current")})}}w(l,e,!1,r),c&&c(e)};return void 0!==C.templateURL&&void 0!==a[C.templateURL]?(O(a[C.templateURL].cloneNode(!0)),!0):C.html?(O(C.html.cloneNode(!0)),!0):(m=sf.ajax({url:window.location.origin+(C.templateURL||C.url||o),method:d||"GET",data:Object.assign(f||C.defaultData,{_sf_view:void 0===C.selector?i:v[C.selector].split(" ").pop()}),success:function(e){if(t.test(e))return console.error("Views request was received <html> while it was disalowed. Please check http response from Network Tab."),y(1);var r=document.createElement("sf-page-view");if(r.innerHTML=e,r.classList.add("page-prepare"),void 0!==C.templateURL){internal.component.skip=!0;var n=document.createElement("sf-page-view");n.innerHTML=e,n.classList.add("page-prepare"),a[C.templateURL]=n,internal.component.skip=!1}O(r)},error:y}),!0)}}function w(t,r,i,l){if(i&&(r.parentPageElement=i),r.routerData={},"#comment"===r.firstChild.nodeName&&0===r.firstChild.textContent.indexOf(" SF-View-Data")&&(r.routerData=JSON.parse(r.firstChild.textContent.slice(14)),r.firstChild.remove()),t.insertAdjacentElement("beforeend",r),Object.assign(r.routerData,C.data),u.data=r.routerData,!1!==u.dynamicScript)for(var a=r.getElementsByTagName("script"),s=0;s<a.length;s++)e(a[s].text);setTimeout(function(){void 0!==C.on&&C.on.coming&&C.on.coming(u.data),C.cache&&(r.routeNoRemove=!0);var e=u.currentDOM;u.currentDOM=r,E(r);for(var t=g.routeFinish,i=0;i<t.length;i++)if(t[i](u.currentPath,o))return;void 0!==l&&u.relatedDOM.push.apply(u.relatedDOM,l),null!==e&&(u.lastPath=u.currentPath,e.routeCached&&void 0!==e.routeCached.on&&e.routeCached.on.leaving&&e.routeCached.on.leaving(o,C),u.lastDOM=e),u.currentPath=o,r.routeCached=C,r.routePath=o,r.classList.remove("page-prepare"),n=!1;var a=u.currentDOM.parentNode;for(i=a.childElementCount-u.maxCache-1;i>=0;i--)a.defaultViewContent!==a.firstElementChild&&a.firstElementChild.routeNoRemove?a.firstElementChild.remove():a.childElementCount>1&&a.firstElementChild.nextElementSibling.remove()})}},u};s.list={},s.goto=function(e){var t=sf.url.parse(e);sf.url.data=t.data;var r=s.list;if(void 0!==r["/"])for(var n=r["/"],o=0;o<n.length;o++)n[o].currentPath!==t.paths&&n[o].goto(t.paths);for(var i=Object.keys(t.hashes),l=0;l<i.length;l++){if(void 0!==(n=r[i[l]]))for(o=0;o<n.length;o++)n[o].currentPath!==t.hashes[i[l]]&&n[o].goto(t.hashes[i[l]])}}}(),sf.internal.virtual_scroll=new function(){var e=this,t=!1;function r(t,r,n,o){var i=Math.floor(e.prepareCount/2);if(t<e.prepareCount)return r.ceiling=-1,r.floor=o.children[2*e.prepareCount+1],void 0!==r.floor?r.floor=r.floor.offsetTop:r.floor=o.lastElementChild.offsetTop+1e3,void(r.floor-=r.initial);void 0!==o.children[i+1]&&(r.ceiling=o.children[i+1].offsetTop),void 0!==n.$virtual.preparedLength&&t>=n.length-n.$virtual.preparedLength?r.floor=n.$virtual.dCursor.floor.offsetTop+2*n.$virtual.scrollHeight:(r.floor=o.children[e.prepareCount+3].offsetTop,o.sf$scroll_reduce_floor&&(r.floor-=o.sf$scroll_reduce_floor,r.ceiling-=o.sf$scroll_reduce_floor)),r.ceiling-=r.initial,r.floor-=r.initial}function n(e,n,o,i,l){var a=n.$virtual,s=0,u=e;if(e>=n.length-a.preparedLength&&(s-=o,e=n.length-a.preparedLength),!(e-a.DOMCursor==0||e>=n.length)){if(t=!0,0===a.DOMCursor&&e<o+o/2||a.DOMCursor+o/2>e&&a.DOMCursor+o<e)l.scrollTop=n.getElement(u).offsetTop;else{for(var f=null,d=a.dCursor.ceiling,c=a.dCursor.floor,p=a.vCursor,v=i.childElementCount-2,h=0;h<v;h++)f=d.nextElementSibling,null===p.floor?(a.dom.insertAdjacentElement("beforeEnd",f),h===v-1&&(p.floor=f)):p.floor.insertAdjacentElement("beforeBegin",f);e>=o?e<n.length-a.preparedLength&&(e-=o):(s=o-e,a.DOMCursor=e=0);var g=a.preparedLength<=n.length?a.preparedLength:n.length;for(h=0;h<g&&void 0!==(f=a.dom.children[e]);h++)c.insertAdjacentElement("beforeBegin",f);a.DOMCursor=e,p.floor=a.dom.children[e]||null,p.ceiling=p.floor?p.floor.previousElementSibling:null,n.$virtual.refreshVirtualSpacer&&n.$virtual.refreshVirtualSpacer(e),r(e,a.bounding,n,i),void 0!==(f=i.children[o-s+1])&&(l.scrollTop=f.offsetTop-l.offsetTop)}t=!1}}function o(e){e.style.overflow="hidden",setTimeout(function(){e.style.overflow=""},50)}function i(e){var t=window.getComputedStyle(e),r=parseInt(t.marginTop)+parseInt(t.marginBottom);return e.offsetHeight+r||0}function l(e,t,o,i,l,a,s){var u=t.$virtual.DOMCursor,f=0;if(e){var d=-1,c=t.$virtual.preparedLength;do{d++}while(d<c&&i.children[d].offsetTop<l.scrollTop);(u+=d)>0&&(u-=1),f=l.scrollTop-i.children[d].offsetTop}if(e||i.childElementCount-2>t.$virtual.preparedLength){t.$virtual.DOMCursor=t.length;var p=u;e||(p=u<=o?u:u+o),n(p,t,o,i,l),l.scrollTop+=f}s&&s(u),a&&a(),r(u,t.$virtual.bounding,t,i)}e.prepareCount=4,e.handle=function(u,f){var d=u.$virtual;d.reset=function(e){d.DOMCursor=0,d.bounding.ceiling=-1,d.bounding.floor=0,d.vCursor.ceiling=null,d.vCursor.floor=d.dom.firstElementChild,d.bounding.initial=d.dCursor.ceiling.offsetTop,r(0,d.bounding,u,f)},d.reinitCursor=function(){d.vCursor.ceiling=d.dom.children[d.DOMCursor-1]||null,d.vCursor.floor=d.dom.children[d.DOMCursor]||null},d.reinitScroll=function(){r(d.DOMCursor,d.bounding,u,f)},d.elements=function(){return function(e,t){for(var r=[],n=void 0,o=e.$virtual.DOMCursor,i=0;i<o&&void 0!==(n=e.$virtual.dom.children[i]);i++)r.push(n);o=t.childElementCount-2;for(var i=1;i<=o&&void 0!==(n=t.children[i]);i++)r.push(n);var l=e.$virtual.dom.childElementCount+o;o=l-o-e.$virtual.DOMCursor;for(var i=0;i<o&&void 0!==(n=e.$virtual.dom.children[e.$virtual.DOMCursor+i]);i++)r.push(n);return r}(u,f)},d.dCursor={ceiling:f.querySelector(".virtual-spacer.ceiling"),floor:f.querySelector(".virtual-spacer.floor")},d.bounding={},d.vCursor={},d.reset(),d.targetNode=f,d.scrollHeight=d.dCursor.ceiling.nextElementSibling.offsetHeight;var c=f;d.destroy=function(){$.off(c,"scroll"),$.off(f,"mousedown mouseup"),d.dom.innerHTML="",function(e){for(var t=a.length-1;t>=0;t--)a[t].element===e&&a.splice(t,1)}(f),delete u.$virtual},d.resetViewport=function(){d.visibleLength=Math.floor(c.clientHeight/d.scrollHeight),d.preparedLength=d.visibleLength+2*e.prepareCount,d.preparedLength<18&&(d.preparedLength=18)},setTimeout(function(){void 0!==u.$virtual&&f.isConnected&&((c=internal.findScrollerElement(f)).classList.add("sf-scroll-element"),internal.addScrollerStyle(),d.resetViewport(),f.hasAttribute("scroll-reduce-floor")&&(f.sf$scroll_reduce_floor=f.getAttribute("scroll-reduce-floor"),f.removeAttribute("scroll-reduce-floor")),f.classList.contains("sf-list-dynamic")?(!0,function(o,u,f){var d=o.$virtual,c=d.dCursor.ceiling,p=d.dCursor.floor,v=d.vCursor;v.floor=d.dom.firstElementChild,d.scrollTo=function(t){n(t,o,e.prepareCount,u,f),m=0,b=0,c.style.height=m+"px",p.style.height=b+"px"},d.refresh=function(t){l(t,o,e.prepareCount,u,f),y()},y(),d.visibleLength=u.childElementCount-2,d.preparedLength=d.visibleLength+2*e.prepareCount,d.preparedLength<18&&(d.preparedLength=18);for(var h=0;h<e.prepareCount;h++){var g=v.floor;if(null===g)break;v.floor=g.nextElementSibling,p.insertAdjacentElement("beforeBegin",g)}d.DOMCursor=0;var m=0,b=0;function y(){for(var e=d.preparedLength-(u.childElementCount-2),t=0;t<e&&null!==(g=null===v.ceiling?d.dom.firstElementChild:v.ceiling.nextElementSibling);t++)v.floor=g.nextElementSibling,p.insertAdjacentElement("beforeBegin",g)}var C=d.bounding;if(r(0,C,o,u),void 0!==d.callback_){var E=d.callback_;delete d.callback_}var O=!1;$.on(f,"scroll",function(){if(O||t)return;O=!0,f.scrollTop<C.ceiling?(!function(){for(var t=null,r=!1,n=0;n<e.prepareCount&&null!==(t=null===v.floor?d.dom.lastElementChild:v.floor.previousElementSibling);n++)v.ceiling=t.previousElementSibling,d.DOMCursor--,c.insertAdjacentElement("afterEnd",t),m>0&&(m-=i(t)),d.DOMCursor<e.prepareCount&&!r&&(n=0,r=!0,t=null);(m<0||null===t)&&(m=0);for(var l=u.childElementCount-2-o.$virtual.preparedLength,n=0;n<l;n++)t=p.previousElementSibling,b+=i(t),null===v.floor?d.dom.insertAdjacentElement("beforeEnd",t):v.floor.insertAdjacentElement("beforeBegin",t),v.floor=t;null===v.floor?v.ceiling=d.dom.lastElementChild:v.ceiling=v.floor.previousElementSibling;c.style.height=m+"px",p.style.height=b+"px"}(),r(d.DOMCursor,C,o,u)):f.scrollTop>C.floor&&(!function(){var t=null;if(y(),null!==v.floor){null===v.ceiling&&(v.ceiling=v.floor.previousElementSibling);for(var r=0;r<e.prepareCount&&null!==(t=v.floor);r++)v.floor=t.nextElementSibling,p.insertAdjacentElement("beforeBegin",t),b>0&&(b-=i(t))}(b<0||null===t)&&(b=0);for(var n=u.childElementCount-2-o.$virtual.preparedLength,r=0;r<n;r++)t=c.nextElementSibling,m+=i(t),d.DOMCursor++,null===v.ceiling?d.dom.insertAdjacentElement("afterBegin",t):v.ceiling.insertAdjacentElement("afterEnd",t),v.ceiling=t;null===v.ceiling?v.floor=d.dom.firstElementChild:v.floor=v.ceiling.nextElementSibling;c.style.height=m+"px",p.style.height=b+"px"}(),r(d.DOMCursor,C,o,u));void 0!==d.callback&&0!==o.length?d.callback.hitFloor&&null===d.vCursor.floor&&f.scrollTop+f.clientHeight===f.scrollHeight?d.callback.hitFloor(d.DOMCursor):d.callback.hitCeiling&&null===d.vCursor.ceiling&&0===f.scrollTop&&d.callback.hitCeiling(d.DOMCursor):E&&E.ref[E.var]&&(d.callback=E.ref[E.var],E=null);O=!1,0===f.scrollTop&&c.offsetHeight>10&&d.scrollTo(0)}),function(e,t){-1===s&&(s=setInterval(function(){for(var e=null,t=a.length-1;t>=0;t--)(e=a[t]).element.isConnected?e.element.scrollHeight!==e.height&&e.element.scrollWidth!==e.width&&e.callback():a.splice(t,1);0===a.length&&(clearInterval(s),s=-1)},1e3));a.push({element:e,callback:t,height:e.scrollHeight,width:e.scrollWidth})}(u,function(){r(d.DOMCursor,C,o,u)})}(u,f,c)):function(i,a,s){for(var u=i.$virtual,f=u.dCursor.ceiling,d=u.dCursor.floor,c=u.preparedLength<=i.length?u.preparedLength:i.length,p=0;p<c&&null!==u.dom.firstElementChild;p++)d.insertAdjacentElement("beforeBegin",u.dom.firstElementChild);function v(t){if(t>=e.prepareCount)f.style.height=(t-e.prepareCount)*u.scrollHeight+"px",d.style.height=(i.length-u.preparedLength-t)*u.scrollHeight+"px";else{f.style.height=t*u.scrollHeight+"px";var r=i.length-u.preparedLength;d.style.height=(r||0)*u.scrollHeight+"px"}}u.refreshVirtualSpacer=v;var h=u.bounding;if(v(0),r(e.prepareCount,h,i,a),h.ceiling=-1,u.offsetTo=function(e){return e*u.scrollHeight+f.offsetTop},u.vCursor.floor=u.dom.firstElementChild,u.scrollTo=function(t){n(t,i,e.prepareCount,a,s)},u.refresh=function(t){l(t,i,e.prepareCount,a,s,C,v)},void 0!==u.callback_){var g=u.callback_;delete u.callback_}var m=!1,b=!0,y=!1;function C(){if(m||t||s.scrollTop>=h.ceiling&&s.scrollTop<=h.floor)y&&(0!==s.scrollTop&&s.scrollTop!==s.scrollHeight-s.clientHeight||(o(s),y=!1));else{var n=Math.floor(s.scrollTop/u.scrollHeight);n+u.preparedLength>i.length&&(n=i.length-u.preparedLength),b&&(n<2*e.prepareCount&&(n-=e.prepareCount),y&&(o(s),y=!1),b=!1),n<e.prepareCount&&(n=0,b=!0),m=!0;var l=n-u.DOMCursor;n+l>=i.length&&(l=n+l-i.length),0!==l?(u.DOMCursor=n,function(e,t){var r=t.$virtual.dom,n=t.$virtual.vCursor,o=t.$virtual.dCursor;if(e>0){for(var i=0,l=0;l<e&&null!==(i=null===n.ceiling?r.firstElementChild:n.ceiling.nextElementSibling);l++)o.floor.insertAdjacentElement("beforeBegin",i);for(var l=e;l>0;l--)null===n.ceiling?(n.ceiling=o.ceiling.nextElementSibling,r.insertAdjacentElement("afterBegin",n.ceiling)):(i=o.ceiling.nextElementSibling,n.ceiling.insertAdjacentElement("afterEnd",i),n.ceiling=i);n.floor=n.ceiling.nextElementSibling}else if(e<0){var i=0;e=-e;for(var l=0;l<e&&null!==(i=null===n.floor?r.lastElementChild:n.floor.previousElementSibling);l++)o.ceiling.insertAdjacentElement("afterEnd",i);for(var l=0;l<e;l++)null===n.floor?(n.floor=o.floor.previousElementSibling,r.insertAdjacentElement("beforeEnd",n.floor)):(i=o.floor.previousElementSibling,n.floor.insertAdjacentElement("beforeBegin",i),n.floor=i);n.ceiling=n.floor.previousElementSibling}}(l,i),v(n),r(n,h,i,a),void 0!==u.callback&&0!==i.length?u.callback.hitFloor&&null===u.vCursor.floor?u.callback.hitFloor(n):u.callback.hitCeiling&&null===u.vCursor.ceiling&&u.callback.hitCeiling(n):g&&g.ref[g.var]&&(u.callback=g.ref[g.var],g=null),m=!1):m=!1}}$.on(s,"scroll",C),s===a&&-1!==navigator.userAgent.indexOf("Chrom")&&($.on(a,"mousedown",function(){y=!0}),$.on(a,"mouseup",function(){y=!1}))}(u,f,c))},500)};var a=[],s=-1;var u=!1;internal.addScrollerStyle=function(){if(!u){var e=document.getElementById("sf-styles");e||((e=document.createElement("style")).id="sf-styles",document.head.appendChild(e)),e.sheet.insertRule(".sf-virtual-list .virtual-spacer{visibility: hidden !important;position: relative !important;transform-origin: 0 0 !important;width: 0 !important;margin: 0 !important;padding: 0 !important;background: none !important;border: none !important;box-shadow: none !important;transition: none !important;}",e.sheet.cssRules.length),e.sheet.insertRule(".sf-scroll-element {backface-visibility: hidden;}",e.sheet.cssRules.length),u=!0}};var f=/auto|scroll|overlay|hidden/;internal.findScrollerElement=function(e){for(;null!==e&&!1===f.test(getComputedStyle(e).overflow);)if((e=e.parentElement)===document.body)return null;return e}},sf});
//# sourceMappingURL=scarletsframe.min.1569421424673.js.map
